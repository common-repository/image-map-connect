(()=>{var e={187:e=>{"use strict";function t(e,t,n){n=n||2;var s,o,a,l,d,u,g,p=t&&t.length,m=p?t[0]*n:e.length,_=i(e,0,m,n,!0),y=[];if(!_||_.next===_.prev)return y;if(p&&(_=function(e,t,n,r){var s,o,a,l=[];for(s=0,o=t.length;s<o;s++)(a=i(e,t[s]*r,s<o-1?t[s+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(h),s=0;s<l.length;s++)n=c(l[s],n);return n}(e,t,_,n)),e.length>80*n){s=a=e[0],o=l=e[1];for(var v=n;v<m;v+=n)(d=e[v])<s&&(s=d),(u=e[v+1])<o&&(o=u),d>a&&(a=d),u>l&&(l=u);g=0!==(g=Math.max(a-s,l-o))?32767/g:0}return r(_,y,n,s,o,g,0),y}function i(e,t,i,n,r){var s,o;if(r===T(e,t,i,n)>0)for(s=t;s<i;s+=n)o=S(s,e[s],e[s+1],o);else for(s=i-n;s>=t;s-=n)o=S(s,e[s],e[s+1],o);return o&&_(o,o.next)&&(E(o),o=o.next),o}function n(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(E(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function r(e,t,i,h,c,d,f){if(e){!f&&d&&function(e,t,i,n){var r=e;do{0===r.z&&(r.z=u(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,s,o,a,l,h=1;do{for(i=e,e=null,s=null,o=0;i;){for(o++,n=i,a=0,t=0;t<h&&(a++,n=n.nextZ);t++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(o>1)}(r)}(e,h,c,d);for(var g,p,m=e;e.prev!==e.next;)if(g=e.prev,p=e.next,d?o(e,h,c,d):s(e))t.push(g.i/i|0),t.push(e.i/i|0),t.push(p.i/i|0),E(e),e=p.next,m=p.next;else if((e=p)===m){f?1===f?r(e=a(n(e),t,i),t,i,h,c,d,2):2===f&&l(e,t,i,h,c,d):r(n(e),t,i,h,c,d,1);break}}}function s(e){var t=e.prev,i=e,n=e.next;if(m(t,i,n)>=0)return!1;for(var r=t.x,s=i.x,o=n.x,a=t.y,l=i.y,h=n.y,c=r<s?r<o?r:o:s<o?s:o,d=a<l?a<h?a:h:l<h?l:h,u=r>s?r>o?r:o:s>o?s:o,f=a>l?a>h?a:h:l>h?l:h,p=n.next;p!==t;){if(p.x>=c&&p.x<=u&&p.y>=d&&p.y<=f&&g(r,a,s,l,o,h,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(e,t,i,n){var r=e.prev,s=e,o=e.next;if(m(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,c=r.y,d=s.y,f=o.y,p=a<l?a<h?a:h:l<h?l:h,_=c<d?c<f?c:f:d<f?d:f,y=a>l?a>h?a:h:l>h?l:h,v=c>d?c>f?c:f:d>f?d:f,x=u(p,_,t,i,n),b=u(y,v,t,i,n),w=e.prevZ,S=e.nextZ;w&&w.z>=x&&S&&S.z<=b;){if(w.x>=p&&w.x<=y&&w.y>=_&&w.y<=v&&w!==r&&w!==o&&g(a,c,l,d,h,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,S.x>=p&&S.x<=y&&S.y>=_&&S.y<=v&&S!==r&&S!==o&&g(a,c,l,d,h,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;w&&w.z>=x;){if(w.x>=p&&w.x<=y&&w.y>=_&&w.y<=v&&w!==r&&w!==o&&g(a,c,l,d,h,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;S&&S.z<=b;){if(S.x>=p&&S.x<=y&&S.y>=_&&S.y<=v&&S!==r&&S!==o&&g(a,c,l,d,h,f,S.x,S.y)&&m(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(e,t,i){var r=e;do{var s=r.prev,o=r.next.next;!_(s,o)&&y(s,r,r.next,o)&&b(s,o)&&b(o,s)&&(t.push(s.i/i|0),t.push(r.i/i|0),t.push(o.i/i|0),E(r),E(r.next),r=e=o),r=r.next}while(r!==e);return n(r)}function l(e,t,i,s,o,a){var l=e;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&p(l,h)){var c=w(l,h);return l=n(l,l.next),c=n(c,c.next),r(l,t,i,s,o,a,0),void r(c,t,i,s,o,a,0)}h=h.next}l=l.next}while(l!==e)}function h(e,t){return e.x-t.x}function c(e,t){var i=function(e,t){var i,n=t,r=e.x,s=e.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o&&(o=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==t);if(!i)return null;var l,h=i,c=i.x,u=i.y,f=1/0;n=i;do{r>=n.x&&n.x>=c&&r!==n.x&&g(s<u?r:o,s,c,u,s<u?o:r,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(r-n.x),b(n,e)&&(l<f||l===f&&(n.x>i.x||n.x===i.x&&d(i,n)))&&(i=n,f=l)),n=n.next}while(n!==h);return i}(e,t);if(!i)return t;var r=w(i,e);return n(r,r.next),n(i,i.next)}function d(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function u(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function g(e,t,i,n,r,s,o,a){return(r-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(i-o)*(t-a)&&(i-o)*(s-a)>=(r-o)*(n-a)}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&y(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||_(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,i,n){var r=x(m(e,t,i)),s=x(m(e,t,n)),o=x(m(i,n,e)),a=x(m(i,n,t));return r!==s&&o!==a||!(0!==r||!v(e,i,t))||!(0!==s||!v(e,n,t))||!(0!==o||!v(i,e,n))||!(0!==a||!v(i,t,n))}function v(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function x(e){return e>0?1:e<0?-1:0}function b(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function w(e,t){var i=new C(e.i,e.x,e.y),n=new C(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function S(e,t,i,n){var r=new C(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,i,n){for(var r=0,s=t,o=i-n;s<i;s+=n)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}e.exports=t,e.exports.default=t,t.deviation=function(e,t,i,n){var r=t&&t.length,s=r?t[0]*i:e.length,o=Math.abs(T(e,0,s,i));if(r)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,c=a<l-1?t[a+1]*i:e.length;o-=Math.abs(T(e,h,c,i))}var d=0;for(a=0;a<n.length;a+=3){var u=n[a]*i,f=n[a+1]*i,g=n[a+2]*i;d+=Math.abs((e[u]-e[g])*(e[f+1]-e[u+1])-(e[u]-e[f])*(e[g+1]-e[u+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},t.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++)for(var o=0;o<t;o++)i.vertices.push(e[r][s][o]);r>0&&(n+=e[r-1].length,i.holes.push(n))}return i}},582:function(e){e.exports=function(){"use strict";function e(e,n,r,s,o){!function e(i,n,r,s,o){for(;s>r;){if(s-r>600){var a=s-r+1,l=n-r+1,h=Math.log(a),c=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);e(i,n,Math.max(r,Math.floor(n-l*c/a+d)),Math.min(s,Math.floor(n+(a-l)*c/a+d)),o)}var u=i[n],f=r,g=s;for(t(i,r,n),o(i[s],u)>0&&t(i,r,s);f<g;){for(t(i,f,g),f++,g--;o(i[f],u)<0;)f++;for(;o(i[g],u)>0;)g--}0===o(i[r],u)?t(i,r,g):t(i,++g,s),g<=n&&(r=g+1),n<=g&&(s=g-1)}}(e,n,r||0,s||e.length-1,o||i)}function t(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function i(e,t){return e<t?-1:e>t?1:0}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(e,t,i){if(!i)return t.indexOf(e);for(var n=0;n<t.length;n++)if(i(e,t[n]))return n;return-1}function s(e,t){o(e,0,e.children.length,t,e)}function o(e,t,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=t;s<i;s++){var o=e.children[s];a(r,e.leaf?n(o):o)}return r}function a(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function g(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(t,i,n,r,s){for(var o=[i,n];o.length;)if(!((n=o.pop())-(i=o.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;e(t,a,i,n,s),o.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(e){var t=this.data,i=[];if(!f(e,t))return i;for(var n=this.toBBox,r=[];t;){for(var s=0;s<t.children.length;s++){var o=t.children[s],a=t.leaf?n(o):o;f(e,a)&&(t.leaf?i.push(o):u(e,a)?this._all(o,i):r.push(o))}t=r.pop()}return i},n.prototype.collides=function(e){var t=this.data;if(!f(e,t))return!1;for(var i=[];t;){for(var n=0;n<t.children.length;n++){var r=t.children[n],s=t.leaf?this.toBBox(r):r;if(f(e,s)){if(t.leaf||u(e,s))return!0;i.push(r)}}t=i.pop()}return!1},n.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(e,t){if(!e)return this;for(var i,n,s,o=this.data,a=this.toBBox(e),l=[],h=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=h.pop(),s=!0),o.leaf){var c=r(e,o.children,t);if(-1!==c)return o.children.splice(c,1),l.push(o),this._condense(l),this}s||o.leaf||!u(o,a)?n?(i++,o=n.children[i],s=!1):o=null:(l.push(o),h.push(i),i=0,n=o,o=o.children[0])}return this},n.prototype.toBBox=function(e){return e},n.prototype.compareMinX=function(e,t){return e.minX-t.minX},n.prototype.compareMinY=function(e,t){return e.minY-t.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(e){return this.data=e,this},n.prototype._all=function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},n.prototype._build=function(e,t,i,n){var r,o=i-t+1,a=this._maxEntries;if(o<=a)return s(r=g(e.slice(t,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n;var l=Math.ceil(o/a),h=l*Math.ceil(Math.sqrt(a));p(e,t,i,h,this.compareMinX);for(var c=t;c<=i;c+=h){var d=Math.min(c+h-1,i);p(e,c,d,l,this.compareMinY);for(var u=c;u<=d;u+=l){var f=Math.min(u+l-1,d);r.children.push(this._build(e,u,f,n-1))}}return s(r,this.toBBox),r},n.prototype._chooseSubtree=function(e,t,i,n){for(;n.push(t),!t.leaf&&n.length-1!==i;){for(var r=1/0,s=1/0,o=void 0,a=0;a<t.children.length;a++){var l=t.children[a],h=c(l),d=(u=e,f=l,(Math.max(f.maxX,u.maxX)-Math.min(f.minX,u.minX))*(Math.max(f.maxY,u.maxY)-Math.min(f.minY,u.minY))-h);d<s?(s=d,r=h<r?h:r,o=l):d===s&&h<r&&(r=h,o=l)}t=o||t.children[0]}var u,f;return t},n.prototype._insert=function(e,t,i){var n=i?e:this.toBBox(e),r=[],s=this._chooseSubtree(n,this.data,t,r);for(s.children.push(e),a(s,n);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(n,r,t)},n.prototype._split=function(e,t){var i=e[t],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=g(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(e,t){this.data=g([e,t]),this.data.height=e.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(e,t,i){for(var n,r,s,a,l,h,d,u=1/0,f=1/0,g=t;g<=i-t;g++){var p=o(e,0,g,this.toBBox),m=o(e,g,i,this.toBBox),_=(r=p,s=m,void 0,void 0,void 0,void 0,a=Math.max(r.minX,s.minX),l=Math.max(r.minY,s.minY),h=Math.min(r.maxX,s.maxX),d=Math.min(r.maxY,s.maxY),Math.max(0,h-a)*Math.max(0,d-l)),y=c(p)+c(m);_<u?(u=_,n=g,f=y<f?y:f):_===u&&y<f&&(f=y,n=g)}return n||i-t},n.prototype._chooseSplitAxis=function(e,t,i){var n=e.leaf?this.compareMinX:l,r=e.leaf?this.compareMinY:h;this._allDistMargin(e,t,i,n)<this._allDistMargin(e,t,i,r)&&e.children.sort(n)},n.prototype._allDistMargin=function(e,t,i,n){e.children.sort(n);for(var r=this.toBBox,s=o(e,0,t,r),l=o(e,i-t,i,r),h=d(s)+d(l),c=t;c<i-t;c++){var u=e.children[c];a(s,e.leaf?r(u):u),h+=d(s)}for(var f=i-t-1;f>=t;f--){var g=e.children[f];a(l,e.leaf?r(g):g),h+=d(l)}return h},n.prototype._adjustParentBBoxes=function(e,t,i){for(var n=i;n>=0;n--)a(t[n],e)},n.prototype._condense=function(e){for(var t=e.length-1,i=void 0;t>=0;t--)0===e[t].children.length?t>0?(i=e[t-1].children).splice(i.indexOf(e[t]),1):this.clear():s(e[t],this.toBBox)},n}()}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.i18n,t=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},n="propertychange",r=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function s(e,t){return e>t?1:e<t?-1:0}function o(e,t,i){if(e[0]<=t)return 0;const n=e.length;if(t<=e[n-1])return n-1;if("function"==typeof i){for(let r=1;r<n;++r){const n=e[r];if(n===t)return r;if(n<t)return i(t,e[r-1],n)>0?r-1:r}return n-1}if(i>0){for(let i=1;i<n;++i)if(e[i]<t)return i-1;return n-1}if(i<0){for(let i=1;i<n;++i)if(e[i]<=t)return i;return n-1}for(let i=1;i<n;++i){if(e[i]==t)return i;if(e[i]<t)return e[i-1]-t<t-e[i]?i-1:i}return n-1}function a(e,t,i){for(;t<i;){const n=e[t];e[t]=e[i],e[i]=n,++t,--i}}function l(e,t){const i=Array.isArray(t)?t:[t],n=i.length;for(let t=0;t<n;t++)e[e.length]=i[t]}function h(e,t){const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function c(){return!0}function d(){return!1}function u(){}function f(e){for(const t in e)delete e[t]}function g(e){let t;for(t in e)return!1;return!t}const p=class extends r{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),n=i[e]||(i[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const i="string"==typeof e,n=i?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=i?new t(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in o||(o[n]=0,a[n]=0),++o[n];for(let e=0,t=r.length;e<t;++e)if(l="handleEvent"in r[e]?r[e].handleEvent(s):r[e].call(this,s),!1===l||s.propagationStopped){l=!1;break}if(0==--o[n]){let e=a[n];for(delete a[n];e--;)this.removeEventListener(n,u);delete o[n]}return l}disposeInternal(){this.listeners_&&f(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){const i=this.listeners_&&this.listeners_[e];if(i){const n=i.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[n]=u,++this.pendingRemovals_[e]):(i.splice(n,1),0===i.length&&delete this.listeners_[e]))}}},m="change",_="contextmenu",y="click",v="keydown",x="keypress",b="touchmove",w="wheel";function S(e,t,i,n,r){if(n&&n!==e&&(i=i.bind(n)),r){const n=i;i=function(){e.removeEventListener(t,i),n.apply(this,arguments)}}const s={target:e,type:t,listener:i};return e.addEventListener(t,i),s}function E(e,t,i,n){return S(e,t,i,n,!0)}function C(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),f(e))}class T extends p{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(m)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=S(this,e[r],t);return n}return S(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const n=e.length;i=new Array(n);for(let r=0;r<n;++r)i[r]=E(this,e[r],t)}else i=E(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)R(i);else if(Array.isArray(e))for(let i=0,n=e.length;i<n;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}function R(e){if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)C(e[t]);else C(e)}T.prototype.on,T.prototype.once,T.prototype.un;const I=T;function L(){throw new Error("Unimplemented abstract method.")}let k=0;function M(e){return e.ol_uid||(e.ol_uid=String(++k))}class P extends t{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}const A=class extends I{constructor(e){super(),this.on,this.once,this.un,M(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new P(i,e,t)),i=n,this.hasListener(i)&&this.dispatchEvent(new P(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const n=this.values_||(this.values_={});if(i)n[e]=t;else{const i=n[e];n[e]=t,i!==t&&this.notify(e,i)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],g(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},F={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class D extends Error{constructor(e){const t=F[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}const O=D,N="add",z="remove",B="length";class G extends t{constructor(e,t,i){super(e),this.element=t,this.index=i}}const U=class extends A{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let e=0,t=this.array_.length;e<t;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(B)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new G(N,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new G(z,t,e)),t}setAt(e,t){if(e>=this.getLength())return void this.insertAt(e,t);if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new G(z,i,e)),this.dispatchEvent(new G(N,t,e))}updateLength_(){this.set(B,this.array_.length)}assertUnique_(e,t){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===e&&i!==t)throw new O(58)}},W="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",V=W.includes("firefox"),X=W.includes("safari")&&!W.includes("chrom")&&(W.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(W)),j=W.includes("webkit")&&!W.includes("edge"),Y=W.includes("macintosh"),Z="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,K="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,H="undefined"!=typeof Image&&Image.prototype.decode,q=function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return e}();function J(e,t){if(!e)throw new O(t)}const $=new Array(6);function Q(e){return te(e,1,0,0,1,0,0)}function ee(e,t){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=t[0],h=t[1],c=t[2],d=t[3],u=t[4],f=t[5];return e[0]=i*l+r*h,e[1]=n*l+s*h,e[2]=i*c+r*d,e[3]=n*c+s*d,e[4]=i*u+r*f+o,e[5]=n*u+s*f+a,e}function te(e,t,i,n,r,s,o){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=s,e[5]=o,e}function ie(e,t){const i=t[0],n=t[1];return t[0]=e[0]*i+e[2]*n+e[4],t[1]=e[1]*i+e[3]*n+e[5],t}function ne(e,t,i){return ee(e,te($,t,0,0,i,0,0))}function re(e,t,i){return ee(e,te($,1,0,0,1,t,i))}function se(e,t,i,n,r,s,o,a){const l=Math.sin(s),h=Math.cos(s);return e[0]=n*h,e[1]=r*l,e[2]=-n*l,e[3]=r*h,e[4]=o*n*h-a*n*l+t,e[5]=o*r*l+a*r*h+i,e}function oe(e,t){const i=(n=t)[0]*n[3]-n[1]*n[2];var n;J(0!==i,32);const r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],h=t[5];return e[0]=a/i,e[1]=-s/i,e[2]=-o/i,e[3]=r/i,e[4]=(o*h-a*l)/i,e[5]=-(r*h-s*l)/i,e}let ae;function le(e){const t="matrix("+e.join(", ")+")";if(K)return t;const i=ae||(ae=document.createElement("div"));return i.style.transform=t,i.style.transform}const he={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ce(e){const t=[1/0,1/0,-1/0,-1/0];for(let i=0,n=e.length;i<n;++i)be(t,e[i]);return t}function de(e,t,i){return i?(i[0]=e[0]-t,i[1]=e[1]-t,i[2]=e[2]+t,i[3]=e[3]+t,i):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function ue(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function fe(e,t,i){let n,r;return n=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0,r=i<e[1]?e[1]-i:e[3]<i?i-e[3]:0,n*n+r*r}function ge(e,t){return me(e,t[0],t[1])}function pe(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function me(e,t,i){return e[0]<=t&&t<=e[2]&&e[1]<=i&&i<=e[3]}function _e(e,t){const i=e[0],n=e[1],r=e[2],s=e[3],o=t[0],a=t[1];let l=he.UNKNOWN;return o<i?l|=he.LEFT:o>r&&(l|=he.RIGHT),a<n?l|=he.BELOW:a>s&&(l|=he.ABOVE),l===he.UNKNOWN&&(l=he.INTERSECTING),l}function ye(e,t,i,n,r){return r?(r[0]=e,r[1]=t,r[2]=i,r[3]=n,r):[e,t,i,n]}function ve(e){return ye(1/0,1/0,-1/0,-1/0,e)}function xe(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function be(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function we(e,t,i,n,r){for(;i<n;i+=r)Se(e,t[i],t[i+1]);return e}function Se(e,t,i){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],i)}function Ee(e,t){let i;return i=t(Te(e)),i||(i=t(Re(e)),i||(i=t(Fe(e)),i||(i=t(Ae(e)),i||!1)))}function Ce(e){let t=0;return Ne(e)||(t=De(e)*Me(e)),t}function Te(e){return[e[0],e[1]]}function Re(e){return[e[2],e[1]]}function Ie(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function Le(e,t,i,n,r){const[s,o,a,l,h,c,d,u]=ke(e,t,i,n);return ye(Math.min(s,a,h,d),Math.min(o,l,c,u),Math.max(s,a,h,d),Math.max(o,l,c,u),r)}function ke(e,t,i,n){const r=t*n[0]/2,s=t*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=r*o,h=r*a,c=s*o,d=s*a,u=e[0],f=e[1];return[u-l+d,f-h-c,u-l-d,f-h+c,u+l-d,f+h+c,u+l+d,f+h-c,u-l+d,f-h-c]}function Me(e){return e[3]-e[1]}function Pe(e,t,i){const n=i||[1/0,1/0,-1/0,-1/0];return Oe(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):ve(n),n}function Ae(e){return[e[0],e[3]]}function Fe(e){return[e[2],e[3]]}function De(e){return e[2]-e[0]}function Oe(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Ne(e){return e[2]<e[0]||e[3]<e[1]}function ze(e,t){const i=t.getExtent(),n=Ie(e);if(t.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const t=De(i),r=Math.floor((n[0]-i[0])/t)*t;e[0]-=r,e[2]-=r}return e}function Be(e,t,i){return Math.min(Math.max(e,t),i)}function Ge(e,t,i,n,r,s){const o=r-i,a=s-n;if(0!==o||0!==a){const l=((e-i)*o+(t-n)*a)/(o*o+a*a);l>1?(i=r,n=s):l>0&&(i+=o*l,n+=a*l)}return Ue(e,t,i,n)}function Ue(e,t,i,n){const r=i-e,s=n-t;return r*r+s*s}function We(e){return e*Math.PI/180}function Ve(e,t){const i=e%t;return i*t<0?i+t:i}function Xe(e,t,i){return e+i*(t-e)}const je=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Ye=/^([a-z]*)$|^hsla?\(.*\)$/i;function Ze(e){return"string"==typeof e?e:Je(e)}const Ke=function(){const e={};let t=0;return function(i){let n;if(e.hasOwnProperty(i))n=e[i];else{if(t>=1024){let i=0;for(const n in e)0==(3&i++)&&(delete e[n],--t)}n=function(e){let t,i,n,r,s;if(Ye.exec(e)&&(e=function(e){const t=document.createElement("div");if(t.style.color=e,""!==t.style.color){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(e)),je.exec(e)){const o=e.length-1;let a;a=o<=4?1:2;const l=4===o||8===o;t=parseInt(e.substr(1+0*a,a),16),i=parseInt(e.substr(1+1*a,a),16),n=parseInt(e.substr(1+2*a,a),16),r=l?parseInt(e.substr(1+3*a,a),16):255,1==a&&(t=(t<<4)+t,i=(i<<4)+i,n=(n<<4)+n,l&&(r=(r<<4)+r)),s=[t,i,n,r/255]}else e.startsWith("rgba(")?(s=e.slice(5,-1).split(",").map(Number),qe(s)):e.startsWith("rgb(")?(s=e.slice(4,-1).split(",").map(Number),s.push(1),qe(s)):J(!1,14);return s}(i),e[i]=n,++t}return n}}();function He(e){return Array.isArray(e)?e:Ke(e)}function qe(e){return e[0]=Be(e[0]+.5|0,0,255),e[1]=Be(e[1]+.5|0,0,255),e[2]=Be(e[2]+.5|0,0,255),e[3]=Be(e[3],0,1),e}function Je(e){let t=e[0];t!=(0|t)&&(t=t+.5|0);let i=e[1];i!=(0|i)&&(i=i+.5|0);let n=e[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+i+","+n+","+(void 0===e[3]?1:Math.round(100*e[3])/100)+")"}function $e(e,t,i){return t+":"+e+":"+(i?Ze(i):"null")}const Qe=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const n=$e(e,t,i);return n in this.cache_?this.cache_[n]:null}set(e,t,i,n){const r=$e(e,t,i);this.cache_[r]=n,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}},et="opacity",tt="visible",it="extent",nt="zIndex",rt="maxResolution",st="minResolution",ot="maxZoom",at="minZoom",lt="source",ht="map",ct=class extends A{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);"object"==typeof e.properties&&(delete t.properties,Object.assign(t,e.properties)),t[et]=void 0!==e.opacity?e.opacity:1,J("number"==typeof t[et],64),t[tt]=void 0===e.visible||e.visible,t[nt]=e.zIndex,t[rt]=void 0!==e.maxResolution?e.maxResolution:1/0,t[st]=void 0!==e.minResolution?e.minResolution:0,t[at]=void 0!==e.minZoom?e.minZoom:-1/0,t[ot]=void 0!==e.maxZoom?e.maxZoom:1/0,this.className_=void 0!==t.className?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return t.opacity=Be(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==i||t.managed?i:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return L()}getLayerStatesArray(e){return L()}getExtent(){return this.get(it)}getMaxResolution(){return this.get(rt)}getMinResolution(){return this.get(st)}getMinZoom(){return this.get(at)}getMaxZoom(){return this.get(ot)}getOpacity(){return this.get(et)}getSourceState(){return L()}getVisible(){return this.get(tt)}getZIndex(){return this.get(nt)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(it,e)}setMaxResolution(e){this.set(rt,e)}setMinResolution(e){this.set(st,e)}setMaxZoom(e){this.set(ot,e)}setMinZoom(e){this.set(at,e)}setOpacity(e){J("number"==typeof e,64),this.set(et,e)}setVisible(e){this.set(tt,e)}setZIndex(e){this.set(nt,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},dt="prerender",ut="postrender",ft="precompose",gt="postcompose",pt="rendercomplete",mt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},_t={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},yt=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_t[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},vt=6378137,xt=Math.PI*vt,bt=[-xt,-xt,xt,xt],wt=[-180,-85,180,85],St=vt*Math.log(Math.tan(Math.PI/2));class Et extends yt{constructor(e){super({code:e,units:"m",extent:bt,global:!0,worldExtent:wt,getPointResolution:function(e,t){return e/Math.cosh(t[1]/vt)}})}}const Ct=[new Et("EPSG:3857"),new Et("EPSG:102100"),new Et("EPSG:102113"),new Et("EPSG:900913"),new Et("http://www.opengis.net/def/crs/EPSG/0/3857"),new Et("http://www.opengis.net/gml/srs/epsg.xml#3857")];const Tt=[-180,-90,180,90],Rt=6378137*Math.PI/180;class It extends yt{constructor(e,t){super({code:e,units:"degrees",extent:Tt,axisOrientation:t,global:!0,metersPerUnit:Rt,worldExtent:Tt})}}const Lt=[new It("CRS:84"),new It("EPSG:4326","neu"),new It("urn:ogc:def:crs:OGC:1.3:CRS84"),new It("urn:ogc:def:crs:OGC:2:84"),new It("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new It("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new It("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let kt={},Mt={};function Pt(e,t,i){const n=e.getCode(),r=t.getCode();n in Mt||(Mt[n]={}),Mt[n][r]=i}function At(e,t){let i=!0;for(let n=e.length-1;n>=0;--n)if(e[n]!=t[n]){i=!1;break}return i}function Ft(e,t){const i=Math.cos(t),n=Math.sin(t),r=e[0]*i-e[1]*n,s=e[1]*i+e[0]*n;return e[0]=r,e[1]=s,e}function Dt(e,t){if(t.canWrapX()){const i=De(t.getExtent()),n=function(e,t,i){const n=t.getExtent();let r=0;return t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])&&(i=i||De(n),r=Math.floor((e[0]-n[0])/i)),r}(e,t,i);n&&(e[0]-=n*i)}return e}const Ot=6371008.8;function Nt(e,t,i){i=i||Ot;const n=We(e[1]),r=We(t[1]),s=(r-n)/2,o=We(t[0]-e[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const zt={info:1,warn:2,error:3,none:4};let Bt=zt.info;function Gt(...e){Bt>zt.warn||console.warn(...e)}let Ut=!0;function Wt(e,t){if(void 0!==t)for(let i=0,n=e.length;i<n;++i)t[i]=e[i];else t=e.slice();return t}function Vt(e,t){if(void 0!==t&&e!==t){for(let i=0,n=e.length;i<n;++i)t[i]=e[i];e=t}return e}function Xt(e){!function(e,t){kt[e]=t}(e.getCode(),e),Pt(e,e,Wt)}function jt(e){return"string"==typeof e?kt[t=e]||kt[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:e||null;var t}function Yt(e,t,i,n){let r;const s=(e=jt(e)).getPointResolutionFunc();if(s){if(r=s(t,i),n&&n!==e.getUnits()){const t=e.getMetersPerUnit();t&&(r=r*t/_t[n])}}else{const s=e.getUnits();if("degrees"==s&&!n||"degrees"==n)r=t;else{const o=qt(e,jt("EPSG:4326"));if(o===Vt&&"degrees"!==s)r=t*e.getMetersPerUnit();else{let e=[i[0]-t/2,i[1],i[0]+t/2,i[1],i[0],i[1]-t/2,i[0],i[1]+t/2];e=o(e,e,2),r=(Nt(e.slice(0,2),e.slice(2,4))+Nt(e.slice(4,6),e.slice(6,8)))/2}const a=n?_t[n]:e.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function Zt(e){!function(e){e.forEach(Xt)}(e),e.forEach((function(t){e.forEach((function(e){t!==e&&Pt(t,e,Wt)}))}))}function Kt(e,t){return e?"string"==typeof e?jt(e):e:jt(t)}function Ht(e,t){if(e===t)return!0;const i=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||qt(e,t)===Wt)&&i}function qt(e,t){let i=function(e,t){let i;return e in Mt&&t in Mt[e]&&(i=Mt[e][t]),i}(e.getCode(),t.getCode());return i||(i=Vt),i}function Jt(e,t){return qt(jt(e),jt(t))}function $t(e,t,i){return Jt(t,i)(e,void 0,e.length)}let Qt=null;function ei(){return Qt}function ti(e,t){return e}function ii(e,t){return Ut&&!At(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Ut=!1,Gt("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function ni(e,t){return e}function ri(e,t){return e}function si(e,t){return e}var oi,ai,li;function hi(e,t,i){return function(n,r,s,o,a){if(!n)return;if(!r&&!t)return n;const l=t?0:s[0]*r,h=t?0:s[1]*r,c=a?a[0]:0,d=a?a[1]:0;let u=e[0]+l/2+c,f=e[2]-l/2+c,g=e[1]+h/2+d,p=e[3]-h/2+d;u>f&&(u=(f+u)/2,f=u),g>p&&(g=(p+g)/2,p=g);let m=Be(n[0],u,f),_=Be(n[1],g,p);if(o&&i&&r){const e=30*r;m+=-e*Math.log(1+Math.max(0,u-n[0])/e)+e*Math.log(1+Math.max(0,n[0]-f)/e),_+=-e*Math.log(1+Math.max(0,g-n[1])/e)+e*Math.log(1+Math.max(0,n[1]-p)/e)}return[m,_]}}function ci(e){return e}function di(e,t,i,n){const r=De(t)/i[0],s=Me(t)/i[1];return n?Math.min(e,Math.max(r,s)):Math.min(e,Math.min(r,s))}function ui(e,t,i){let n=Math.min(e,t);return n*=Math.log(1+50*Math.max(0,e/t-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/e-1))/50+1),Be(n,i/2,2*t)}function fi(e,t,i,n,r){return i=void 0===i||i,function(s,o,a,l){if(void 0!==s){const o=n?di(e,n,a,r):e;return i&&l?ui(s,o,t):Be(s,t,o)}}}function gi(e){if(void 0!==e)return 0}function pi(e){if(void 0!==e)return e}function mi(e){return Math.pow(e,3)}function _i(e){return 1-mi(1-e)}function yi(e){return 3*e*e-2*e*e*e}function vi(e){return e}function xi(e,t,i,n,r,s){s=s||[];let o=0;for(let a=t;a<i;a+=n){const t=e[a],i=e[a+1];s[o++]=r[0]*t+r[2]*i+r[4],s[o++]=r[1]*t+r[3]*i+r[5]}return s&&s.length!=o&&(s.length=o),s}function bi(e,t,i,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),h=s[0],c=s[1];let d=0;for(let r=t;r<i;r+=n){const t=e[r]-h,i=e[r+1]-c;o[d++]=h+t*a-i*l,o[d++]=c+t*l+i*a;for(let t=r+2;t<r+n;++t)o[d++]=e[t]}return o&&o.length!=d&&(o.length=d),o}Zt(Ct),Zt(Lt),oi=Ct,ai=function(e,t,i){const n=e.length;i=i>1?i:2,void 0===t&&(t=i>2?e.slice():new Array(n));for(let r=0;r<n;r+=i){t[r]=xt*e[r]/180;let i=vt*Math.log(Math.tan(Math.PI*(+e[r+1]+90)/360));i>St?i=St:i<-St&&(i=-St),t[r+1]=i}return t},li=function(e,t,i){const n=e.length;i=i>1?i:2,void 0===t&&(t=i>2?e.slice():new Array(n));for(let r=0;r<n;r+=i)t[r]=180*e[r]/xt,t[r+1]=360*Math.atan(Math.exp(e[r+1]/vt))/Math.PI-90;return t},Lt.forEach((function(e){oi.forEach((function(t){Pt(e,t,ai),Pt(t,e,li)}))}));const wi=[1,0,0,1,0,0],Si=class extends A{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(e){let t,i,n,r=!1;return function(){const s=Array.prototype.slice.call(arguments);return r&&this===n&&h(s,i)||(r=!0,n=this,i=s,t=e.apply(this,arguments)),t}}((function(e,t,i){if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)}))}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return L()}closestPointXY(e,t,i,n){return L()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return L()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ve(e),this.extentRevision_=this.getRevision()}return function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}(this.extent_,e)}rotate(e,t){L()}scale(e,t,i){L()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return L()}getType(){return L()}applyTransform(e){L()}intersectsExtent(e){return L()}translate(e,t){L()}transform(e,t){const i=jt(e),n="tile-pixels"==i.getUnits()?function(e,n,r){const s=i.getExtent(),o=i.getWorldExtent(),a=Me(o)/Me(s);return se(wi,o[0],o[3],a,-a,0,0,0),xi(e,0,e.length,r,wi,n),Jt(i,t)(e,n,r)}:Jt(i,t);return this.applyTransform(n),this}};function Ei(e){let t;return"XY"==e?t=2:"XYZ"==e||"XYM"==e?t=3:"XYZM"==e&&(t=4),t}const Ci=class extends Si{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return t=this.flatCoordinates,i=this.flatCoordinates.length,n=this.stride,we(ve(e),t,0,i,n);var t,i,n}getCoordinates(){return L()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Ei(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){L()}setLayout(e,t,i){let n;if(e)n=Ei(e);else{for(let e=0;e<i;++e){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}n=t.length,e=function(e){let t;return 2==e?t="XY":3==e?t="XYZ":4==e&&(t="XYZM"),t}(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();bi(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){void 0===t&&(t=e),i||(i=Ie(this.getExtent()));const n=this.getFlatCoordinates();if(n){const r=this.getStride();!function(e,t,i,n,r,s,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let t=0;t<i;t+=n){const i=e[t]-l,o=e[t+1]-h;a[c++]=l+r*i,a[c++]=h+s*o;for(let i=t+2;i<t+n;++i)a[c++]=e[i]}a&&a.length!=c&&(a.length=c)}(n,0,n.length,r,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(e,t,i,n,r,s,o){o=o||[];let a=0;for(let t=0;t<i;t+=n){o[a++]=e[t]+r,o[a++]=e[t+1]+s;for(let i=t+2;i<t+n;++i)o[a++]=e[i]}o&&o.length!=a&&(o.length=a)}(i,0,i.length,n,e,t,i),this.changed()}}};function Ti(e,t,i,n,r,s,o){const a=e[t],l=e[t+1],h=e[i]-a,c=e[i+1]-l;let d;if(0===h&&0===c)d=t;else{const u=((r-a)*h+(s-l)*c)/(h*h+c*c);if(u>1)d=i;else{if(u>0){for(let r=0;r<n;++r)o[r]=Xe(e[t+r],e[i+r],u);return void(o.length=n)}d=t}}for(let t=0;t<n;++t)o[t]=e[d+t];o.length=n}function Ri(e,t,i,n,r){let s=e[t],o=e[t+1];for(t+=n;t<i;t+=n){const i=e[t],n=e[t+1],a=Ue(s,o,i,n);a>r&&(r=a),s=i,o=n}return r}function Ii(e,t,i,n,r,s,o,a,l,h,c){if(t==i)return h;let d,u;if(0===r){if(u=Ue(o,a,e[t],e[t+1]),u<h){for(d=0;d<n;++d)l[d]=e[t+d];return l.length=n,u}return h}c=c||[NaN,NaN];let f=t+n;for(;f<i;)if(Ti(e,f-n,f,n,o,a,c),u=Ue(o,a,c[0],c[1]),u<h){for(h=u,d=0;d<n;++d)l[d]=c[d];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(u)-Math.sqrt(h))/r|0,1);if(s&&(Ti(e,i-n,t,n,o,a,c),u=Ue(o,a,c[0],c[1]),u<h)){for(h=u,d=0;d<n;++d)l[d]=c[d];l.length=n}return h}function Li(e,t,i,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];for(let i=0;i<n;++i)e[t++]=s[i]}return t}function ki(e,t){return t*Math.round(e/t)}function Mi(e,t,i,n,r,s,o){if(t==i)return o;let a,l,h=ki(e[t],r),c=ki(e[t+1],r);t+=n,s[o++]=h,s[o++]=c;do{if(a=ki(e[t],r),l=ki(e[t+1],r),(t+=n)==i)return s[o++]=a,s[o++]=l,o}while(a==h&&l==c);for(;t<i;){const i=ki(e[t],r),d=ki(e[t+1],r);if(t+=n,i==a&&d==l)continue;const u=a-h,f=l-c,g=i-h,p=d-c;u*p==f*g&&(u<0&&g<u||u==g||u>0&&g>u)&&(f<0&&p<f||f==p||f>0&&p>f)?(a=i,l=d):(s[o++]=a,s[o++]=l,h=a,c=l,a=i,l=d)}return s[o++]=a,s[o++]=l,o}function Pi(e,t,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=t;o<i;o+=n)r[s++]=e.slice(o,o+n);return r.length=s,r}function Ai(e,t,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];r[s++]=Pi(e,t,a,n,r[s]),t=a}return r.length=s,r}function Fi(e,t,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];r[s++]=1===a.length&&a[0]===t?[]:Ai(e,t,a,n,r[s]),t=a[a.length-1]}return r.length=s,r}function Di(e,t,i,n){let r=0,s=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const i=e[t],n=e[t+1];r+=o*i-s*n,s=i,o=n}return r/2}class Oi extends Ci{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?this.setCoordinates(e,t):this.setFlatCoordinates(t,e)}clone(){return new Oi(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<fe(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ri(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ii(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return Di(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=function(e,t,i,n,r,s,o){const a=(i-t)/n;if(a<3){for(;t<i;t+=n)s[o++]=e[t],s[o++]=e[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,i-n];let c=0;for(;h.length>0;){const i=h.pop(),s=h.pop();let o=0;const a=e[s],d=e[s+1],u=e[i],f=e[i+1];for(let t=s+n;t<i;t+=n){const i=Ge(e[t],e[t+1],a,d,u,f);i>o&&(c=t,o=i)}o>r&&(l[(c-t)/n]=1,s+n<c&&h.push(s,c),c+n<i&&h.push(c,i))}for(let i=0;i<a;++i)l[i]&&(s[o++]=e[t+i*n],s[o++]=e[t+i*n+1]);return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Oi(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Li(this.flatCoordinates,0,e,this.stride),this.changed()}}const Ni=Oi;class zi extends Ci{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new zi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const r=this.flatCoordinates,s=Ue(e,t,r[0],r[1]);if(s<n){const e=this.stride;for(let t=0;t<e;++t)i[t]=r[t];return i.length=e,s}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return function(e,t){const i=e[0],n=e[1];return ye(i,n,i,n,t)}(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return me(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(e,t,i,n){for(let n=0,r=i.length;n<r;++n)e[t++]=i[n];return t}(this.flatCoordinates,0,e,this.stride),this.changed()}}const Bi=zi;function Gi(e,t,i,n,r){return!Ee(r,(function(r){return!Ui(e,t,i,n,r[0],r[1])}))}function Ui(e,t,i,n,r,s){let o=0,a=e[i-n],l=e[i-n+1];for(;t<i;t+=n){const i=e[t],n=e[t+1];l<=s?n>s&&(i-a)*(s-l)-(r-a)*(n-l)>0&&o++:n<=s&&(i-a)*(s-l)-(r-a)*(n-l)<0&&o--,a=i,l=n}return 0!==o}function Wi(e,t,i,n,r,s){if(0===i.length)return!1;if(!Ui(e,t,i[0],n,r,s))return!1;for(let t=1,o=i.length;t<o;++t)if(Ui(e,i[t-1],i[t],n,r,s))return!1;return!0}function Vi(e,t,i,n,r){const s=we([1/0,1/0,-1/0,-1/0],e,t,i,n);return!!Oe(r,s)&&(!!pe(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||function(e,t,i,n,s){let o;for(t+=n;t<i;t+=n)if(a=e.slice(t-n,t),l=e.slice(t,t+n),o=function(e,t,i){let n=!1;const r=_e(e,t),s=_e(e,i);if(r===he.INTERSECTING||s===he.INTERSECTING)n=!0;else{const o=e[0],a=e[1],l=e[2],h=e[3],c=t[0],d=t[1],u=i[0],f=i[1],g=(f-d)/(u-c);let p,m;s&he.ABOVE&&!(r&he.ABOVE)&&(p=u-(f-h)/g,n=p>=o&&p<=l),n||!(s&he.RIGHT)||r&he.RIGHT||(m=f-(u-l)*g,n=m>=a&&m<=h),n||!(s&he.BELOW)||r&he.BELOW||(p=u-(f-a)/g,n=p>=o&&p<=l),n||!(s&he.LEFT)||r&he.LEFT||(m=f-(u-o)*g,n=m>=a&&m<=h)}return n}(r,a,l),o)return o;var a,l;return!1}(e,t,i,n))}function Xi(e,t,i,n){for(;t<i-n;){for(let r=0;r<n;++r){const s=e[t+r];e[t+r]=e[i-n+r],e[i-n+r]=s}t+=n,i-=n}}function ji(e,t,i,n){let r=0,s=e[i-n],o=e[i-n+1];for(;t<i;t+=n){const i=e[t],n=e[t+1];r+=(i-s)*(n+o),s=i,o=n}return 0===r?void 0:r>0}function Yi(e,t,i,n,r){r=void 0!==r&&r;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=ji(e,t,o,n);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&Xi(e,t,o,n),t=o}return t}class Zi extends Ci{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==t&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?l(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Zi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<fe(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s];r=Ri(e,t,o,n,r),t=o}return r}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(e,t,i,n,r,s,o,a,l,h,c){c=c||[NaN,NaN];for(let d=0,u=i.length;d<u;++d){const u=i[d];h=Ii(e,t,u,n,r,s,o,a,l,h,c),t=u}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return Wi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return function(e,t,i,n){let r=0;for(let s=0,o=i.length;s<o;++s){const o=i[s];r+=Di(e,t,o,n),t=o}return r}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),Yi(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Ai(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ie(this.getExtent());this.flatInteriorPoint_=function(e,t,i,n,r,o,a){let l,h,c,d,u,f,g;const p=r[o+1],m=[];for(let r=0,s=i.length;r<s;++r){const s=i[r];for(d=e[s-n],f=e[s-n+1],l=t;l<s;l+=n)u=e[l],g=e[l+1],(p<=f&&g<=p||f<=p&&p<=g)&&(c=(p-f)/(g-f)*(u-d)+d,m.push(c)),d=u,f=g}let _=NaN,y=-1/0;for(m.sort(s),d=m[0],l=1,h=m.length;l<h;++l){u=m[l];const r=Math.abs(u-d);r>y&&(c=(d+u)/2,Wi(e,t,i,n,c,p)&&(_=c,y=r)),d=u}return isNaN(_)&&(_=r[o]),a?(a.push(_,p,y),a):[_,p,y]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Bi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ni(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let r=0;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=new Ni(t.slice(r,o),e);n.push(a),r=o}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;!function(e,t,i,n,r){r=void 0!==r&&r;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=ji(e,t,o,n);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;t=o}return!0}(e,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Yi(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=function(e,t,i,n,r,s,o,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];o=Mi(e,t,h,n,r,s,o),a.push(o),t=h}return o}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Zi(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return function(e,t,i,n,r){if(!function(e,t,i,n,r){return!!(Vi(e,t,i,n,r)||Ui(e,t,i,n,r[0],r[1])||Ui(e,t,i,n,r[0],r[3])||Ui(e,t,i,n,r[2],r[1])||Ui(e,t,i,n,r[2],r[3]))}(e,t,i[0],n,r))return!1;if(1===i.length)return!0;for(let t=1,s=i.length;t<s;++t)if(Gi(e,i[t-1],i[t],n,r)&&!Vi(e,i[t-1],i[t],n,r))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(e,t,i,n,r){r=r||[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=Li(e,t,i[o],n);r[s++]=a,t=a}return r.length=s,r}(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const Ki=Zi;function Hi(e){const t=e[0],i=e[1],n=e[2],r=e[3],s=[t,i,t,r,n,r,n,i,t,i];return new Zi(s,"XY",[s.length])}function qi(e,t){setTimeout((function(){e(t)}),0)}function Ji(e){return!(e.sourceCenter&&e.targetCenter&&!At(e.sourceCenter,e.targetCenter))&&e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation}function $i(e,t,i,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=e[0]*s-e[1]*o,l=e[1]*s+e[0]*o;return a+=(t[0]/2-i[0])*n,l+=(i[1]-t[1]/2)*n,o=-o,[a*s-l*o,l*s+a*o]}const Qi=class extends A{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Kt(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&function(e){Ut=!(void 0===e||e)}(),e.center&&(e.center=ii(e.center,this.projection_)),e.extent&&(e.extent=ri(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const e in mt)delete t[e];this.setProperties(t,!0);const i=function(e){let t,i,n;let r=void 0!==e.minZoom?e.minZoom:0,s=void 0!==e.maxZoom?e.maxZoom:28;const a=void 0!==e.zoomFactor?e.zoomFactor:2,l=void 0!==e.multiWorld&&e.multiWorld,h=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,c=void 0!==e.showFullExtent&&e.showFullExtent,d=Kt(e.projection,"EPSG:3857"),u=d.getExtent();let f=e.constrainOnlyCenter,g=e.extent;if(l||g||!d.isGlobal()||(f=!1,g=u),void 0!==e.resolutions){const a=e.resolutions;i=a[r],n=void 0!==a[s]?a[s]:a[a.length-1],t=e.constrainResolution?function(e,t,i,n){return t=void 0===t||t,function(r,s,a,l){if(void 0!==r){const h=e[0],c=e[e.length-1],d=i?di(h,i,a,n):h;if(l)return t?ui(r,d,c):Be(r,c,d);const u=Math.min(d,r),f=Math.floor(o(e,u,s));return e[f]>d&&f<e.length-1?e[f+1]:e[f]}}}(a,h,!f&&g,c):fi(i,n,h,!f&&g,c)}else{const o=(u?Math.max(De(u),Me(u)):360*_t.degrees/d.getMetersPerUnit())/256/Math.pow(2,0),l=o/Math.pow(2,28);i=e.maxResolution,void 0!==i?r=0:i=o/Math.pow(a,r),n=e.minResolution,void 0===n&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?i/Math.pow(a,s):o/Math.pow(a,s):l),s=r+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,s-r),t=e.constrainResolution?function(e,t,i,n,r,s){return n=void 0===n||n,i=void 0!==i?i:0,function(o,a,l,h){if(void 0!==o){const c=r?di(t,r,l,s):t;if(h)return n?ui(o,c,i):Be(o,i,c);const d=1e-9,u=Math.ceil(Math.log(t/c)/Math.log(e)-d),f=-a*(.5-d)+.5,g=Math.min(c,o),p=Math.floor(Math.log(t/g)/Math.log(e)+f),m=Math.max(u,p);return Be(t/Math.pow(e,m),i,c)}}}(a,i,n,h,!f&&g,c):fi(i,n,h,!f&&g,c)}return{constraint:t,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:a}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=function(e){if(void 0!==e.extent){const t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return hi(e.extent,e.constrainOnlyCenter,t)}const t=Kt(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,hi(e,!1,!1)}return ci}(e),r=i.constraint,s=function(e){if(void 0===e.enableRotation||e.enableRotation){const i=e.constrainRotation;return void 0===i||!0===i?(t=t||We(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}):!1===i?pi:"number"==typeof i?function(e){const t=2*Math.PI/e;return function(e,i){return i?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(i):pi}var t;return gi}(e);this.constraints_={center:n,resolution:r,rotation:s},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),s=r/2*(n[3]-t[3]+t[1]-n[1]),o=r/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+s,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let e=0;e<t.length;++e){let i=arguments[e];i.center&&(i=Object.assign({},i),i.center=ii(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ii(i.anchor,this.getProjection())),t[e]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(t=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const e=arguments[n];e.center&&this.setCenterInternal(e.center),void 0!==e.zoom?this.setZoom(e.zoom):e.resolution&&this.setResolution(e.resolution),void 0!==e.rotation&&this.setRotation(e.rotation)}if(n===i)return void(t&&qi(t,!0));let r=Date.now(),s=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const e=arguments[n],i={start:r,complete:!1,anchor:e.anchor,duration:void 0!==e.duration?e.duration:1e3,easing:e.easing||yi,callback:t};if(e.center&&(i.sourceCenter=s,i.targetCenter=e.center.slice(),s=i.targetCenter),void 0!==e.zoom?(i.sourceResolution=o,i.targetResolution=this.getResolutionForZoom(e.zoom),o=i.targetResolution):e.resolution&&(i.sourceResolution=o,i.targetResolution=e.resolution,o=i.targetResolution),void 0!==e.rotation){i.sourceRotation=a;const t=Ve(e.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+t,a=i.targetRotation}Ji(i)?i.complete=!0:r+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let e;this.setHint(0,-this.hints_[0]);for(let t=0,i=this.animations_.length;t<i;++t){const i=this.animations_[t];if(i[0].callback&&qi(i[0].callback,!1),!e)for(let t=0,n=i.length;t<n;++t){const n=i[t];if(!n.complete){e=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let i=0,s=n.length;i<s;++i){const s=n[i];if(s.complete)continue;const o=e-s.start;let a=s.duration>0?o/s.duration:1;a>=1?(s.complete=!0,a=1):r=!1;const l=s.easing(a);if(s.sourceCenter){const e=s.sourceCenter[0],t=s.sourceCenter[1],i=s.targetCenter[0],n=s.targetCenter[1];this.nextCenter_=s.targetCenter;const r=e+l*(i-e),o=t+l*(n-t);this.targetCenter_=[r,o]}if(s.sourceResolution&&s.targetResolution){const e=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){const t=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(e,0,t,!0);this.targetCenter_=this.calculateCenterZoom(i,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=e,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const e=1===l?Ve(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){const t=this.constraints_.rotation(e,!0);this.targetCenter_=this.calculateCenterRotate(t,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=e}if(this.applyTargetState_(!0),t=!0,!s.complete)break}if(r){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const e=n[0].callback;e&&qi(e,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();var r,s;return void 0!==n&&(i=[n[0]-t[0],n[1]-t[1]],Ft(i,e-this.getRotation()),s=t,(r=i)[0]+=+s[0],r[1]+=+s[1]),i}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),r=this.getResolution();return void 0!==n&&void 0!==r&&(i=[t[0]-e*(t[0]-n[0])/r,t[1]-e*(t[1]-n[1])/r]),i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e?ti(e,this.getProjection()):e}getCenterInternal(){return this.get(mt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){return ni(this.calculateExtentInternal(e),this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();J(t,1);const i=this.getResolution();J(void 0!==i,2);const n=this.getRotation();return J(void 0!==n,3),Le(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(mt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(ri(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=De(e)/t[0],n=Me(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return function(i){return t/Math.pow(e,i*n)}}getRotation(){return this.get(mt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/t;return function(e){return Math.log(i/e)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const e=this.getViewportSizeMinusPadding_();n=$i(n,this.getViewportSize_(),[e[0]/2+r[3],e[1]/2+r[0]],t,i)}return{center:n.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t,i,n=this.minZoom_||0;if(this.resolutions_){const r=o(this.resolutions_,e,1);n=r,t=this.resolutions_[r],i=r==this.resolutions_.length-1?2:t/this.resolutions_[r+1]}else t=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(t/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Be(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Be(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(J(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))J(!Ne(e),25),i=Hi(ri(e,this.getProjection()));else if("Circle"===e.getType()){const t=ri(e.getExtent(),this.getProjection());i=Hi(t),i.rotate(this.getRotation(),Ie(t))}else{const t=ei();i=t?e.clone().transform(t,this.getProjection()):e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),r=e.getFlatCoordinates(),s=e.getStride();let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let e=0,t=r.length;e<t;e+=s){const t=r[e]*i-r[e+1]*n,s=r[e]*n+r[e+1]*i;o=Math.min(o,t),a=Math.min(a,s),l=Math.max(l,t),h=Math.max(h,s)}return[o,a,l,h]}fitInternal(e,t){let i=(t=t||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==t.padding?t.padding:[0,0,0,0],r=void 0!==t.nearest&&t.nearest;let s;s=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;const o=this.rotatedExtentForGeometry(e);let a=this.getResolutionForExtentInternal(o,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),d=Ie(o);d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a;const f=d[0]*c-d[1]*h,g=d[1]*c+d[0]*h,p=this.getConstrainedCenter([f,g],a),m=t.callback?t.callback:u;void 0!==t.duration?this.animateInternal({resolution:a,center:p,duration:t.duration,easing:t.easing},m):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),qi(m,!0))}centerOn(e,t,i){this.centerOnInternal(ii(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal($i(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let r;const s=this.padding_;if(s&&e){const o=this.getViewportSizeMinusPadding_(-i),a=$i(e,n,[o[0]/2+s[3],o[1]/2+s[0]],t,i);r=[e[0]-a[0],e[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(e){const t=ti(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&ii(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=ii(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e?ii(e,this.getProjection()):e)}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,r,i),o=this.constraints_.center(this.targetCenter_,s,r,i,this.calculateCenterShift(this.targetCenter_,s,n,r));this.get(mt.ROTATION)!==n&&this.set(mt.ROTATION,n),this.get(mt.RESOLUTION)!==s&&(this.set(mt.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),o&&this.get(mt.CENTER)&&At(this.get(mt.CENTER),o)||this.set(mt.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=void 0!==e?e:200;const n=t||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,n,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&At(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:e,easing:_i,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(e,t,i){i=i&&ii(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};function en(e,t){if(!e.visible)return!1;const i=t.resolution;if(i<e.minResolution||i>=e.maxResolution)return!1;const n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}const tn=class extends ct{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(lt,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return(e=e||[]).push(this),e}getLayerStatesArray(e){return(e=e||[]).push(this.getLayerState()),e}getSource(){return this.get(lt)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(C(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=S(e,m,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}isVisible(e){let t;const i=this.getMapInternal();let n;!e&&i&&(e=i.getView()),t=e instanceof Qi?{viewState:e.getState(),extent:e.calculateExtent()}:e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=t.layerStatesArray?t.layerStatesArray.find((e=>e.layer===this)):this.getLayerState();const r=this.getExtent();return en(n,t.viewState)&&(!r||Oe(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];let n=t(e instanceof Qi?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(ht,e)}getMapInternal(){return this.get(ht)}setMap(e){this.mapPrecomposeKey_&&(C(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(C(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=S(e,ft,(function(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);J(!t.some((function(e){return e.layer===i.layer})),67),t.push(i)}),this),this.mapRenderKey_=S(this,m,e.render,e),this.changed())}setSource(e){this.set(lt,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function nn(e,t){Qe.expire()}const rn=class extends r{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){L()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;se(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),oe(n,i)}forEachFeatureAtCoordinate(e,t,i,n,r,s,o,a){let l;const h=t.viewState;function c(e,t,i,n){return r.call(s,t,e?i:null,n)}const d=h.projection,u=Dt(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&n){const e=De(d.getExtent());f.push([-e,0],[e,0])}const g=t.layerStatesArray,p=g.length,m=[],_=[];for(let n=0;n<f.length;n++)for(let r=p-1;r>=0;--r){const s=g[r],d=s.layer;if(d.hasRenderer()&&en(s,h)&&o.call(a,d)){const r=d.getRenderer(),o=d.getSource();if(r&&o){const a=o.getWrapX()?u:e,h=c.bind(null,s.managed);_[0]=a[0]+f[n][0],_[1]=a[1]+f[n][1],l=r.forEachFeatureAtCoordinate(_,t,i,h,m)}if(l)return l}}if(0===m.length)return;const y=1/m.length;return m.forEach(((e,t)=>e.distanceSq+=t*y)),m.sort(((e,t)=>e.distanceSq-t.distanceSq)),m.some((e=>l=e.callback(e.feature,e.layer,e.geometry))),l}hasFeatureAtCoordinate(e,t,i,n,r,s){return void 0!==this.forEachFeatureAtCoordinate(e,t,i,n,c,this,r,s)}getMap(){return this.map_}renderFrame(e){L()}scheduleExpireIconCache(e){Qe.canExpireCache()&&e.postRenderFunctions.push(nn)}},sn=class extends t{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}},on="ol-hidden",an="ol-unselectable",ln="ol-control",hn="ol-collapsed",cn=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),dn=["style","variant","weight","size","lineHeight","family"],un=function(e){const t=e.match(cn);if(!t)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let e=0,n=dn.length;e<n;++e){const n=t[e+1];void 0!==n&&(i[dn[e]]=n)}return i.families=i.family.split(/,\s?/),i};function fn(e,t,i,n){let r;return r=i&&i.length?i.shift():K?new OffscreenCanvas(e||300,t||300):document.createElement("canvas"),e&&(r.width=e),t&&(r.height=t),r.getContext("2d",n)}function gn(e){const t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function pn(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),t}function mn(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}function yn(e,t){const i=t.parentNode;i&&i.replaceChild(e,t)}function vn(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function xn(e){for(;e.lastChild;)e.removeChild(e.lastChild)}const bn="10px sans-serif",wn="#000",Sn="round",En=[],Cn="round",Tn="#000",Rn="center",In="middle",Ln=[0,0,0,0],kn=new A;let Mn,Pn=null;const An={},Fn=function(){const e="32px ",t=["monospace","serif"],i=t.length,n="wmytzilWMYTZIL@#/&?$%10";let r,s;function o(r,o,a){let l=!0;for(let h=0;h<i;++h){const i=t[h];if(s=Nn(r+" "+o+" "+e+i,n),a!=i){const t=Nn(r+" "+o+" "+e+a+","+i,n);l=l&&t!=s}}return!!l}function a(){let e=!0;const t=kn.getKeys();for(let i=0,n=t.length;i<n;++i){const n=t[i];kn.get(n)<100&&(o.apply(this,n.split("\n"))?(f(An),Pn=null,Mn=void 0,kn.set(n,100)):(kn.set(n,kn.get(n)+1,!0),e=!1))}e&&(clearInterval(r),r=void 0)}return function(e){const t=un(e);if(!t)return;const i=t.families;for(let e=0,n=i.length;e<n;++e){const n=i[e],s=t.style+"\n"+t.weight+"\n"+n;void 0===kn.get(s)&&(kn.set(s,100,!0),o(t.style,t.weight,n)||(kn.set(s,0,!0),void 0===r&&(r=setInterval(a,32))))}}}(),Dn=function(){let e;return function(t){let i=An[t];if(null==i){if(K){const e=un(t),n=On(t,"g");i=(isNaN(Number(e.lineHeight))?1.2:Number(e.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),i=e.offsetHeight,document.body.removeChild(e);An[t]=i}return i}}();function On(e,t){return Pn||(Pn=fn(1,1)),e!=Mn&&(Pn.font=e,Mn=Pn.font),Pn.measureText(t)}function Nn(e,t){return On(e,t).width}function zn(e,t,i){if(t in i)return i[t];const n=t.split("\n").reduce(((t,i)=>Math.max(t,Nn(e,i))),0);return i[t]=n,n}const Bn=class extends rn{constructor(e){super(e),this.fontChangeListenerKey_=S(kn,n,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=an+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new sn(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){C(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(e),this.dispatchRenderEvent(ft,e);const t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),i=e.viewState;this.children_.length=0;const n=[];let r=null;for(let s=0,o=t.length;s<o;++s){const o=t[s];e.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!en(o,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(e,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in a&&n.push(a))}for(let t=n.length-1;t>=0;--t)n[t].renderDeclutter(e);!function(e,t){const i=e.childNodes;for(let n=0;;++n){const r=i[n],s=t[n];if(!r&&!s)break;r!==s&&(r?s?e.insertBefore(s,r):(e.removeChild(r),--n):e.appendChild(s))}}(this.element_,this.children_),this.dispatchRenderEvent(gt,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}};class Gn extends t{constructor(e,t){super(e),this.layer=t}}const Un="layers";class Wn extends ct{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Un,this.handleLayersChanged_),i?Array.isArray(i)?i=new U(i.slice(),{unique:!0}):J("function"==typeof i.getArray,43):i=new U(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(C),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(S(e,N,this.handleLayersAdd_,this),S(e,z,this.handleLayersRemove_,this));for(const e in this.listenerKeys_)this.listenerKeys_[e].forEach(C);f(this.listenerKeys_);const t=e.getArray();for(let e=0,i=t.length;e<i;e++){const i=t[e];this.registerLayerListeners_(i),this.dispatchEvent(new Gn("addlayer",i))}this.changed()}registerLayerListeners_(e){const t=[S(e,n,this.handleLayerChange_,this),S(e,m,this.handleLayerChange_,this)];e instanceof Wn&&t.push(S(e,"addlayer",this.handleLayerGroupAdd_,this),S(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[M(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Gn("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Gn("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Gn("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=M(t);this.listenerKeys_[i].forEach(C),delete this.listenerKeys_[i],this.dispatchEvent(new Gn("removelayer",t)),this.changed()}getLayers(){return this.get(Un)}setLayers(e){const t=this.getLayers();if(t){const e=t.getArray();for(let t=0,i=e.length;t<i;++t)this.dispatchEvent(new Gn("removelayer",e[t]))}this.set(Un,e)}getLayersArray(e){return e=void 0!==e?e:[],this.getLayers().forEach((function(t){t.getLayersArray(e)})),e}getLayerStatesArray(e){const t=void 0!==e?e:[],i=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));const n=this.getLayerState();let r=n.zIndex;e||void 0!==n.zIndex||(r=0);for(let e=i,s=t.length;e<s;e++){const i=t[e];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),i.minZoom=Math.max(i.minZoom,n.minZoom),i.maxZoom=Math.min(i.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==i.extent?i.extent=Pe(i.extent,n.extent):i.extent=n.extent),void 0===i.zIndex&&(i.zIndex=r)}return t}getSourceState(){return"ready"}}const Vn=Wn,Xn=class extends t{constructor(e,t,i){super(e),this.map=t,this.frameState=void 0!==i?i:null}},jn=class extends Xn{constructor(e,t,i,n,r,s){super(e,t,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Yn={SINGLECLICK:"singleclick",CLICK:y,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Zn="pointerdown",Kn=class extends p{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===t?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=S(i,Zn,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=S(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(b,this.boundHandleTouchMove_,!!q&&{passive:!1})}emulateClick_(e){let t=new jn(Yn.CLICK,this.map_,e);this.dispatchEvent(t),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new jn(Yn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const t=new jn(Yn.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}),250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Yn.POINTERUP||t.type==Yn.POINTERCANCEL){delete this.trackedTouches_[i];for(const e in this.trackedTouches_)if(this.trackedTouches_[e].target!==t.target){delete this.trackedTouches_[e];break}}else t.type!=Yn.POINTERDOWN&&t.type!=Yn.POINTERMOVE||(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new jn(Yn.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(C),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return 0===e.button}handlePointerDown_(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);const t=new jn(Yn.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){const e=this.map_.getOwnerDocument();this.dragListenerKeys_.push(S(e,Yn.POINTERMOVE,this.handlePointerMove_,this),S(e,Yn.POINTERUP,this.handlePointerUp_,this),S(this.element_,Yn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==e&&this.dragListenerKeys_.push(S(this.element_.getRootNode(),Yn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new jn(Yn.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new jn(Yn.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(C(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(b,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(C(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(C),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Hn="postrender",qn="loadstart",Jn="loadend",$n="layergroup",Qn="size",er="target",tr="view",ir=1/0,nr=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,f(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){J(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=ir&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(e){return 2*e+1}getRightChildIndex_(e){return 2*e+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return 0===this.elements_.length}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,r=t[e],s=i[e],o=e;for(;e<n>>1;){const r=this.getLeftChildIndex_(e),s=this.getRightChildIndex_(e),o=s<n&&i[s]<i[r]?s:r;t[e]=t[o],i[e]=i[o],e=o}t[e]=r,i[e]=s,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,r=i[t],s=n[t];for(;t>e;){const e=this.getParentIndex_(t);if(!(n[e]>s))break;i[t]=i[e],n[t]=n[e],t=e}i[t]=r,n[t]=s}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const r=t.length;let s,o,a;for(o=0;o<r;++o)s=t[o],a=e(s),a==ir?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=a,t[n++]=s);t.length=n,i.length=n,this.heapify_()}},rr=class extends nr{constructor(e,t){super((function(t){return e.apply(null,t)}),(function(e){return e[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(m,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(2===i||3===i||4===i){3!==i&&t.removeEventListener(m,this.boundHandleTileChange_);const e=t.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i,n,r,s=0;for(;this.tilesLoading_<e&&s<t&&this.getCount()>0;)n=this.dequeue()[0],r=n.getKey(),i=n.getState(),0!==i||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,n.load())}},sr=class extends A{constructor(e){super();const t=e.element;!t||e.target||t.style.pointerEvents||(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){vn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&vn(this.element);for(let e=0,t=this.listenerKeys.length;e<t;++e)C(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==u&&this.listenerKeys.push(S(e,Hn,this.render,this)),e.render())}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},or=class extends sr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==e.collapsible,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const t=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",n=void 0!==e.expandClassName?e.expandClassName:t+"-expand",r=void 0!==e.collapseLabel?e.collapseLabel:"",s=void 0!==e.collapseClassName?e.collapseClassName:t+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=s):this.collapseLabel_=r;const o=void 0!==e.label?e.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=n):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(y,this.handleClick_.bind(this),!1);const l=t+" "+an+" "+ln+(this.collapsed_&&this.collapsible_?" "+hn:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap((t=>t.getAttributions(e))))),i=!this.getMap().getAllLayers().some((e=>e.getSource()&&!1===e.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!h(t,this.renderedAttributions_)){xn(this.ulElement_);for(let e=0,i=t.length;e<i;++e){const i=document.createElement("li");i.innerHTML=t[e],this.ulElement_.appendChild(i)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hn),this.collapsed_?yn(this.collapseLabel_,this.label_):yn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},ar=class extends sr{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"",n=void 0!==e.compassClassName?e.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const r=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),s.addEventListener(y,this.handleClick_.bind(this),!1);const o=t+" "+an+" "+ln,a=this.element;a.className=o,a.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(on)}handleClick_(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:_i}):e.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const e="rotate("+i+"rad)";if(this.autoHide_){const e=this.element.classList.contains(on);e||0!==i?e&&0!==i&&this.element.classList.remove(on):this.element.classList.add(on)}this.label_.style.transform=e}this.rotation_=i}},lr=class extends sr{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,n=void 0!==e.zoomInClassName?e.zoomInClassName:t+"-in",r=void 0!==e.zoomOutClassName?e.zoomOutClassName:t+"-out",s=void 0!==e.zoomInLabel?e.zoomInLabel:"+",o=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",a=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",l=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(y,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(y,this.handleClick_.bind(this,-i),!1);const d=t+" "+an+" "+ln,u=this.element;u.className=d,u.appendChild(h),u.appendChild(c),this.duration_=void 0!==e.duration?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const t=this.getMap().getView();if(!t)return;const i=t.getZoom();if(void 0!==i){const n=t.getConstrainedZoom(i+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:_i})):t.setZoom(n)}}},hr="active";function cr(e,t,i,n){const r=e.getZoom();if(void 0===r)return;const s=e.getConstrainedZoom(r+t),o=e.getResolutionForZoom(s);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,anchor:i,duration:void 0!==n?n:250,easing:_i})}const dr=class extends A{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(hr)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(hr,e)}setMap(e){this.map_=e}},ur=class extends dr{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:250}handleEvent(e){let t=!1;if(e.type==Yn.DBLCLICK){const i=e.originalEvent,n=e.map,r=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_;cr(n.getView(),s,r,this.duration_),i.preventDefault(),t=!0}return!t}};function fr(e){const t=e.length;let i=0,n=0;for(let r=0;r<t;r++)i+=e[r].clientX,n+=e[r].clientY;return{clientX:i/t,clientY:n/t}}const gr=class extends dr{constructor(e){super(e=e||{}),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Yn.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Yn.POINTERUP){const t=this.handleUpEvent(e);this.handlingDownUpSequence=t&&this.targetPointers.length>0}}else if(e.type==Yn.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Yn.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function pr(e){const t=arguments;return function(e){let i=!0;for(let n=0,r=t.length;n<r&&(i=i&&t[n](e),i);++n);return i}}const mr=function(e){const t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},_r=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||function(e){const t=e.map.getTargetElement(),i=e.map.getOwnerDocument().activeElement;return t.contains(i)}(e)},yr=c,vr=function(e){const t=e.originalEvent;return 0==t.button&&!(j&&Y&&t.ctrlKey)},xr=d,br=function(e){return e.type==Yn.SINGLECLICK},wr=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Sr=function(e){const t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Er=function(e){const t=e.originalEvent,i=t.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!t.target.isContentEditable},Cr=function(e){const t=e.originalEvent;return J(void 0!==t,56),"mouse"==t.pointerType},Tr=function(e){const t=e.originalEvent;return J(void 0!==t,56),t.isPrimary&&0===t.button},Rr=class extends gr{constructor(e){super({stopDown:d}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:pr(wr,Tr);this.condition_=e.onFocusOnly?pr(_r,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(fr(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const t=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=e.map.getView();!function(e,t){e[0]*=t,e[1]*=t}(t,i.getResolution()),Ft(t,i.getRotation()),i.adjustCenterInternal(t)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const e=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=i.getCenterInternal(),s=t.getPixelFromCoordinateInternal(r),o=t.getCoordinateFromPixelInternal([s[0]-e*Math.cos(n),s[1]-e*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(o),duration:500,easing:_i})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Ir=class extends gr{constructor(e){e=e||{},super({stopDown:d}),this.condition_=e.condition?e.condition:mr,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){if(!Cr(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===gi)return;const n=t.getSize(),r=e.pixel,s=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){const e=s-this.lastAngle_;i.adjustRotationInternal(-e)}this.lastAngle_=s}handleUpEvent(e){return!Cr(e)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){return!!Cr(e)&&(!(!vr(e)||!this.condition_(e))&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}},Lr=class extends r{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ki([i])}getGeometry(){return this.geometry_}};class kr extends t{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}const Mr=class extends gr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Lr(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:vr,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],r=i[1]-t[1];return n*n+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new kr("boxdrag",e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new kr(t?"boxend":"boxcancel",e.coordinate,e)),!1}handleDownEvent(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kr("boxstart",e.coordinate,e)),!0)}onBoxEnd(e){}},Pr=class extends Mr{constructor(e){super({condition:(e=e||{}).condition?e.condition:Sr,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out}onBoxEnd(e){const t=this.getMap().getView();let i=this.getGeometry();if(this.out_){const e=t.rotatedExtentForGeometry(i),n=t.getResolutionForExtentInternal(e),r=t.getResolution()/n;i=i.clone(),i.scale(r*r)}t.fitInternal(i,{duration:this.duration_,easing:_i})}},Ar="ArrowLeft",Fr="ArrowRight",Dr="ArrowDown",Or=class extends dr{constructor(e){super(),e=e||{},this.defaultCondition_=function(e){return wr(e)&&Er(e)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==v){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==Dr||n==Ar||n==Fr||"ArrowUp"==n)){const r=e.map.getView(),s=r.getResolution()*this.pixelDelta_;let o=0,a=0;n==Dr?a=-s:n==Ar?o=-s:n==Fr?o=s:a=s;const l=[o,a];Ft(l,r.getRotation()),function(e,t,i){const n=e.getCenterInternal();if(n){const r=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:void 0!==i?i:250,easing:vi,center:e.getConstrainedCenter(r)})}}(r,l,this.duration_),i.preventDefault(),t=!0}}return!t}},Nr=class extends dr{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Er,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100}handleEvent(e){let t=!1;if(e.type==v||e.type==x){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&("+"===n||"-"===n)){const r=e.map,s="+"===n?this.delta_:-this.delta_;cr(r.getView(),s,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},zr=class extends dr{constructor(e){super(e=e||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;const t=e.condition?e.condition:yr;this.condition_=e.onFocusOnly?pr(_r,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e))return!0;if(e.type!==w)return!0;const t=e.map,i=e.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==w&&(n=i.deltaY,V&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Z),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const s=t.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=n;const o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,t),o),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Be(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),cr(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},Br=class extends gr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=d),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const e=r-this.lastAngle_;this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=e}this.lastAngle_=r;const s=e.map,o=s.getView();o.getConstraints().rotation!==gi&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(fr(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return!(this.targetPointers.length<2)||(e.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},Gr=class extends gr{constructor(e){const t=e=e||{};t.stopDown||(t.stopDown=d),super(t),this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,s=i.clientY-n.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(t=this.lastDistance_/o),this.lastDistance_=o;const a=e.map,l=a.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(fr(this.targetPointers))),a.render(),l.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const t=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}};function Ur(e){return e[0]>0&&e[1]>0}function Wr(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}function Vr(e){e instanceof tn?e.setMapInternal(null):e instanceof Vn&&e.getLayers().forEach(Vr)}function Xr(e,t){if(e instanceof tn)e.setMapInternal(t);else if(e instanceof Vn){const i=e.getLayers().getArray();for(let e=0,n=i.length;e<n;++e)Xr(i[e],t)}}const jr=class extends A{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=function(e){let t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);const i={},n=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new Vn({layers:e.layers});let r,s,o;return i[$n]=n,i[er]=e.target,i[tr]=e.view instanceof Qi?e.view:new Qi,void 0!==e.controls&&(Array.isArray(e.controls)?r=new U(e.controls.slice()):(J("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?s=new U(e.interactions.slice()):(J("function"==typeof e.interactions.getArray,48),s=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?o=new U(e.overlays.slice()):(J("function"==typeof e.overlays.getArray,49),o=e.overlays):o=new U,{controls:r,interactions:s,keyboardEventTarget:t,overlays:o,values:i}}(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Z,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=t.controls||function(e){e=e||{};const t=new U;return(void 0===e.zoom||e.zoom)&&t.push(new lr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&t.push(new ar(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&t.push(new or(e.attributionOptions)),t}(),this.interactions=t.interactions||function(e){e=e||{};const t=new U,i=new class{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const r=this.points_[t]-this.points_[i],s=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&t.push(new Ir),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&t.push(new ur({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&t.push(new Rr({onFocusOnly:e.onFocusOnly,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&t.push(new Br),(void 0===e.pinchZoom||e.pinchZoom)&&t.push(new Gr({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(t.push(new Or),t.push(new Nr({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&t.push(new zr({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&t.push(new Pr({duration:e.zoomDuration})),t}({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new rr(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener($n,this.handleLayerGroupChanged_),this.addChangeListener(tr,this.handleViewChanged_),this.addChangeListener(Qn,this.handleSizeChanged_),this.addChangeListener(er,this.handleTargetChanged_),this.setProperties(t.values);const i=this;!e.view||e.view instanceof Qi||e.view.then((function(e){i.setView(new Qi(e))})),this.controls.addEventListener(N,(e=>{e.element.setMap(this)})),this.controls.addEventListener(z,(e=>{e.element.setMap(null)})),this.interactions.addEventListener(N,(e=>{e.element.setMap(this)})),this.interactions.addEventListener(z,(e=>{e.element.setMap(null)})),this.overlays_.addEventListener(N,(e=>{this.addOverlayInternal_(e.element)})),this.overlays_.addEventListener(z,(e=>{const t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)})),this.controls.forEach((e=>{e.setMap(this)})),this.interactions.forEach((e=>{e.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Xr(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,s=void 0!==i.layerFilter?i.layerFilter:c,o=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,o,t,null,s,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,(function(e){i.push(e)}),t),i}getAllLayers(){const e=[];return function t(i){i.forEach((function(i){i instanceof Vn?t(i.getLayers()):e.push(i)}))}(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:c,r=void 0!==t.hitTolerance?t.hitTolerance:0,s=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,s,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const t=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=t.width/i[0],r=t.height/i[1],s="changedTouches"in e?e.changedTouches[0]:e;return[(s.clientX-t.left)/n,(s.clientY-t.top)/r]}getTarget(){return this.get(er)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return ti(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ie(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get($n)}setLayers(e){const t=this.getLayerGroup();if(e instanceof U)return void t.setLayers(e);const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const i=e[t];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const r=i.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(e){const t=ii(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ie(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Qn)}getView(){return this.get(tr)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return function(e,t,i,n,r){if(!e||!(i in e.wantedTiles))return ir;if(!e.wantedTiles[i][t.getKey()])return ir;const s=e.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new jn(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Zn||i===w||i===v){const e=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():e,n=t.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===e?e.documentElement:i).contains(n))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e)){const t=this.getInteractions().getArray().slice();for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(e)||e.propagationStopped))break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,n=i;if(e){const t=e.viewHints;if(t[0]||t[1]){const t=Date.now()-e.time>8;i=t?0:8,n=t?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,n))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(pt)&&this.renderer_.dispatchRenderEvent(pt,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Xn(Jn,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Xn(qn,this,e))));const i=this.postRenderFunctions_;for(let t=0,n=i.length;t<n;++t)i[t](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)C(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(_,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(w,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,vn(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const e=this.targetElement_.getRootNode();e instanceof ShadowRoot&&this.resizeObserver_.unobserve(e.host),this.setSize(void 0)}const e=this.getTarget(),t="string"==typeof e?document.getElementById(e):e;if(this.targetElement_=t,t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Bn(this)),this.mapBrowserEventHandler_=new Kn(this,this.moveTolerance_);for(const e in Yn)this.mapBrowserEventHandler_.addEventListener(Yn[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(_,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(w,this.boundHandleBrowserEvent_,!!q&&{passive:!1});const e=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[S(e,v,this.handleBrowserEvent,this),S(e,x,this.handleBrowserEvent,this)];const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(t)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(C(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(C(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=S(e,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=S(e,m,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(C),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Gn("addlayer",e)),this.layerGroupPropertyListenerKeys_=[S(e,n,this.render,this),S(e,m,this.render,this),S(e,"addlayer",this.handleLayerAdd_,this),S(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Vr(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(void 0!==t&&Ur(t)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Le(s.center,s.resolution,s.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:n,wantedTiles:{},mapId:M(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const e=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=Le(s.nextCenter,s.nextResolution,e,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!Ne(this.previousExtent_)&&!xe(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Xn("movestart",this,n)),this.previousExtent_=ve(this.previousExtent_)),this.previousExtent_&&!r.viewHints[0]&&!r.viewHints[1]&&!xe(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Xn("moveend",this,r)),ue(r.extent,this.previousExtent_))),this.dispatchEvent(new Xn(Hn,this,r)),this.renderComplete_=this.hasListener(qn)||this.hasListener(Jn)||this.hasListener(pt)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Gn("removelayer",t)),this.set($n,e)}setSize(e){this.set(Qn,e)}setTarget(e){this.set(er,e)}setView(e){if(!e||e instanceof Qi)return void this.set(tr,e);this.set(tr,new Qi);const t=this;e.then((function(e){t.setView(new Qi(e))}))}updateSize(){const e=this.getTargetElement();let t;if(e){const i=getComputedStyle(e),n=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(r)||(t=[n,r],!Ur(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Gt("No map visible because the map container's width or height are 0."))}const i=this.getSize();!t||i&&h(t,i)||(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(t=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(t)}}},Yr="preload",Zr="useInterimTilesOnError",Kr=class extends tn{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getPreload(){return this.get(Yr)}setPreload(e){this.set(Yr,e)}getUseInterimTilesOnError(){return this.get(Zr)}setUseInterimTilesOnError(e){this.set(Zr,e)}getData(e){return super.getData(e)}},Hr=class extends I{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return L()}getData(e){return null}prepareFrame(e){return L()}renderFrame(e,t){return L()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(n,r)=>{const s=this.loadedTileCallback.bind(this,i,n);return e.forEachLoadedTile(t,n,r,s)}}forEachFeatureAtCoordinate(e,t,i,n,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){2===e.target.getState()&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return 2!=t&&3!=t&&e.addEventListener(m,this.boundHandleImageChange_),0==t&&(e.load(),t=e.getState()),2==t}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},qr=[];let Jr=null;const $r=class extends Hr{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){let n;Jr||(Jr=fn(1,1,void 0,{willReadFrequently:!0})),Jr.clearRect(0,0,1,1);try{Jr.drawImage(e,t,i,1,1,0,0,1,1),n=Jr.getImageData(0,0,1,1).data}catch(e){return Jr=null,null}return n}getBackground(e){let t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let r,s;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&h(He(e.style.backgroundColor),He(i)))){const t=e.firstElementChild;t instanceof HTMLCanvasElement&&(s=t.getContext("2d"))}if(s&&s.canvas.style.transform===t?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=n;let e=r.style;e.position="absolute",e.width="100%",e.height="100%",s=fn();const t=s.canvas;r.appendChild(t),e=t.style,e.position="absolute",e.left="0",e.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=Ae(i),r=Fe(i),s=Re(i),o=Te(i);ie(t.coordinateToPixelTransform,n),ie(t.coordinateToPixelTransform,r),ie(t.coordinateToPixelTransform,s),ie(t.coordinateToPixelTransform,o);const a=this.inversePixelTransform;ie(a,n),ie(a,r),ie(a,s),ie(a,o),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const r=new sn(e,this.inversePixelTransform,i,t);n.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(dt,e,t)}postRender(e,t){this.dispatchRenderEvent_(ut,e,t)}getRenderTransform(e,t,i,n,r,s,o){const a=r/2,l=s/2,h=n/t,c=-h,d=-e[0]+o,u=-e[1];return se(this.tempTransform,a,l,h,c,-i,d,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Qr=class extends p{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(m)}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?t=e:0==e.getState()?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){L()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else i=t,this.transitionStarts_[e]=i;const n=t-i+1e3/60;return n>=this.transition_?1:mi(n/this.transition_)}inTransition(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},es=class extends p{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=n}changed(){this.dispatchEvent(m)}getExtent(){return this.extent}getImage(){return L()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){L()}};function ts(e,t,i){const n=e;let r=!0,s=!1,o=!1;const a=[E(n,"load",(function(){o=!0,s||t()}))];return n.src&&H?(s=!0,n.decode().then((function(){r&&t()})).catch((function(e){r&&(o?t():i())}))):a.push(E(n,"error",i)),function(){r=!1,a.forEach(C)}}const is=class extends es{constructor(e,t,i,n,r,s,o){super(e,t,i,0),this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.context_=o,this.unlisten_=null,this.state=0,this.imageLoadFunction_=s}getImage(){if(2==this.state&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const e=this.context_.canvas;e.width=this.image_.width,e.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=3,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=Me(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()}load(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(e){this.image_=e,this.resolution=Me(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},ns=class extends Qr{constructor(e,t,i,n,r,s){super(e,t,s),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function(){const e=fn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},rs=class{constructor(e,t,i,n,r,s){this.sourceProj_=e,this.targetProj_=t;let o={};const a=Jt(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){const t=e[0]+"/"+e[1];return o[t]||(o[t]=a(e)),o[t]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&De(n)>=De(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?De(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?De(this.targetProj_.getExtent()):null;const l=Ae(i),h=Fe(i),c=Re(i),d=Te(i),u=this.transformInv_(l),f=this.transformInv_(h),g=this.transformInv_(c),p=this.transformInv_(d),m=10+(s?Math.max(0,Math.ceil(Math.log2(Ce(i)/(s*s*256*256)))):0);if(this.addQuad_(l,h,c,d,u,f,g,p,m),this.wrapsXInSource_){let e=1/0;this.triangles_.forEach((function(t,i,n){e=Math.min(e,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach((t=>{if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-e>this.sourceWorldWidth_/2){const i=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];i[0][0]-e>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-e>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-e>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(t.source=i)}}))}o={}}addTriangle_(e,t,i,n,r,s){this.triangles_.push({source:[n,r,s],target:[e,t,i]})}addQuad_(e,t,i,n,r,s,o,a,l){const h=ce([r,s,o,a]),c=this.sourceWorldWidth_?De(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,u=this.sourceProj_.canWrapX()&&c>.5&&c<1;let f=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(f=De(ce([e,t,i,n]))/this.targetWorldWidth_>.25||f),!u&&this.sourceProj_.isGlobal()&&c&&(f=c>.25||f)),!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Oe(h,this.maxSourceExtent_))return;let g=0;if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)f=!0;else if(g=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=g&&2!=g&&4!=g&&8!=g)return;if(l>0){if(!f){const t=[(e[0]+i[0])/2,(e[1]+i[1])/2],n=this.transformInv_(t);let s;s=u?(Ve(r[0],d)+Ve(o[0],d))/2-Ve(n[0],d):(r[0]+o[0])/2-n[0];const a=(r[1]+o[1])/2-n[1];f=s*s+a*a>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const h=[(t[0]+i[0])/2,(t[1]+i[1])/2],c=this.transformInv_(h),d=[(n[0]+e[0])/2,(n[1]+e[1])/2],u=this.transformInv_(d);this.addQuad_(e,t,h,d,r,s,c,u,l-1),this.addQuad_(d,h,i,n,u,c,o,a,l-1)}else{const h=[(e[0]+t[0])/2,(e[1]+t[1])/2],c=this.transformInv_(h),d=[(i[0]+n[0])/2,(i[1]+n[1])/2],u=this.transformInv_(d);this.addQuad_(e,h,d,n,r,c,u,a,l-1),this.addQuad_(h,t,i,d,c,s,o,u,l-1)}return}}if(u){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(e,i,n,r,o,a),0==(14&g)&&this.addTriangle_(e,i,t,r,o,s),g&&(0==(13&g)&&this.addTriangle_(t,n,e,s,a,r),0==(7&g)&&this.addTriangle_(t,n,i,s,a,o))}calculateSourceExtent(){const e=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(t,i,n){const r=t.source;be(e,r[0]),be(e,r[1]),be(e,r[2])})),e}getTriangles(){return this.triangles_}};let ss;const os=[];function as(e,t,i,n,r){e.beginPath(),e.moveTo(0,0),e.lineTo(t,i),e.lineTo(n,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(i,r)),e.restore()}function ls(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function hs(e,t,i,n){const r=$t(i,t,e);let s=Yt(t,n,i);const o=t.getMetersPerUnit();void 0!==o&&(s*=o);const a=e.getMetersPerUnit();void 0!==a&&(s/=a);const l=e.getExtent();if(!l||ge(l,r)){const t=Yt(e,s,r)/s;isFinite(t)&&t>0&&(s/=t)}return s}function cs(e,t,i,n,r,s,o,a,l,h,c,d){const u=fn(Math.round(i*e),Math.round(i*t),os);if(d||(u.imageSmoothingEnabled=!1),0===l.length)return u.canvas;function f(e){return Math.round(e*i)/i}u.scale(i,i),u.globalCompositeOperation="lighter";const g=[1/0,1/0,-1/0,-1/0];l.forEach((function(e,t,i){var n,r;n=g,(r=e.extent)[0]<n[0]&&(n[0]=r[0]),r[2]>n[2]&&(n[2]=r[2]),r[1]<n[1]&&(n[1]=r[1]),r[3]>n[3]&&(n[3]=r[3])}));const p=De(g),m=Me(g),_=fn(Math.round(i*p/n),Math.round(i*m/n),os);d||(_.imageSmoothingEnabled=!1);const y=i/n;l.forEach((function(e,t,i){const n=e.extent[0]-g[0],r=-(e.extent[3]-g[3]),s=De(e.extent),o=Me(e.extent);e.image.width>0&&e.image.height>0&&_.drawImage(e.image,h,h,e.image.width-2*h,e.image.height-2*h,n*y,r*y,s*y,o*y)}));const v=Ae(o);return a.getTriangles().forEach((function(e,t,r){const o=e.source,a=e.target;let l=o[0][0],h=o[0][1],c=o[1][0],p=o[1][1],m=o[2][0],y=o[2][1];const x=f((a[0][0]-v[0])/s),b=f(-(a[0][1]-v[1])/s),w=f((a[1][0]-v[0])/s),S=f(-(a[1][1]-v[1])/s),E=f((a[2][0]-v[0])/s),C=f(-(a[2][1]-v[1])/s),T=l,R=h;l=0,h=0,c-=T,p-=R,m-=T,y-=R;const I=function(e){const t=e.length;for(let i=0;i<t;i++){let n=i,r=Math.abs(e[i][i]);for(let s=i+1;s<t;s++){const t=Math.abs(e[s][i]);t>r&&(r=t,n=s)}if(0===r)return null;const s=e[n];e[n]=e[i],e[i]=s;for(let n=i+1;n<t;n++){const r=-e[n][i]/e[i][i];for(let s=i;s<t+1;s++)i==s?e[n][s]=0:e[n][s]+=r*e[i][s]}}const i=new Array(t);for(let n=t-1;n>=0;n--){i[n]=e[n][t]/e[n][n];for(let r=n-1;r>=0;r--)e[r][t]-=e[r][n]*i[n]}return i}([[c,p,0,0,w-x],[m,y,0,0,E-x],[0,0,c,p,S-b],[0,0,m,y,C-b]]);if(I){if(u.save(),u.beginPath(),function(){if(void 0===ss){const e=fn(6,6,os);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",as(e,4,5,4,0),as(e,4,5,0,5);const t=e.getImageData(0,0,3,3).data;ss=ls(t,0)||ls(t,4)||ls(t,8),gn(e),os.push(e.canvas)}return ss}()||!d){u.moveTo(w,S);const e=4,t=x-w,i=b-S;for(let n=0;n<e;n++)u.lineTo(w+f((n+1)*t/e),S+f(n*i/(e-1))),n!=e-1&&u.lineTo(w+f((n+1)*t/e),S+f((n+1)*i/(e-1)));u.lineTo(E,C)}else u.moveTo(w,S),u.lineTo(x,b),u.lineTo(E,C);u.clip(),u.transform(I[0],I[2],I[1],I[3],x,b),u.translate(g[0]-T,g[3]-R),u.scale(n/i,-n/i),u.drawImage(_.canvas,0,0),u.restore()}})),gn(_),os.push(_.canvas),c&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,a.getTriangles().forEach((function(e,t,i){const n=e.target,r=(n[0][0]-v[0])/s,o=-(n[0][1]-v[1])/s,a=(n[1][0]-v[0])/s,l=-(n[1][1]-v[1])/s,h=(n[2][0]-v[0])/s,c=-(n[2][1]-v[1])/s;u.beginPath(),u.moveTo(a,l),u.lineTo(r,o),u.lineTo(h,c),u.closePath(),u.stroke()})),u.restore()),u.canvas}const ds=class extends Qr{constructor(e,t,i,n,r,s,o,a,l,h,c,d){super(r,0,{interpolate:!!d}),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=o,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=s||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const u=n.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const p=f?Pe(u,f):u;if(0===Ce(p))return void(this.state=4);const m=e.getExtent();m&&(g=g?Pe(g,m):m);const _=n.getResolution(this.wrappedTileCoord_[0]),y=function(e,t,i,n){const r=Ie(i);let s=hs(e,t,r,n);return(!isFinite(s)||s<=0)&&Ee(i,(function(i){return s=hs(e,t,i,n),isFinite(s)&&s>0})),s}(e,i,p,_);if(!isFinite(y)||y<=0)return void(this.state=4);const v=void 0!==h?h:.5;if(this.triangulation_=new rs(e,i,p,g,y*v,_),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=t.getZForResolution(y);let x=this.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=Be(x[1],g[1],g[3]),x[3]=Be(x[3],g[1],g[3])):x=Pe(x,g)),Ce(x)){const e=t.getTileRangeForExtentAndZ(x,this.sourceZ_);for(let t=e.minX;t<=e.maxX;t++)for(let i=e.minY;i<=e.maxY;i++){const e=l(this.sourceZ_,t,i,o);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach((t=>{t&&2==t.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})})),this.sourceTiles_.length=0,0===e.length)this.state=3;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=cs(n,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,a,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((t=>{const i=t.getState();if(0==i||1==i){e++;const i=S(t,m,(function(n){const r=t.getState();2!=r&&3!=r&&4!=r||(C(i),e--,0===e&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(e,t,i){0==e.getState()&&e.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(C),this.sourcesListenerKeys_=null}release(){this.canvas_&&(gn(this.canvas_.getContext("2d")),os.push(this.canvas_),this.canvas_=null),super.release()}};const us=class{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}},fs=class extends $r{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new us(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),n=t.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!n}getTile(e,t,i,n){const r=n.pixelRatio,s=n.viewState.projection,o=this.getLayer();let a=o.getSource().getTile(e,t,i,r,s);return 3==a.getState()&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=ie(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!ge(r,n))return null;const s=t.pixelRatio,o=t.viewState.projection,a=t.viewState,l=i.getRenderSource(),h=l.getTileGridForProjection(a.projection),c=l.getTilePixelRatio(t.pixelRatio);for(let e=h.getZForResolution(a.resolution);e>=h.getMinZoom();--e){const t=h.getTileCoordForCoordAndZ(n,e),i=l.getTile(e,t[1],t[2],s,o);if(!(i instanceof ns||i instanceof ds)||i instanceof ds&&4===i.getState())return null;if(2!==i.getState())continue;const r=h.getOrigin(e),d=Wr(h.getTileSize(e)),u=h.getResolution(e),f=Math.floor(c*((n[0]-r[0])/u-t[1]*d[0])),g=Math.floor(c*((r[1]-n[1])/u-t[2]*d[1])),p=Math.round(c*l.getGutterForProjection(a.projection));return this.getImageData(i.getImage(),f+p,g+p)}return null}loadedTileCallback(e,t,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(e,t,i)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],n=e.viewState,r=n.projection,o=n.resolution,a=n.center,l=n.rotation,h=e.pixelRatio,c=this.getLayer(),d=c.getSource(),u=d.getRevision(),f=d.getTileGridForProjection(r),g=f.getZForResolution(o,d.zDirection),p=f.getResolution(g);let m=e.extent;const _=e.viewState.resolution,y=d.getTilePixelRatio(h),v=Math.round(De(m)/_*h),x=Math.round(Me(m)/_*h),b=i.extent&&ri(i.extent);b&&(m=Pe(m,ri(i.extent)));const w=p*v/2/y,S=p*x/2/y,E=[a[0]-w,a[1]-S,a[0]+w,a[1]+S],C=f.getTileRangeForExtentAndZ(m,g),T={};T[g]={};const R=this.createLoadedTileFinder(d,r,T),I=this.tmpExtent,L=this.tmpTileRange_;this.newTiles_=!1;const k=l?ke(n.center,_,l,e.size):void 0;for(let t=C.minX;t<=C.maxX;++t)for(let n=C.minY;n<=C.maxY;++n){if(l&&!f.tileCoordIntersectsViewport([g,t,n],k))continue;const r=this.getTile(g,t,n,e);if(this.isDrawableTile(r)){const t=M(this);if(2==r.getState()){T[g][r.tileCoord.toString()]=r;let e=r.inTransition(t);e&&1!==i.opacity&&(r.endTransition(t),e=!1),this.newTiles_||!e&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(t,e.time))continue}const s=f.getTileCoordChildTileRange(r.tileCoord,L,I);let o=!1;s&&(o=R(g+1,s)),o||f.forEachTileCoordParentTileRange(r.tileCoord,R,L,I)}const P=p/o*h/y;se(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,l,-v/2,-x/2);const A=le(this.pixelTransform);this.useContainer(t,A,this.getBackground(e));const F=this.context,D=F.canvas;oe(this.inversePixelTransform,this.pixelTransform),se(this.tempTransform,v/2,x/2,P,P,0,-v/2,-x/2),D.width!=v||D.height!=x?(D.width=v,D.height=x):this.containerReused||F.clearRect(0,0,v,x),b&&this.clipUnrotated(F,e,b),d.getInterpolate()||(F.imageSmoothingEnabled=!1),this.preRender(F,e),this.renderedTiles.length=0;let O,N,z,B=Object.keys(T).map(Number);B.sort(s),1!==i.opacity||this.containerReused&&!d.getOpaque(e.viewState.projection)?(O=[],N=[]):B=B.reverse();for(let t=B.length-1;t>=0;--t){const i=B[t],n=d.getTilePixelSize(i,h,r),s=f.getResolution(i)/p,o=n[0]*s*P,a=n[1]*s*P,l=f.getTileCoordForCoordAndZ(Ae(E),i),c=f.getTileCoordExtent(l),u=ie(this.tempTransform,[y*(c[0]-E[0])/p,y*(E[3]-c[3])/p]),m=y*d.getGutterForProjection(r),_=T[i];for(const t in _){const n=_[t],r=n.tileCoord,s=l[1]-r[1],h=Math.round(u[0]-(s-1)*o),c=l[2]-r[2],f=Math.round(u[1]-(c-1)*a),p=Math.round(u[0]-s*o),y=Math.round(u[1]-c*a),v=h-p,x=f-y,b=g===i,w=b&&1!==n.getAlpha(M(this),e.time);let S=!1;if(!w)if(O){z=[p,y,p+v,y,p+v,y+x,p,y+x];for(let e=0,t=O.length;e<t;++e)if(g!==i&&i<N[e]){const t=O[e];Oe([p,y,p+v,y+x],[t[0],t[3],t[4],t[7]])&&(S||(F.save(),S=!0),F.beginPath(),F.moveTo(z[0],z[1]),F.lineTo(z[2],z[3]),F.lineTo(z[4],z[5]),F.lineTo(z[6],z[7]),F.moveTo(t[6],t[7]),F.lineTo(t[4],t[5]),F.lineTo(t[2],t[3]),F.lineTo(t[0],t[1]),F.clip())}O.push(z),N.push(i)}else F.clearRect(p,y,v,x);this.drawTileImage(n,e,p,y,v,x,m,b),O&&!w?(S&&F.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(e.usedTiles,d,n)}}return this.renderedRevision=u,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!xe(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(e,d,f,h,r,m,g,c.getPreload()),this.scheduleExpireCache(e,d),this.postRender(F,e),i.extent&&F.restore(),F.imageSmoothingEnabled=!0,A!==D.style.transform&&(D.style.transform=A),this.container}drawTileImage(e,t,i,n,r,s,o,a){const l=this.getTileImage(e);if(!l)return;const h=M(this),c=t.layerStatesArray[t.layerIndex],d=c.opacity*(a?e.getAlpha(h,t.time):1),u=d!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(l,o,o,l.width-2*o,l.height-2*o,i,n,r,s),u&&this.context.restore(),d!==c.opacity?t.animate=!0:a&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=function(e,t,i){const n=M(e);n in i.usedTiles&&e.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const n=M(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}manageTilePyramid(e,t,i,n,r,s,o,a,l){const h=M(t);h in e.wantedTiles||(e.wantedTiles[h]={});const c=e.wantedTiles[h],d=e.tileQueue,u=i.getMinZoom(),f=e.viewState.rotation,g=f?ke(e.viewState.center,e.viewState.resolution,f,e.size):void 0;let p,m,_,y,v,x,b=0;for(x=u;x<=o;++x)for(m=i.getTileRangeForExtentAndZ(s,x,m),_=i.getResolution(x),y=m.minX;y<=m.maxX;++y)for(v=m.minY;v<=m.maxY;++v)f&&!i.tileCoordIntersectsViewport([x,y,v],g)||(o-x<=a?(++b,p=t.getTile(x,y,v,n,r),0==p.getState()&&(c[p.getKey()]=!0,d.isKeyQueued(p.getKey())||d.enqueue([p,h,i.getTileCoordCenter(p.tileCoord),_])),void 0!==l&&l(p)):t.useTile(x,y,v,r));t.updateCacheSize(b,r)}},gs=class extends Kr{constructor(e){super(e)}createRenderer(){return new fs(this)}};var ps=i(582);class ms{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Wr(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ms({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return L()}getImage(e){return L()}getHitDetectionImage(){return L()}getPixelRatio(e){return 1}getImageState(){return L()}getImageSize(){return L()}getOrigin(){return L()}getSize(){return L()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Wr(e)}listenImageChange(e){L()}load(){L()}unlistenImageChange(e){L()}}const _s=ms;function ys(e){return Array.isArray(e)?Je(e):e}class vs extends _s{constructor(e){super({opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new vs({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const i=this.renderOptions_,n=fn(i.size*e,i.size*e);this.draw_(i,n,e),t=n.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;let n=this.radius_,r=void 0===this.radius2_?n:this.radius2_;if(n<r){const e=n;n=r,r=e}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),l=n-Math.sqrt(r*r-a*a),h=Math.sqrt(a*a+l*l),c=h/a;if("miter"===e&&c<=i)return c*t;const d=t/2/c,u=t/2*(l/h),f=Math.sqrt((n+d)*(n+d)+u*u)-n;if(void 0===this.radius2_||"bevel"===e)return 2*f;const g=n*Math.sin(o),p=r-Math.sqrt(n*n-g*g),m=Math.sqrt(g*g+p*p)/g;if(m<=i){const e=m*t/2-r-n;return 2*Math.max(f,e)}return 2*f}createRenderOptions(){let e,t=Cn,i=0,n=null,r=0,s=0;this.stroke_&&(e=this.stroke_.getColor(),null===e&&(e=Tn),e=ys(e),s=this.stroke_.getWidth(),void 0===s&&(s=1),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),void 0===t&&(t=Cn),i=this.stroke_.getMiterLimit(),void 0===i&&(i=10));const o=this.calculateLineJoinSize_(t,s,i),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:e,strokeWidth:s,size:Math.ceil(2*a+o),lineDash:n,lineDashOffset:r,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let e=this.fill_.getColor();null===e&&(e=wn),t.fillStyle=ys(e),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),i=0;if("string"==typeof t&&(t=He(t)),null===t?i=1:Array.isArray(t)&&(i=4===t.length?t[3]:1),0===i){const t=fn(e.size,e.size);this.hitDetectionCanvas_=t.canvas,this.drawHitDetectionCanvas_(e,t)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(t*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let o=0;o<t;o++){const t=r+o*s,a=o%2==0?i:n;e.lineTo(a*Math.cos(t),a*Math.sin(t))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=wn,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}const xs=vs;class bs extends xs{constructor(e){super({points:1/0,fill:(e=e||{radius:5}).fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new bs({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const ws=bs;class Ss{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null}clone(){const e=this.getColor();return new Ss({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const Es=Ss;class Cs{constructor(e){e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Cs({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Ts=Cs;class Rs{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ks,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new Rs({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ks,this.geometry_=e}setZIndex(e){this.zIndex_=e}}let Is=null;function Ls(e,t){if(!Is){const e=new Es({color:"rgba(255,255,255,0.4)"}),t=new Ts({color:"#3399CC",width:1.25});Is=[new Rs({image:new ws({fill:e,stroke:t,radius:5}),fill:e,stroke:t})]}return Is}function ks(e){return e.getGeometry()}const Ms=Rs;let Ps=null;class As extends p{constructor(e,t,i,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){Ps||(Ps=fn(1,1,void 0,{willReadFrequently:!0})),Ps.drawImage(this.image_,0,0);try{Ps.getImageData(0,0,1,1),this.tainted_=!1}catch(e){Ps=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(m)}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=fn(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=ts(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||2!==this.imageState_)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const n=i.getContext("2d");n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Ze(this.color_),n.fillRect(0,0,i.width/e,i.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Fs(e,t,i,n){return void 0!==i&&void 0!==n?[i/e,n/t]:void 0!==i?i/e:void 0!==n?n/t:1}class Ds extends _s{constructor(e){const t=void 0!==(e=e||{}).opacity?e.opacity:1,i=void 0!==e.rotation?e.rotation:0,n=void 0!==e.scale?e.scale:1,r=void 0!==e.rotateWithView&&e.rotateWithView;super({opacity:t,rotation:i,scale:n,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const s=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let o=e.src;J(!(void 0!==o&&s),4),J(!s||s&&this.imgSize_,5),void 0!==o&&0!==o.length||!s||(o=s.src||M(s)),J(void 0!==o&&o.length>0,6),J(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),69);const a=void 0!==e.src?0:2;if(this.color_=void 0!==e.color?He(e.color):null,this.iconImage_=function(e,t,i,n,r,s){let o=Qe.get(t,n,s);return o||(o=new As(e,t,i,n,r,s),Qe.set(t,n,s,o)),o}(s,o,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,a,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,void 0!==e.width||void 0!==e.height){let t,i;if(e.size)[t,i]=e.size;else{const n=this.getImage(1);if(!(n instanceof HTMLCanvasElement||n.src&&n.complete)){this.initialOptions_=e;const t=()=>{if(this.unlistenImageChange(t),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(Fs(i[0],i[1],e.width,e.height))};return void this.listenImageChange(t)}t=n.width,i=n.height}void 0!==t&&this.setScale(Fs(t,i,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Ds({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const t=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!t)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=t[0]),"fraction"==this.anchorYUnits_&&(e[1]*=t[1])}if("top-left"!=this.anchorOrigin_){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[0]=-e[0]+t[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[0]=i[0]-t[0]-e[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*e[0]:void 0}getHeight(){const e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*e[1]:void 0}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(m,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(m,e)}}const Os=Ds;class Ns{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Wr(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Es({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}clone(){const e=this.getScale();return new Ns({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Wr(void 0!==e?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const zs=Ns;function Bs(e){return new Ms({fill:Gs(e,""),stroke:Us(e,""),text:Ws(e),image:Vs(e)})}function Gs(e,t){const i=e[t+"fill-color"];if(i)return new Es({color:i})}function Us(e,t){const i=e[t+"stroke-width"],n=e[t+"stroke-color"];if(i||n)return new Ts({width:i,color:n,lineCap:e[t+"stroke-line-cap"],lineJoin:e[t+"stroke-line-join"],lineDash:e[t+"stroke-line-dash"],lineDashOffset:e[t+"stroke-line-dash-offset"],miterLimit:e[t+"stroke-miter-limit"]})}function Ws(e){const t=e["text-value"];if(t)return new zs({text:t,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],repeat:e["text-repeat"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:Gs(e,"text-"),backgroundFill:Gs(e,"text-background-"),stroke:Us(e,"text-"),backgroundStroke:Us(e,"text-background-")})}function Vs(e){const t=e["icon-src"],i=e["icon-img"];if(t||i)return new Os({src:t,img:i,imgSize:e["icon-img-size"],anchor:e["icon-anchor"],anchorOrigin:e["icon-anchor-origin"],anchorXUnits:e["icon-anchor-x-units"],anchorYUnits:e["icon-anchor-y-units"],color:e["icon-color"],crossOrigin:e["icon-cross-origin"],offset:e["icon-offset"],displacement:e["icon-displacement"],opacity:e["icon-opacity"],scale:e["icon-scale"],width:e["icon-width"],height:e["icon-height"],rotation:e["icon-rotation"],rotateWithView:e["icon-rotate-with-view"],size:e["icon-size"],declutterMode:e["icon-declutter-mode"]});const n=e["shape-points"];if(n){const t="shape-";return new xs({points:n,fill:Gs(e,t),stroke:Us(e,t),radius:e["shape-radius"],radius1:e["shape-radius1"],radius2:e["shape-radius2"],angle:e["shape-angle"],displacement:e["shape-displacement"],rotation:e["shape-rotation"],rotateWithView:e["shape-rotate-with-view"],scale:e["shape-scale"],declutterMode:e["shape-declutter-mode"]})}const r=e["circle-radius"];if(r){const t="circle-";return new ws({radius:r,fill:Gs(e,t),stroke:Us(e,t),displacement:e["circle-displacement"],scale:e["circle-scale"],rotation:e["circle-rotation"],rotateWithView:e["circle-rotate-with-view"],declutterMode:e["circle-declutter-mode"]})}}const Xs="renderOrder",js=class extends tn{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Xs)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new ps(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Xs,e)}setStyle(e){let t;if(void 0===e)t=Ls;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof Ms)t=e;else if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let t=0;t<i;++t){const i=e[t];n[t]=i instanceof Ms?i:Bs(i)}t=n}else t=Bs(e);this.style_=t,this.styleFunction_=null===e?void 0:function(e){let t;if("function"==typeof e)t=e;else{let i;Array.isArray(e)?i=e:(J("function"==typeof e.getZIndex,41),i=[e]),t=function(){return i}}return t}(this.style_),this.changed()}},Ys={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Zs=[Ys.FILL],Ks=[Ys.STROKE],Hs=[Ys.BEGIN_PATH],qs=[Ys.CLOSE_PATH],Js=Ys,$s=class{drawCustom(e,t,i,n){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},Qs=class extends $s{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return 1==t?e:e.map((function(e){return e*t}))}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let o=0,a=e.length;o<a;o+=t)n[0]=e[o],n[1]=e[o+1],ge(i,n)&&(r[s++]=n[0],r[s++]=n[1]);return s}appendFlatLineCoordinates(e,t,i,n,r,s){const o=this.coordinates;let a=o.length;const l=this.getBufferedMaxExtent();s&&(t+=n);let h=e[t],c=e[t+1];const d=this.tmpCoordinate_;let u,f,g,p=!0;for(u=t+n;u<i;u+=n)d[0]=e[u],d[1]=e[u+1],g=_e(l,d),g!==f?(p&&(o[a++]=h,o[a++]=c,p=!1),o[a++]=d[0],o[a++]=d[1]):g===he.INTERSECTING?(o[a++]=d[0],o[a++]=d[1],p=!1):p=!0,h=d[0],c=d[1],f=g;return(r&&p||u===t+n)&&(o[a++]=h,o[a++]=c),a}drawCustomCoordinates_(e,t,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s],a=this.appendFlatLineCoordinates(e,t,o,n,!1,!1);r.push(a),t=o}return t}drawCustom(e,t,i,n){this.beginGeometry(e,t);const r=e.getType(),s=e.getStride(),o=this.coordinates.length;let a,l,h,c,d;switch(r){case"MultiPolygon":a=e.getOrientedFlatCoordinates(),c=[];const t=e.getEndss();d=0;for(let e=0,i=t.length;e<i;++e){const i=[];d=this.drawCustomCoordinates_(a,d,t[e],s,i),c.push(i)}this.instructions.push([Js.CUSTOM,o,c,e,i,Fi]),this.hitDetectionInstructions.push([Js.CUSTOM,o,c,e,n||i,Fi]);break;case"Polygon":case"MultiLineString":h=[],a="Polygon"==r?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(a,0,e.getEnds(),s,h),this.instructions.push([Js.CUSTOM,o,h,e,i,Ai]),this.hitDetectionInstructions.push([Js.CUSTOM,o,h,e,n||i,Ai]);break;case"LineString":case"Circle":a=e.getFlatCoordinates(),l=this.appendFlatLineCoordinates(a,0,a.length,s,!1,!1),this.instructions.push([Js.CUSTOM,o,l,e,i,Pi]),this.hitDetectionInstructions.push([Js.CUSTOM,o,l,e,n||i,Pi]);break;case"MultiPoint":a=e.getFlatCoordinates(),l=this.appendFlatPointCoordinates(a,s),l>o&&(this.instructions.push([Js.CUSTOM,o,l,e,i,Pi]),this.hitDetectionInstructions.push([Js.CUSTOM,o,l,e,n||i,Pi]));break;case"Point":a=e.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),l=this.coordinates.length,this.instructions.push([Js.CUSTOM,o,l,e,i]),this.hitDetectionInstructions.push([Js.CUSTOM,o,l,e,n||i])}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Js.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Js.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;let t;e.reverse();const i=e.length;let n,r,s=-1;for(t=0;t<i;++t)n=e[t],r=n[0],r==Js.END_GEOMETRY?s=t:r==Js.BEGIN_GEOMETRY&&(n[2]=t,a(this.hitDetectionInstructions,s,t),s=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const t=e.getColor();i.fillStyle=ys(t||wn)}else i.fillStyle=void 0;if(t){const e=t.getColor();i.strokeStyle=ys(e||Tn);const n=t.getLineCap();i.lineCap=void 0!==n?n:Sn;const r=t.getLineDash();i.lineDash=r?r.slice():En;const s=t.getLineDashOffset();i.lineDashOffset=s||0;const o=t.getLineJoin();i.lineJoin=void 0!==o?o:Cn;const a=t.getWidth();i.lineWidth=void 0!==a?a:1;const l=t.getMiterLimit();i.miterLimit=void 0!==l?l:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[Js.SET_FILL_STYLE,t];return"string"!=typeof t&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Js.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;"string"==typeof i&&e.currentFillStyle==i||(void 0!==i&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,r=e.lineDash,s=e.lineDashOffset,o=e.lineJoin,a=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||r!=e.currentLineDash&&!h(e.currentLineDash,r)||e.currentLineDashOffset!=s||e.currentLineJoin!=o||e.currentLineWidth!=a||e.currentMiterLimit!=l)&&(void 0!==i&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=r,e.currentLineDashOffset=s,e.currentLineJoin=o,e.currentLineWidth=a,e.currentMiterLimit=l)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Js.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ue(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;de(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},eo=class extends Qs{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const r=this.state,s=void 0!==r.fillStyle,o=void 0!==r.strokeStyle,a=i.length;this.instructions.push(Hs),this.hitDetectionInstructions.push(Hs);for(let r=0;r<a;++r){const s=i[r],a=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,s,n,!0,!o),h=[Js.MOVE_TO_LINE_TO,a,l];this.instructions.push(h),this.hitDetectionInstructions.push(h),o&&(this.instructions.push(qs),this.hitDetectionInstructions.push(qs)),t=s}return s&&(this.instructions.push(Zs),this.hitDetectionInstructions.push(Zs)),o&&(this.instructions.push(Ks),this.hitDetectionInstructions.push(Ks)),t}drawCircle(e,t){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Js.SET_FILL_STYLE,wn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Js.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=e.getFlatCoordinates(),o=e.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,o,!1,!1);const l=[Js.CIRCLE,a];this.instructions.push(Hs,l),this.hitDetectionInstructions.push(Hs,l),void 0!==i.fillStyle&&(this.instructions.push(Zs),this.hitDetectionInstructions.push(Zs)),void 0!==i.strokeStyle&&(this.instructions.push(Ks),this.hitDetectionInstructions.push(Ks)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Js.SET_FILL_STYLE,wn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Js.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=e.getEnds(),o=e.getOrientedFlatCoordinates(),a=e.getStride();this.drawFlatCoordinatess_(o,0,s,a),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Js.SET_FILL_STYLE,wn]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Js.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const s=e.getEndss(),o=e.getOrientedFlatCoordinates(),a=e.getStride();let l=0;for(let e=0,t=s.length;e<t;++e)l=this.drawFlatCoordinatess_(o,l,s[e],a);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(0!==e){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=ki(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}};function to(e,t,i,n,r){const s=[];let o=i,a=0,l=t.slice(i,2);for(;a<e&&o+r<n;){const[i,n]=l.slice(-2),h=t[o+r],c=t[o+r+1],d=Math.sqrt((h-i)*(h-i)+(c-n)*(c-n));if(a+=d,a>=e){const t=(e-a+d)/d,u=Xe(i,h,t),f=Xe(n,c,t);l.push(u,f),s.push(l),l=[u,f],a==e&&(o+=r),a=0}else if(a<e)l.push(t[o+r],t[o+r+1]),o+=r;else{const e=d-a,t=Xe(i,h,e/d),u=Xe(n,c,e/d);l.push(t,u),s.push(l),l=[t,u],a=0,o+=r}}return a>0&&s.push(l),s}function io(e,t,i,n,r){let s,o,a,l,h,c,d,u,f,g,p=i,m=i,_=0,y=0,v=i;for(o=i;o<n;o+=r){const i=t[o],n=t[o+1];void 0!==h&&(f=i-h,g=n-c,l=Math.sqrt(f*f+g*g),void 0!==d&&(y+=a,s=Math.acos((d*f+u*g)/(a*l)),s>e&&(y>_&&(_=y,p=v,m=o),y=0,v=o-r)),a=l,d=f,u=g),h=i,c=n}return y+=l,y>_?[v,o]:[p,m]}const no={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ro={Circle:eo,Default:Qs,Image:class extends Qs{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),n=e.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([Js.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Js.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),n=e.getStride(),r=this.coordinates.length,s=this.appendFlatPointCoordinates(i,n);this.instructions.push([Js.DRAW_IMAGE,r,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Js.DRAW_IMAGE,r,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},LineString:class extends Qs{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const r=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,i,n,!1,!1),o=[Js.MOVE_TO_LINE_TO,r,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Js.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,En,0],Hs);const s=e.getFlatCoordinates(),o=e.getStride();this.drawFlatCoordinates_(s,0,s.length,o),this.hitDetectionInstructions.push(Ks),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Js.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Hs);const s=e.getEnds(),o=e.getFlatCoordinates(),a=e.getStride();let l=0;for(let e=0,t=s.length;e<t;++e)l=this.drawFlatCoordinates_(o,l,s[e],a);this.hitDetectionInstructions.push(Ks),this.endGeometry(t)}finish(){const e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ks),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ks),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Hs)}},Polygon:eo,Text:class extends Qs{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!i&&!n)return;const s=this.coordinates;let o=s.length;const a=e.getType();let l=null,h=e.getStride();if("line"!==r.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let i=r.overflow?null:[];switch(a){case"Point":case"MultiPoint":l=e.getFlatCoordinates();break;case"LineString":l=e.getFlatMidpoint();break;case"Circle":l=e.getCenter();break;case"MultiLineString":l=e.getFlatMidpoints(),h=2;break;case"Polygon":l=e.getFlatInteriorPoint(),r.overflow||i.push(l[2]/this.resolution),h=3;break;case"MultiPolygon":const t=e.getFlatInteriorPoints();l=[];for(let e=0,n=t.length;e<n;e+=3)r.overflow||i.push(t[e+2]/this.resolution),l.push(t[e],t[e+1]);if(0===l.length)return;h=2}const n=this.appendFlatPointCoordinates(l,h);if(n===o)return;if(i&&(n-o)/2!=l.length/h){let e=o/2;i=i.filter(((t,i)=>{const n=s[2*(e+i)]===l[i*h]&&s[2*(e+i)+1]===l[i*h+1];return n||--e,n}))}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let c=r.padding;if(c!=Ln&&(r.scale[0]<0||r.scale[1]<0)){let e=r.padding[0],t=r.padding[1],i=r.padding[2],n=r.padding[3];r.scale[0]<0&&(t=-t,n=-n),r.scale[1]<0&&(e=-e,i=-i),c=[e,t,i,n]}const d=this.pixelRatio;this.instructions.push([Js.DRAW_IMAGE,o,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==Ln?Ln:c.map((function(e){return e*d})),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/d;this.hitDetectionInstructions.push([Js.DRAW_IMAGE,o,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,c,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(t)}else{if(!Oe(this.getBufferedMaxExtent(),e.getExtent()))return;let i;if(l=e.getFlatCoordinates(),"LineString"==a)i=[l.length];else if("MultiLineString"==a)i=e.getEnds();else if("Polygon"==a)i=e.getEnds().slice(0,1);else if("MultiPolygon"==a){const t=e.getEndss();i=[];for(let e=0,n=t.length;e<n;++e)i.push(t[e][0])}this.beginGeometry(e,t);const n=r.repeat,c=n?void 0:r.textAlign;let d=0;for(let e=0,t=i.length;e<t;++e){let t;t=n?to(n*this.resolution,l,d,i[e],h):[l.slice(d,i[e])];for(let n=0,a=t.length;n<a;++n){const a=t[n];let l=0,u=a.length;if(null==c){const e=io(r.maxAngle,a,0,a.length,2);l=e[0],u=e[1]}for(let e=l;e<u;e+=h)s.push(a[e],a[e+1]);const f=s.length;d=i[e],this.drawChars_(o,f),o=f}}this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||Rn,justify:t.justify,textBaseline:t.textBaseline||In,scale:t.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=no[n.textBaseline],h=this.textOffsetY_*a,c=this.text_,d=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Js.DRAW_CHARS,e,t,l,n.overflow,o,n.maxAngle,a,h,r,d*a,c,s,1]),this.hitDetectionInstructions.push([Js.DRAW_CHARS,e,t,l,n.overflow,o,n.maxAngle,1,h,r,d,c,s,1/a])}setTextStyle(e,t){let i,n,r;if(e){const t=e.getFill();t?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=ys(t.getColor()||wn)):(n=null,this.textFillState_=n);const s=e.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const e=s.getLineDash(),t=s.getLineDashOffset(),i=s.getWidth(),n=s.getMiterLimit();r.lineCap=s.getLineCap()||Sn,r.lineDash=e?e.slice():En,r.lineDashOffset=void 0===t?0:t,r.lineJoin=s.getLineJoin()||Cn,r.lineWidth=void 0===i?1:i,r.miterLimit=void 0===n?10:n,r.strokeStyle=ys(s.getColor()||Tn)}else r=null,this.textStrokeState_=r;i=this.textState_;const o=e.getFont()||bn;Fn(o);const a=e.getScaleArray();i.overflow=e.getOverflow(),i.font=o,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||In,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Ln,i.scale=void 0===a?[1,1]:a;const l=e.getOffsetX(),h=e.getOffsetY(),c=e.getRotateWithView(),d=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===d?0:d,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:M(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+M(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}},so=class{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const r=i[n].finish();e[t][n]=r}}return e}getBuilder(e,t){const i=void 0!==e?e.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let r=n[t];return void 0===r&&(r=new(0,ro[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=r),r}};function oo(e,t,i,n,r,s,o,a,l,h,c,d){let u=e[t],f=e[t+1],g=0,p=0,m=0,_=0;function y(){g=u,p=f,u=e[t+=n],f=e[t+1],_+=m,m=Math.sqrt((u-g)*(u-g)+(f-p)*(f-p))}do{y()}while(t<i-n&&_+m<s);let v=0===m?0:(s-_)/m;const x=Xe(g,u,v),b=Xe(p,f,v),w=t-n,S=_,E=s+a*l(h,r,c);for(;t<i-n&&_+m<E;)y();v=0===m?0:(E-_)/m;const C=Xe(g,u,v),T=Xe(p,f,v);let R;if(d){const e=[x,b,C,T];bi(e,0,4,2,d,e,e),R=e[0]>e[2]}else R=x>C;const I=Math.PI,L=[],k=w+n===t;let M;if(m=0,_=S,u=e[t=w],f=e[t+1],k){y(),M=Math.atan2(f-p,u-g),R&&(M+=M>0?-I:I);const e=(C+x)/2,t=(T+b)/2;return L[0]=[e,t,(E-s)/2,M,r],L}for(let e=0,d=(r=r.replace(/\n/g," ")).length;e<d;){y();let x=Math.atan2(f-p,u-g);if(R&&(x+=x>0?-I:I),void 0!==M){let e=x-M;if(e+=e>I?-2*I:e<-I?2*I:0,Math.abs(e)>o)return null}M=x;const b=e;let w=0;for(;e<d;++e){const o=a*l(h,r[R?d-e-1:e],c);if(t+n<i&&_+m<s+w+o/2)break;w+=o}if(e===b)continue;const S=R?r.substring(d-b,d-e):r.substring(b,e);v=0===m?0:(s+w/2-_)/m;const E=Xe(g,u,v),C=Xe(p,f,v);L.push([E,C,w/2,x,S]),s+=w}return L}function ao(e,t,i,n){let r=e[t],s=e[t+1],o=0;for(let a=t+n;a<i;a+=n){const t=e[a],i=e[a+1];o+=Math.sqrt((t-r)*(t-r)+(i-s)*(i-s)),r=t,s=i}return o}const lo=[1/0,1/0,-1/0,-1/0],ho=[],co=[],uo=[],fo=[];function go(e){return e[3].declutterBox}const po=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function mo(e,t){return"start"!==t&&"end"!==t||po.test(e)||(t="start"===t?"left":"right"),no[t]}function _o(e,t,i){return i>0&&e.push("\n",""),e.push(t,""),e}const yo=class{constructor(e,t,i,n){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,n){const r=e+t+i+n;if(this.labels_[r])return this.labels_[r];const s=n?this.strokeStates[n]:null,o=i?this.fillStates[i]:null,a=this.textStates[t],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],c=Array.isArray(e),d=a.justify?no[a.justify]:mo(Array.isArray(e)?e[0]:e,a.textAlign||Rn),u=n&&s.lineWidth?s.lineWidth:0,f=c?e:e.split("\n").reduce(_o,[]),{width:g,height:p,widths:m,heights:_,lineWidths:y}=function(e,t){const i=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let h=0,c=t.length;h<=c;h+=2){const d=t[h];if("\n"===d||h===c){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const u=t[h+1]||e.font,f=Nn(u,d);i.push(f),o+=f;const g=Dn(u);n.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:i,heights:n,lineWidths:r}}(a,f),v=g+u,x=[],b=(v+2)*h[0],w=(p+u)*h[1],S={width:b<0?Math.floor(b):Math.ceil(b),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:x};1==h[0]&&1==h[1]||x.push("scale",h),n&&(x.push("strokeStyle",s.strokeStyle),x.push("lineWidth",u),x.push("lineCap",s.lineCap),x.push("lineJoin",s.lineJoin),x.push("miterLimit",s.miterLimit),x.push("setLineDash",[s.lineDash]),x.push("lineDashOffset",s.lineDashOffset)),i&&x.push("fillStyle",o.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");const E=.5-d;let C=d*v+E*u;const T=[],R=[];let I,L=0,k=0,M=0,P=0;for(let e=0,t=f.length;e<t;e+=2){const t=f[e];if("\n"===t){k+=L,L=0,C=d*v+E*u,++P;continue}const r=f[e+1]||a.font;r!==I&&(n&&T.push("font",r),i&&R.push("font",r),I=r),L=Math.max(L,_[M]);const s=[t,C+E*m[M]+d*(m[M]-y[P]),.5*(u+L)+k];C+=m[M],n&&T.push("strokeText",s),i&&R.push("fillText",s),++M}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,R),this.labels_[r]=S,S}replayTextBackground_(e,t,i,n,r,s,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,t),s&&(this.alignFill_=s[2],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,r,s,o,a,l,h,c,d,u,f,g,p){let m=i-(o*=d[0]),_=n-(a*=d[1]);const y=r+l>e?e-l:r,v=s+h>t?t-h:s,x=f[3]+y*d[0]+f[1],b=f[0]+v*d[1]+f[2],w=m-f[3],S=_-f[0];let E;return(g||0!==c)&&(ho[0]=w,fo[0]=w,ho[1]=S,co[1]=S,co[0]=w+x,uo[0]=co[0],uo[1]=S+b,fo[1]=uo[1]),0!==c?(E=se([1,0,0,1,0,0],i,n,1,1,c,-i,-n),ie(E,ho),ie(E,co),ie(E,uo),ie(E,fo),ye(Math.min(ho[0],co[0],uo[0],fo[0]),Math.min(ho[1],co[1],uo[1],fo[1]),Math.max(ho[0],co[0],uo[0],fo[0]),Math.max(ho[1],co[1],uo[1],fo[1]),lo)):ye(Math.min(w,w+x),Math.min(S,S+b),Math.max(w,w+x),Math.max(S,S+b),lo),u&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:y,drawImageH:v,originX:l,originY:h,declutterBox:{minX:lo[0],minY:lo[1],maxX:lo[2],maxY:lo[3],value:p},canvasTransform:E,scale:d}}replayImageOrLabel_(e,t,i,n,r,s,o){const a=!(!s&&!o),l=n.declutterBox,h=e.canvas,c=o?o[2]*n.scale[0]/2:0;return l.minX-c<=h.width/t&&l.maxX+c>=0&&l.minY-c<=h.height/t&&l.maxY+c>=0&&(a&&this.replayTextBackground_(e,ho,co,uo,fo,s,o),function(e,t,i,n,r,s,o,a,l,h,c){e.save(),1!==i&&(e.globalAlpha*=i),t&&e.setTransform.apply(e,t),n.contextInstructions?(e.translate(l,h),e.scale(c[0],c[1]),function(e,t){const i=e.contextInstructions;for(let e=0,n=i.length;e<n;e+=2)Array.isArray(i[e+1])?t[i[e]].apply(t,i[e+1]):t[i[e]]=i[e+1]}(n,e)):c[0]<0||c[1]<0?(e.translate(l,h),e.scale(c[0],c[1]),e.drawImage(n,r,s,o,a,0,0,o,a)):e.drawImage(n,r,s,o,a,l,h,o*c[0],a*c[1]),e.restore()}(e,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){if(this.alignFill_){const t=ie(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,n){const r=this.textStates[t],s=this.createLabel(e,t,n,i),o=this.strokeStates[i],a=this.pixelRatio,l=mo(Array.isArray(e)?e[0]:e,r.textAlign||Rn),h=no[r.textBaseline||In],c=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:l*(s.width/a-2*r.scale[0])+2*(.5-l)*c,anchorY:h*s.height/a+2*(.5-h)*c}}execute_(e,t,i,n,r,s,o,a){let l;var c,d;this.pixelCoordinates_&&h(i,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=xi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),d=i,(c=this.renderedTransform_)[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5]);let u=0;const f=n.length;let g,p,m,_,y,v,x,b,w,S,E,C,T=0,R=0,I=0,L=null,k=null;const M=this.coordinateCache_,P=this.viewRotation_,A=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:P},D=this.instructions!=n||this.overlaps?0:200;let O,N,z,B;for(;u<f;){const i=n[u];switch(i[0]){case Js.BEGIN_GEOMETRY:O=i[1],B=i[3],O.getGeometry()?void 0===o||Oe(o,B.getExtent())?++u:u=i[2]+1:u=i[2];break;case Js.BEGIN_PATH:R>D&&(this.fill_(e),R=0),I>D&&(e.stroke(),I=0),R||I||(e.beginPath(),_=NaN,y=NaN),++u;break;case Js.CIRCLE:T=i[1];const n=l[T],h=l[T+1],c=l[T+2]-n,d=l[T+3]-h,f=Math.sqrt(c*c+d*d);e.moveTo(n+f,h),e.arc(n,h,f,0,2*Math.PI,!0),++u;break;case Js.CLOSE_PATH:e.closePath(),++u;break;case Js.CUSTOM:T=i[1],g=i[2];const G=i[3],U=i[4],W=6==i.length?i[5]:void 0;F.geometry=G,F.feature=O,u in M||(M[u]=[]);const V=M[u];W?W(l,T,g,2,V):(V[0]=l[T],V[1]=l[T+1],V.length=2),U(V,F),++u;break;case Js.DRAW_IMAGE:T=i[1],g=i[2],b=i[3],p=i[4],m=i[5];let X=i[6];const j=i[7],Y=i[8],Z=i[9],K=i[10];let H=i[11];const q=i[12];let J=i[13];const $=i[14],Q=i[15];if(!b&&i.length>=20){w=i[19],S=i[20],E=i[21],C=i[22];const e=this.drawLabelWithPointPlacement_(w,S,E,C);b=e.label,i[3]=b;const t=i[23];p=(e.anchorX-t)*this.pixelRatio,i[4]=p;const n=i[24];m=(e.anchorY-n)*this.pixelRatio,i[5]=m,X=b.height,i[6]=X,J=b.width,i[13]=J}let ee,te,ie,ne;i.length>25&&(ee=i[25]),i.length>17?(te=i[16],ie=i[17],ne=i[18]):(te=Ln,ie=!1,ne=!1),K&&A?H+=P:K||A||(H-=P);let re=0;for(;T<g;T+=2){if(ee&&ee[re++]<J/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(b.width,b.height,l[T],l[T+1],J,X,p,m,Y,Z,H,q,r,te,ie||ne,O),n=[e,t,b,i,j,ie?L:null,ne?k:null];if(a){if("none"===$)continue;if("obstacle"===$){a.insert(i.declutterBox);continue}{let e,t;if(Q){const i=g-T;if(!Q[i]){Q[i]=n;continue}if(e=Q[i],delete Q[i],t=go(e),a.collides(t))continue}if(a.collides(i.declutterBox))continue;e&&(a.insert(t),this.replayImageOrLabel_.apply(this,e)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++u;break;case Js.DRAW_CHARS:const se=i[1],oe=i[2],ae=i[3],le=i[4];C=i[5];const he=i[6],ce=i[7],de=i[8];E=i[9];const ue=i[10];w=i[11],S=i[12];const fe=[i[13],i[13]],ge=this.textStates[S],pe=ge.font,me=[ge.scale[0]*ce,ge.scale[1]*ce];let _e;pe in this.widths_?_e=this.widths_[pe]:(_e={},this.widths_[pe]=_e);const ye=ao(l,se,oe,2),ve=Math.abs(me[0])*zn(pe,w,_e);if(le||ve<=ye){const i=this.textStates[S].textAlign,n=oo(l,se,oe,2,w,(ye-ve)*no[i],he,Math.abs(me[0]),zn,pe,_e,A?0:this.viewRotation_);e:if(n){const i=[];let r,s,o,l,h;if(E)for(r=0,s=n.length;r<s;++r){h=n[r],o=h[4],l=this.createLabel(o,S,"",E),p=h[2]+(me[0]<0?-ue:ue),m=ae*l.height+2*(.5-ae)*ue*me[1]/me[0]-de;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,p,m,0,0,h[3],fe,!1,Ln,!1,O);if(a&&a.collides(s.declutterBox))break e;i.push([e,t,l,s,1,null,null])}if(C)for(r=0,s=n.length;r<s;++r){h=n[r],o=h[4],l=this.createLabel(o,S,C,""),p=h[2],m=ae*l.height-de;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,p,m,0,0,h[3],fe,!1,Ln,!1,O);if(a&&a.collides(s.declutterBox))break e;i.push([e,t,l,s,1,null,null])}a&&a.load(i.map(go));for(let e=0,t=i.length;e<t;++e)this.replayImageOrLabel_.apply(this,i[e])}}++u;break;case Js.END_GEOMETRY:if(void 0!==s){O=i[1];const e=s(O,B);if(e)return e}++u;break;case Js.FILL:D?R++:this.fill_(e),++u;break;case Js.MOVE_TO_LINE_TO:for(T=i[1],g=i[2],N=l[T],z=l[T+1],v=N+.5|0,x=z+.5|0,v===_&&x===y||(e.moveTo(N,z),_=v,y=x),T+=2;T<g;T+=2)N=l[T],z=l[T+1],v=N+.5|0,x=z+.5|0,T!=g-2&&v===_&&x===y||(e.lineTo(N,z),_=v,y=x);++u;break;case Js.SET_FILL_STYLE:L=i,this.alignFill_=i[2],R&&(this.fill_(e),R=0,I&&(e.stroke(),I=0)),e.fillStyle=i[1],++u;break;case Js.SET_STROKE_STYLE:k=i,I&&(e.stroke(),I=0),this.setStrokeStyle_(e,i),++u;break;case Js.STROKE:D?I++:e.stroke(),++u;break;default:++u}}R&&this.fill_(e),I&&e.stroke()}execute(e,t,i,n,r,s){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,r,void 0,void 0,s)}executeHitDetection(e,t,i,n,r){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,n,r)}},vo=["Polygon","Circle","LineString","Image","Text","Default"],xo={},bo=class{constructor(e,t,i,n,r,s){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(r)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];void 0===i&&(i={},this.executorsByZIndex_[t]=i);const n=e[t];for(const e in n){const t=n[e];i[e]=new yo(this.resolution_,this.pixelRatio_,this.overlaps_,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let t=0,n=e.length;t<n;++t)if(e[t]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,r,o){const a=2*(n=Math.round(n))+1,l=se(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=fn(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let d;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):h||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(d=[1/0,1/0,-1/0,-1/0],be(d,e),de(d,t*(this.renderBuffer_+n),d));const u=function(e){if(void 0!==xo[e])return xo[e];const t=2*e+1,i=e*e,n=new Array(i+1);for(let r=0;r<=e;++r)for(let s=0;s<=e;++s){const o=r*r+s*s;if(o>i)break;let a=n[o];a||(a=[],n[o]=a),a.push(4*((e+r)*t+(e+s))+3),r>0&&a.push(4*((e-r)*t+(e+s))+3),s>0&&(a.push(4*((e+r)*t+(e-s))+3),r>0&&a.push(4*((e-r)*t+(e-s))+3))}const r=[];for(let e=0,t=n.length;e<t;++e)n[e]&&r.push(...n[e]);return xo[e]=r,r}(n);let f;function g(e,t){const i=c.getImageData(0,0,a,a).data;for(let s=0,l=u.length;s<l;s++)if(i[u[s]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(e)){const i=(u[s]-3)/4,o=n-i%a,l=n-(i/a|0),h=r(e,t,o*o+l*l);if(h)return h}c.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let m,_,y,v,x;for(p.sort(s),m=p.length-1;m>=0;--m){const e=p[m].toString();for(y=this.executorsByZIndex_[e],_=vo.length-1;_>=0;--_)if(f=vo[_],v=y[f],void 0!==v&&(x=v.executeHitDetection(c,l,i,g,d),x))return x}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],r=t[2],s=t[3],o=[i,n,i,s,r,s,r,n];return xi(o,0,8,2,e,o),o}isEmpty(){return g(this.executorsByZIndex_)}execute(e,t,i,n,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);let h,c,d,u,f,g;for(l.sort(s),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||vo,a&&l.reverse(),h=0,c=l.length;h<c;++h){const s=l[h].toString();for(f=this.executorsByZIndex_[s],d=0,u=o.length;d<u;++d)g=f[o[d]],void 0!==g&&g.execute(e,t,i,n,r,a)}this.maxExtent_&&e.restore()}},wo=class extends $s{constructor(e,t,i,n,r,s,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?function(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(e,t,i,n){if(!this.image_)return;const r=xi(e,t,i,n,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,a=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let e=0,t=r.length;e<t;e+=2){const t=r[e]-this.imageAnchorX_,i=r[e+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const e=t+this.imageAnchorX_,n=i+this.imageAnchorY_;se(o,e,n,1,1,l,-e,-n),s.setTransform.apply(s,o),s.translate(e,n),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=a)}drawText_(e,t,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=xi(e,t,i,n,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<i;t+=n){const e=r[t]+this.textOffsetX_,i=r[t+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(e-this.textOffsetX_,i-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,e,i),this.textFillState_&&s.fillText(this.text_,e,i))}}moveToLineTo_(e,t,i,n,r){const s=this.context_,o=xi(e,t,i,n,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;r&&(a-=2);for(let e=2;e<a;e+=2)s.lineTo(o[e],o[e+1]);return r&&s.closePath(),i}drawRings_(e,t,i,n){for(let r=0,s=i.length;r<s;++r)t=this.moveToLineTo_(e,t,i[r],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oe(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=function(e,t,i){const n=e.getFlatCoordinates();if(!n)return null;const r=e.getStride();return xi(n,0,n.length,r,t,i)}(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],r=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let e=0,i=t.length;e<i;++e)this.drawGeometry(t[e])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),""!==this.text_&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oe(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Oe(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();let n=0;const r=e.getEnds(),s=e.getStride();t.beginPath();for(let e=0,t=r.length;e<t;++e)n=this.moveToLineTo_(i,n,r[e],s,!1);t.stroke()}if(""!==this.text_){const t=e.getFlatMidpoints();this.drawText_(t,0,t.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oe(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oe(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const r=e.getEndss(),s=e.getStride();t.beginPath();for(let e=0,t=r.length;e<t;++e){const t=r[e];n=this.drawRings_(i,n,t,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),h(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:Rn;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(e){const t=e.getColor();this.fillState_={fillStyle:ys(t||wn)}}else this.fillState_=null;if(t){const e=t.getColor(),i=t.getLineCap(),n=t.getLineDash(),r=t.getLineDashOffset(),s=t.getLineJoin(),o=t.getWidth(),a=t.getMiterLimit(),l=n||En;this.strokeState_={lineCap:void 0!==i?i:Sn,lineDash:1===this.pixelRatio_?l:l.map((e=>e*this.pixelRatio_)),lineDashOffset:(r||0)*this.pixelRatio_,lineJoin:void 0!==s?s:Cn,lineWidth:(void 0!==o?o:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:ys(e||Tn)}}else this.strokeState_=null}setImageStyle(e){let t;if(!e||!(t=e.getSize()))return void(this.image_=null);const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(e){const t=e.getFill();if(t){const e=t.getColor();this.textFillState_={fillStyle:ys(e||wn)}}else this.textFillState_=null;const i=e.getStroke();if(i){const e=i.getColor(),t=i.getLineCap(),n=i.getLineDash(),r=i.getLineDashOffset(),s=i.getLineJoin(),o=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==t?t:Sn,lineDash:n||En,lineDashOffset:r||0,lineJoin:void 0!==s?s:Cn,lineWidth:void 0!==o?o:1,miterLimit:void 0!==a?a:10,strokeStyle:ys(e||Tn)}}else this.textStrokeState_=null;const n=e.getFont(),r=e.getOffsetX(),s=e.getOffsetY(),o=e.getRotateWithView(),a=e.getRotation(),l=e.getScaleArray(),h=e.getText(),c=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:void 0!==n?n:bn,textAlign:void 0!==c?c:Rn,textBaseline:void 0!==d?d:In},this.text_=void 0!==h?Array.isArray(h)?h.reduce(((e,t,i)=>e+(i%2?" ":t)),""):h:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}},So=.5;function Eo(e,t,i,n,r,o,a){const l=fn(e[0]*So,e[1]*So);l.imageSmoothingEnabled=!1;const h=l.canvas,c=new wo(l,So,r,null,a),d=i.length,u=Math.floor(16777215/d),f={};for(let e=1;e<=d;++e){const t=i[e-1],s=t.getStyleFunction()||n;if(!n)continue;let a=s(t,o);if(!a)continue;Array.isArray(a)||(a=[a]);const l=(e*u).toString(16).padStart(7,"#00000");for(let e=0,i=a.length;e<i;++e){const i=a[e],n=i.getGeometryFunction()(t);if(!n||!Oe(r,n.getExtent()))continue;const s=i.clone(),o=s.getFill();o&&o.setColor(l);const h=s.getStroke();h&&(h.setColor(l),h.setLineDash(null)),s.setText(void 0);const c=i.getImage();if(c&&0!==c.getOpacity()){const e=c.getImageSize();if(!e)continue;const t=fn(e[0],e[1],void 0,{alpha:!1}),i=t.canvas;t.fillStyle=l,t.fillRect(0,0,i.width,i.height),s.setImage(new Os({img:i,imgSize:e,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const d=s.getZIndex()||0;let u=f[d];u||(u={},f[d]=u,u.Polygon=[],u.Circle=[],u.LineString=[],u.Point=[]);const g=n.getType();if("GeometryCollection"===g){const e=n.getGeometriesArrayRecursive();for(let t=0,i=e.length;t<i;++t){const i=e[t];u[i.getType().replace("Multi","")].push(i,s)}}else u[g.replace("Multi","")].push(n,s)}}const g=Object.keys(f).map(Number).sort(s);for(let e=0,i=g.length;e<i;++e){const i=f[g[e]];for(const e in i){const n=i[e];for(let e=0,i=n.length;e<i;e+=2){c.setStyle(n[e+1]);for(let i=0,r=t.length;i<r;++i)c.setTransform(t[i]),c.drawGeometry(n[e])}}}return l.getImageData(0,0,h.width,h.height)}function Co(e,t,i){const n=[];if(i){const r=Math.floor(Math.round(e[0])*So),s=Math.floor(Math.round(e[1])*So),o=4*(Be(r,0,i.width-1)+Be(s,0,i.height-1)*i.width),a=i.data[o],l=i.data[o+1],h=i.data[o+2]+256*(l+256*a),c=Math.floor(16777215/t.length);h&&h%c==0&&n.push(t[h/c-1])}return n}const To=.5,Ro={Point:function(e,t,i,n,r){const s=i.getImage(),o=i.getText();let a;if(s){if(2!=s.getImageState())return;let l=e;if(r){const h=s.getDeclutterMode();if("none"!==h)if(l=r,"obstacle"===h){const r=e.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,a),r.drawPoint(t,n)}else o&&o.getText()&&(a={})}const h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(t,n)}if(o&&o.getText()){let s=e;r&&(s=r);const l=s.getBuilder(i.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(t,n)}},LineString:function(e,t,i,n,r){const s=i.getStroke();if(s){const r=e.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawLineString(t,n)}const o=i.getText();if(o&&o.getText()){const s=(r||e).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(t,n)}},Polygon:function(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=e.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawPolygon(t,n)}const a=i.getText();if(a&&a.getText()){const s=(r||e).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(t,n)}},MultiPoint:function(e,t,i,n,r){const s=i.getImage(),o=i.getText();let a;if(s){if(2!=s.getImageState())return;let l=e;if(r){const h=s.getDeclutterMode();if("none"!==h)if(l=r,"obstacle"===h){const r=e.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,a),r.drawMultiPoint(t,n)}else o&&o.getText()&&(a={})}const h=l.getBuilder(i.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(t,n)}if(o&&o.getText()){let s=e;r&&(s=r);const l=s.getBuilder(i.getZIndex(),"Text");l.setTextStyle(o,a),l.drawText(t,n)}},MultiLineString:function(e,t,i,n,r){const s=i.getStroke();if(s){const r=e.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawMultiLineString(t,n)}const o=i.getText();if(o&&o.getText()){const s=(r||e).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(t,n)}},MultiPolygon:function(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(o||s){const r=e.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawMultiPolygon(t,n)}const a=i.getText();if(a&&a.getText()){const s=(r||e).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(t,n)}},GeometryCollection:function(e,t,i,n,r){const s=t.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o)(0,Ro[s[o].getType()])(e,s[o],i,n,r)},Circle:function(e,t,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=e.getBuilder(i.getZIndex(),"Circle");r.setFillStrokeStyle(s,o),r.drawCircle(t,n)}const a=i.getText();if(a&&a.getText()){const s=(r||e).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(t,n)}}};function Io(e,t){return parseInt(M(e),10)-parseInt(M(t),10)}function Lo(e,t){const i=ko(e,t);return i*i}function ko(e,t){return To*e/t}function Mo(e,t,i,n,r,s,o){let a=!1;const l=i.getImage();if(l){const e=l.getImageState();2==e||3==e?l.unlistenImageChange(r):(0==e&&l.load(),l.listenImageChange(r),a=!0)}return function(e,t,i,n,r,s){const o=i.getGeometryFunction()(t);if(!o)return;const a=o.simplifyTransformed(n,r);i.getRenderer()?Po(e,a,i,t):(0,Ro[a.getType()])(e,a,i,t,s)}(e,t,i,n,s,o),a}function Po(e,t,i,n){if("GeometryCollection"!=t.getType())e.getBuilder(i.getZIndex(),"Default").drawCustom(t,n,i.getRenderer(),i.getHitDetectionRenderer());else{const r=t.getGeometries();for(let t=0,s=r.length;t<s;++t)Po(e,r[t],i,n)}}const Ao=class extends $r{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,r=t.viewState,s=r.center,o=r.resolution,a=r.projection,l=r.rotation,h=a.getExtent(),c=this.getLayer().getSource(),d=t.pixelRatio,u=t.viewHints,f=!(u[0]||u[1]),g=this.compositionContext_,p=Math.round(t.size[0]*d),m=Math.round(t.size[1]*d),_=c.getWrapX()&&a.canWrapX(),y=_?De(h):null,v=_?Math.ceil((n[2]-h[2])/y)+1:1;let x=_?Math.floor((n[0]-h[0])/y):0;do{const t=this.getRenderTransform(s,o,l,d,p,m,x*y);e.execute(g,1,t,l,f,void 0,i)}while(++x<v)}setupCompositionContext_(){if(1!==this.opacity_){const e=fn(this.context.canvas.width,this.context.canvas.height,qr);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,gn(this.compositionContext_),qr.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];!function(e,t,i){te(e,t,0,0,i,0,0)}(this.pixelTransform,1/i,1/i),oe(this.inversePixelTransform,this.pixelTransform);const r=le(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const s=this.context,o=s.canvas,a=this.replayGroup_,l=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!l||l.isEmpty()))return null;const h=Math.round(e.size[0]*i),c=Math.round(e.size[1]*i);o.width!=h||o.height!=c?(o.width=h,o.height=c,o.style.transform!==r&&(o.style.transform=r)):this.containerReused||s.clearRect(0,0,h,c),this.preRender(s,e);const d=e.viewState;d.projection;this.opacity_=n.opacity,this.setupCompositionContext_();let u=!1,f=!0;if(n.extent&&this.clipping){const t=ri(n.extent);f=Oe(t,e.extent),u=f&&!pe(t,e.extent),u&&this.clipUnrotated(this.compositionContext_,e,t)}return f&&this.renderWorlds(a,e),u&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,e),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise((t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];ie(this.pixelTransform,e);const t=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],l=e[0]*So,h=e[1]*So;a.push(this.getRenderTransform(t,i,n,So,l,h,0).slice());const c=o.getSource(),d=r.getExtent();if(c.getWrapX()&&r.canWrapX()&&!pe(d,s)){let e=s[0];const r=De(d);let o,c=0;for(;e<d[0];)--c,o=r*c,a.push(this.getRenderTransform(t,i,n,So,l,h,o).slice()),e+=r;for(c=0,e=s[2];e>d[2];)++c,o=r*c,a.push(this.getRenderTransform(t,i,n,So,l,h,o).slice()),e-=r}this.hitDetectionImageData_=Eo(e,a,this.renderedFeatures_,o.getStyleFunction(),s,i,n)}t(Co(e,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(e,t,i,n,r){if(!this.replayGroup_)return;const s=t.viewState.resolution,o=t.viewState.rotation,a=this.getLayer(),l={},h=function(e,t,i){const s=M(e),o=l[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return l[s]=!0,r.splice(r.lastIndexOf(o),1),n(e,a,t);o.geometry=t,o.distanceSq=i}}else{if(0===i)return l[s]=!0,n(e,a,t);r.push(l[s]={feature:e,layer:a,geometry:t,distanceSq:i,callback:n})}};let c;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some((n=>c=n.forEachFeatureAtCoordinate(e,s,o,i,h,n===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map((e=>e.value)):null))),c}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[0],r=e.viewHints[1],s=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!s&&n||!o&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=e.extent,l=e.viewState,c=l.projection,d=l.resolution,u=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let p=t.getRenderOrder();void 0===p&&(p=Io);const m=l.center.slice(),_=de(a,g*d),y=_.slice(),v=[_.slice()],x=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!pe(x,e.extent)){const e=De(x),t=Math.max(De(_)/2,e);_[0]=x[0]-t,_[2]=x[2]+t,Dt(m,c);const i=ze(v[0],c);i[0]<x[0]&&i[2]<x[2]?v.push([i[0]+e,i[1],i[2]+e,i[3]]):i[0]>x[0]&&i[2]>x[2]&&v.push([i[0]-e,i[1],i[2]-e,i[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&pe(this.wrappedRenderedExtent_,_))return h(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new so(ko(d,u),_,d,u);let w;this.getLayer().getDeclutter()&&(w=new so(ko(d,u),_,d,u));const S=ei();let E;if(S){for(let e=0,t=v.length;e<t;++e){const t=ni(v[e]);i.loadFeatures(t,si(d),S)}E=qt(S,c)}else for(let e=0,t=v.length;e<t;++e)i.loadFeatures(v[e],d,c);const C=Lo(d,u);let T=!0;const R=e=>{let i;const n=e.getStyleFunction()||t.getStyleFunction();if(n&&(i=n(e,d)),i){const t=this.renderFeature(e,C,i,b,E,w);T=T&&!t}},I=ni(_),L=i.getFeaturesInExtent(I);p&&L.sort(p);for(let e=0,t=L.length;e<t;++e)R(L[e]);this.renderedFeatures_=L,this.ready=T;const k=b.finish(),M=new bo(_,d,u,i.getOverlaps(),k,t.getRenderBuffer());return w&&(this.declutterExecutorGroup=new bo(_,d,u,i.getOverlaps(),w.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=c,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,r,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)o=Mo(n,e,i[a],t,this.boundHandleStyleImageChange_,r,s)||o;else o=Mo(n,e,i,t,this.boundHandleStyleImageChange_,r,s);return o}},Fo=class extends js{constructor(e){super(e)}createRenderer(){return new Ao(this)}},Do={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Oo={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},No=class extends fs{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=[1,0,0,1,0,0]}prepareTile(e,t,i){let n;const r=e.getState();return 2!==r&&3!==r||(this.updateExecutorGroup_(e,t,i),this.tileImageNeedsRender_(e)&&(n=!0)),n}getTile(e,t,i,n){const r=n.pixelRatio,s=n.viewState,o=s.resolution,a=s.projection,l=this.getLayer(),h=l.getSource().getTile(e,t,i,r,a),c=n.viewHints,d=!(c[0]||c[1]);return!d&&h.wantedResolution||(h.wantedResolution=o),this.prepareTile(h,r,a)&&(d||Date.now()-n.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(h,n),super.getTile(e,t,i,n)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&("vector"===t.getRenderMode()?M(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),r=n.getRevision(),s=n.getRenderOrder()||null,o=e.wantedResolution,a=e.getReplayState(n);if(!a.dirty&&a.renderedResolution===o&&a.renderedRevision==r&&a.renderedRenderOrder==s)return;const l=n.getSource(),h=n.getDeclutter(),c=l.getTileGrid(),d=l.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),u=l.getSourceTiles(t,i,e),f=M(n);delete e.hitDetectionImageData[f],e.executorGroups[f]=[],h&&(e.declutterExecutorGroups[f]=[]),a.dirty=!1;for(let i=0,r=u.length;i<r;++i){const r=u[i];if(2!=r.getState())continue;const g=r.tileCoord,p=c.getTileCoordExtent(g),m=Pe(d,p),_=de(m,n.getRenderBuffer()*o,this.tmpExtent),y=xe(p,m)?null:_,v=new so(0,_,o,t),x=h?new so(0,m,o,t):void 0,b=Lo(o,t),w=function(e){let t;const i=e.getStyleFunction()||n.getStyleFunction();if(i&&(t=i(e,o)),t){const i=this.renderFeature(e,b,t,v,x);a.dirty=a.dirty||i}},S=r.getFeatures();s&&s!==a.renderedRenderOrder&&S.sort(s);for(let e=0,t=S.length;e<t;++e){const t=S[e];y&&!Oe(y,t.getGeometry().getExtent())||w.call(this,t)}const E=v.finish(),C="vector"!==n.getRenderMode()&&h&&1===u.length?null:m,T=new bo(C,o,t,l.getOverlaps(),E,n.getRenderBuffer());if(e.executorGroups[f].push(T),x){const i=new bo(null,o,t,l.getOverlaps(),x.finish(),n.getRenderBuffer());e.declutterExecutorGroups[f].push(i)}}a.renderedRevision=r,a.renderedRenderOrder=s,a.renderedResolution=o}forEachFeatureAtCoordinate(e,t,i,n,r){const s=t.viewState.resolution,o=t.viewState.rotation;i=null==i?0:i;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(t.viewState.projection),h=ce([e]);de(h,s*i,h);const c={},d=function(e,t,i){let s=e.getId();void 0===s&&(s=M(e));const o=c[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return c[s]=!0,r.splice(r.lastIndexOf(o),1),n(e,a,t);o.geometry=t,o.distanceSq=i}}else{if(0===i)return c[s]=!0,n(e,a,t);r.push(c[s]={feature:e,layer:a,geometry:t,distanceSq:i,callback:n})}},u=this.renderedTiles;let f;for(let n=0,r=u.length;!f&&n<r;++n){const r=u[n];if(!Oe(l.getTileCoordExtent(r.wrappedTileCoord),h))continue;const c=M(a),g=[r.executorGroups[c]],p=r.declutterExecutorGroups[c];p&&g.push(p),g.some((n=>{const r=n===p?t.declutterTree.all().map((e=>e.value)):null;for(let t=0,a=n.length;t<a;++t){const a=n[t];if(f=a.forEachFeatureAtCoordinate(e,s,o,i,d,r),f)return!0}}))}return f}getFeatures(e){return new Promise(((t,i)=>{const n=this.getLayer(),r=M(n),s=n.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,h=s.getTileGridForProjection(o),c=ie(this.renderedPixelToCoordinateTransform_,e.slice()),d=h.getTileCoordForCoordAndResolution(c,l);let u;for(let e=0,t=this.renderedTiles.length;e<t;++e)if(d.toString()===this.renderedTiles[e].tileCoord.toString()){if(u=this.renderedTiles[e],2===u.getState()){const e=h.getTileCoordExtent(u.tileCoord);s.getWrapX()&&o.canWrapX()&&!pe(a,e)&&Dt(c,o);break}u=void 0}if(!u||u.loadingSourceTiles>0)return void t([]);const f=Ae(h.getTileCoordExtent(u.wrappedTileCoord)),g=[(c[0]-f[0])/l,(f[1]-c[1])/l],p=u.getSourceTiles().reduce((function(e,t){return e.concat(t.getFeatures())}),[]);let m=u.hitDetectionImageData[r];if(!m){const e=Wr(h.getTileSize(h.getZForResolution(l,s.zDirection))),t=this.renderedRotation_;m=Eo(e,[this.getRenderTransform(h.getTileCoordCenter(u.wrappedTileCoord),l,0,So,e[0]*So,e[1]*So,0)],p,n.getStyleFunction(),h.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(n).renderedResolution,t),u.hitDetectionImageData[r]=m}t(Co(g,p,m))}))}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,i=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const n=e.viewHints,r=!(n[0]||n[1]),s=this.renderedTiles;for(let t=0,i=s.length;t<i;++t){const i=s[t],n=i.declutterExecutorGroups[M(this.getLayer())];if(n)for(let t=n.length-1;t>=0;--t)n[t].execute(this.context,1,this.getTileRenderTransform(i,e),e.viewState.rotation,r,void 0,e.declutterTree)}t.globalAlpha=i}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,r=n.center,s=n.resolution,o=n.rotation,a=t.size,l=Math.round(a[0]*i),h=Math.round(a[1]*i),c=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),d=e.tileCoord,u=c.getTileCoordExtent(e.wrappedTileCoord),f=c.getTileCoordExtent(d,this.tmpExtent)[0]-u[0];return ee(ne(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(r,s,o,i,l,h,f))}postRender(e,t){const i=t.viewHints,n=!(i[0]||i[1]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const r=this.getLayer(),s=r.getRenderMode(),o=e.globalAlpha;e.globalAlpha=r.getOpacity();const a=Oo[s],l=t.viewState,h=l.rotation,c=r.getSource(),d=c.getTileGridForProjection(l.projection).getZForResolution(l.resolution,c.zDirection),u=this.renderedTiles,f=[],g=[];let p=!0;for(let i=u.length-1;i>=0;--i){const s=u[i];p=p&&!s.getReplayState(r).dirty;const o=s.executorGroups[M(r)].filter((e=>e.hasExecutors(a)));if(0===o.length)continue;const l=this.getTileRenderTransform(s,t),c=s.tileCoord[0];let m=!1;const _=o[0].getClipCoords(l);if(_){for(let t=0,i=f.length;t<i;++t)if(d!==c&&c<g[t]){const i=f[t];Oe([_[0],_[3],_[4],_[7]],[i[0],i[3],i[4],i[7]])&&(m||(e.save(),m=!0),e.beginPath(),e.moveTo(_[0],_[1]),e.lineTo(_[2],_[3]),e.lineTo(_[4],_[5]),e.lineTo(_[6],_[7]),e.moveTo(i[6],i[7]),e.lineTo(i[4],i[5]),e.lineTo(i[2],i[3]),e.lineTo(i[0],i[1]),e.clip())}f.push(_),g.push(c)}for(let t=0,i=o.length;t<i;++t)o[t].execute(e,1,l,h,n,a);m&&e.restore()}e.globalAlpha=o,this.ready=p,super.postRender(e,t)}renderFeature(e,t,i,n,r){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let o=0,a=i.length;o<a;++o)s=Mo(n,e,i[o],t,this.boundHandleStyleImageChange_,void 0,r)||s;else s=Mo(n,e,i,t,this.boundHandleStyleImageChange_,void 0,r);return s}tileImageNeedsRender_(e){const t=this.getLayer();if("vector"===t.getRenderMode())return!1;const i=e.getReplayState(t),n=t.getRevision(),r=e.wantedResolution;return i.renderedTileResolution!==r||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),r=i.getRevision(),s=e.executorGroups[M(i)];n.renderedTileRevision=r;const o=e.wrappedTileCoord,a=o[0],l=i.getSource();let h=t.pixelRatio;const c=t.viewState.projection,d=l.getTileGridForProjection(c),u=d.getResolution(e.tileCoord[0]),f=t.pixelRatio/e.wantedResolution*u,g=d.getResolution(a),p=e.getContext(i);h=Math.round(Math.max(h,f/h));const m=l.getTilePixelSize(a,h,c);p.canvas.width=m[0],p.canvas.height=m[1];const _=h/f;if(1!==_){const e=Q(this.tmpTransform_);ne(e,_,_),p.setTransform.apply(p,e)}const y=d.getTileCoordExtent(o,this.tmpExtent),v=f/g,x=Q(this.tmpTransform_);ne(x,v,-v),re(x,-y[0],-y[3]);for(let e=0,t=s.length;e<t;++e)s[e].execute(p,_,x,0,!0,Do[i.getRenderMode()]);n.renderedTileResolution=e.wantedResolution}},zo=class extends js{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const i=e.renderMode||"hybrid";J("hybrid"==i||"vector"==i,28),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new No(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Yr)}getUseInterimTilesOnError(){return this.get(Zr)}setPreload(e){this.set(Yr,e)}setUseInterimTilesOnError(e){this.set(Zr,e)}},Bo=class extends tn{constructor(e){super(e=e||{})}},Go=class extends $r{constructor(e){super(e),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,r=n.resolution,s=this.getLayer().getSource(),o=e.viewHints;let a=e.extent;if(void 0!==t.extent&&(a=Pe(a,ri(t.extent,n.projection))),!o[0]&&!o[1]&&!Ne(a))if(s){const e=n.projection,t=s.getImage(a,r,i,e);t&&(this.loadImage(t)?this.image_=t:4===t.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=ie(t.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!ge(r,n))return null;const s=this.image_.getExtent(),o=this.getImage(),a=De(s),l=Math.floor(o.width*((n[0]-s[0])/a));if(l<0||l>=o.width)return null;const h=Me(s),c=Math.floor(o.height*((s[3]-n[1])/h));return c<0||c>=o.height?null:this.getImageData(o,l,c)}renderFrame(e,t){const i=this.image_,n=i.getExtent(),r=i.getResolution(),s=i.getPixelRatio(),o=e.layerStatesArray[e.layerIndex],a=e.pixelRatio,l=e.viewState,h=l.center,c=a*r/(l.resolution*s),d=e.extent,u=l.resolution,f=l.rotation,g=Math.round(De(d)/u*a),p=Math.round(Me(d)/u*a);se(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,f,-g/2,-p/2),oe(this.inversePixelTransform,this.pixelTransform);const m=le(this.pixelTransform);this.useContainer(t,m,this.getBackground(e));const _=this.context,y=_.canvas;y.width!=g||y.height!=p?(y.width=g,y.height=p):this.containerReused||_.clearRect(0,0,g,p);let v=!1,x=!0;if(o.extent){const t=ri(o.extent,l.projection);x=Oe(t,e.extent),v=x&&!pe(t,e.extent),v&&this.clipUnrotated(_,e,t)}const b=this.getImage(),w=se(this.tempTransform,g/2,p/2,c,c,0,s*(n[0]-h[0])/r,s*(h[1]-n[3])/r);this.renderedResolution=r*a/s;const S=b.width*w[0],E=b.height*w[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,e),x&&S>=.5&&E>=.5){const e=w[4],t=w[5],i=o.opacity;let n;1!==i&&(n=_.globalAlpha,_.globalAlpha=i),_.drawImage(b,0,0,+b.width,+b.height,e,t,S,E),1!==i&&(_.globalAlpha=n)}return this.postRender(_,e),v&&_.restore(),_.imageSmoothingEnabled=!0,m!==y.style.transform&&(y.style.transform=m),this.container}},Uo=class extends Bo{constructor(e){super(e)}createRenderer(){return new Go(this)}getData(e){return super.getData(e)}},Wo="addfeature",Vo="changefeature",Xo="clear",jo="removefeature",Yo=34962,Zo=34963,Ko=35048,Ho=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function qo(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!X},t);const i=Ho.length;for(let n=0;n<i;++n)try{const i=e.getContext(Ho[n],t);if(i)return i}catch(e){}return null}function Jo(e){switch(e){case Yo:return Float32Array;case Zo:return Uint32Array;default:return Float32Array}}const $o=class{constructor(e,t){this.array=null,this.type=e,J(e===Yo||e===Zo,62),this.usage=void 0!==t?t:35044}ofSize(e){return this.array=new(Jo(this.type))(e),this}fromArray(e){return this.array=Jo(this.type).from(e),this}fromArrayBuffer(e){return this.array=new(Jo(this.type))(e),this}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}},Qo="webglcontextlost",ea="webglcontextrestored",ta=class{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),t.compileShader(i);const n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,e.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),t.compileShader(n),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,n),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach((i=>{this.uniforms_.push({value:e.uniforms[i],location:t.getUniformLocation(this.renderTargetProgram_,i)})}))}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const e=0,n=t.RGBA,r=0,s=t.RGBA,o=t.UNSIGNED_BYTE,a=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,e,n,i[0],i[1],r,s,o,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(e,t,i,n){const r=this.getGL(),s=e.size;if(r.bindFramebuffer(r.FRAMEBUFFER,t?t.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!t){const t=M(r.canvas);if(!e.renderTargets[t]){const i=r.getContextAttributes();i&&i.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),e.renderTargets[t]=!0}}r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),r.uniform1i(this.renderTargetTextureLocation_,0);const o=e.layerStatesArray[e.layerIndex].opacity;r.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(e),i&&i(r,e),r.drawArrays(r.TRIANGLES,0,6),n&&n(r,e)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(e){const t=this.getGL();let i,n=1;this.uniforms_.forEach((function(r){if(i="function"==typeof r.value?r.value(e):r.value,i instanceof HTMLCanvasElement||i instanceof ImageData)r.texture||(r.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,r.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(r.location,n++);else if(Array.isArray(i))switch(i.length){case 2:return void t.uniform2f(r.location,i[0],i[1]);case 3:return void t.uniform3f(r.location,i[0],i[1],i[2]);case 4:return void t.uniform4f(r.location,i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&t.uniform1f(r.location,i)}))}};function ia(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}const na={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},ra={};function sa(e){return"shared/"+e}let oa=0;function aa(e){switch(e){case na.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case na.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case na.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case na.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}const la=class extends r{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?sa(e.canvasCacheKey):function(){const e="unique/"+oa;return oa+=1,e}(),this.canvas_=function(e){let t=ra[e];if(!t){const i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",t={users:0,canvas:i},ra[e]=t}return t.users+=1,t.canvas}(this.canvasCacheKey_),this.gl_=qo(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(Qo,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(ea,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map((e=>new ta({webGlContext:this.gl_,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}))):[new ta({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[];for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===sa(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,i=M(e);let n=this.bufferCache_[i];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[i]=n),t.bindBuffer(e.getType(),n.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,i=M(e),n=this.bufferCache_[i];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener(Qo,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(ea,this.boundHandleWebGLContextRestored_),function(e){const t=ra[e];if(!t)return;if(t.users-=1,t.users>0)return;const i=qo(t.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete ra[e]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(e,t){const i=this.gl_,n=this.getCanvas(),r=e.size,s=e.pixelRatio;n.width===r[0]*s&&n.height===r[1]*s||(n.width=r[0]*s,n.height=r[1]*s,n.style.width=r[0]+"px",n.style.height=r[1]+"px");for(let t=this.postProcessPasses_.length-1;t>=0;t--)this.postProcessPasses_[t].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}bindTexture(e,t,i){const n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(i),t)}prepareDrawToRenderTarget(e,t,i){const n=this.gl_,r=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,r[0],r[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,i?n.ZERO:n.ONE_MINUS_SRC_ALPHA)}drawElements(e,t){const i=this.gl_;this.getExtension("OES_element_index_uint");const n=i.UNSIGNED_INT,r=t-e,s=4*e;i.drawElements(i.TRIANGLES,r,n,s)}finalizeDraw(e,t,i){for(let n=0,r=this.postProcessPasses_.length;n<r;n++)n===r-1?this.postProcessPasses_[n].apply(e,null,t,i):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,n=e.pixelRatio,r=Q(this.offsetScaleMatrix_);ne(r,2/t[0],2/t[1]);const s=Q(this.offsetRotateMatrix_);0!==i&&function(e,t){const i=Math.cos(t),n=Math.sin(t);ee(e,te($,i,n,-n,i,0,0))}(s,-i),this.setUniformMatrixValue("u_offsetScaleMatrix",ia(this.tmpMat4_,r)),this.setUniformMatrixValue("u_offsetRotateMatrix",ia(this.tmpMat4_,s)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",e.viewState.zoom),this.setUniformFloatValue("u_resolution",e.viewState.resolution),this.setUniformFloatValue("u_pixelRatio",n),this.setUniformFloatVec2("u_viewportSizePx",[t[0],t[1]])}applyUniforms(e){const t=this.gl_;let i,n=0;this.uniforms_.forEach((r=>{if(i="function"==typeof r.value?r.value(e):r.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)r.texture||(r.prevValue=void 0,r.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${n}`]),t.bindTexture(t.TEXTURE_2D,r.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&r.prevValue!==i&&(r.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),t.uniform1i(this.getUniformLocation(r.name),n++);else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(r.name,ia(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void t.uniform2f(this.getUniformLocation(r.name),i[0],i[1]);case 3:return void t.uniform3f(this.getUniformLocation(r.name),i[0],i[1],i[2]);case 4:return void t.uniform4f(this.getUniformLocation(r.name),i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&t.uniform1f(this.getUniformLocation(r.name),i)}))}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const i=this.gl_,n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}getProgram(e,t){const i=this.gl_,n=this.compileShader(e,i.FRAGMENT_SHADER),r=this.compileShader(t,i.VERTEX_SHADER),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,r),i.linkProgram(s),!i.getShaderParameter(n,i.COMPILE_STATUS)){const e=`Fragment shader compilation failed: ${i.getShaderInfoLog(n)}`;throw new Error(e)}if(i.deleteShader(n),!i.getShaderParameter(r,i.COMPILE_STATUS)){const e=`Vertex shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(e)}if(i.deleteShader(r),!i.getProgramParameter(s,i.LINK_STATUS)){const e=`GL program linking failed: ${i.getProgramInfoLog(s)}`;throw new Error(e)}return s}getUniformLocation(e){const t=M(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[t]&&(this.uniformLocationsByProgram_[t]={}),void 0===this.uniformLocationsByProgram_[t][e]&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=M(this.currentProgram_);return void 0===this.attribLocationsByProgram_[t]&&(this.attribLocationsByProgram_[t]={}),void 0===this.attribLocationsByProgram_[t][e]&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const i=e.size,n=e.viewState.rotation,r=e.viewState.resolution,s=e.viewState.center;return se(t,0,0,2/(r*i[0]),2/(r*i[1]),-n,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,i,n,r){const s=this.getAttributeLocation(e);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,t,i,!1,n,r))}enableAttributes(e){const t=function(e){let t=0;for(let i=0;i<e.length;i++){const n=e[i];t+=n.size*aa(n.type)}return t}(e);let i=0;for(let n=0;n<e.length;n++){const r=e[n];this.enableAttributeArray_(r.name,r.size,r.type||5126,t,i),i+=r.size*aa(r.type)}}handleWebGLContextLost(){f(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(e,t,i){const n=this.gl_;i=i||n.createTexture();const r=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),t?n.texImage2D(n.TEXTURE_2D,0,r,s,o,t):n.texImage2D(n.TEXTURE_2D,0,r,e[0],e[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i}};class ha extends Hr{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=[1,0,0,1,0,0],this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(ht,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(ft)){const n=new sn(ft,void 0,t,e);i.dispatchEvent(n)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(gt)){const n=new sn(gt,void 0,t,e);i.dispatchEvent(n)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t,i=!0,n=-1;for(let r=0,s=e.layerStatesArray.length;r<s;r++){const s=e.layerStatesArray[r].layer,o=s.getRenderer();if(!(o instanceof ha)){i=!0;continue}const a=s.getClassName();if((i||a!==t)&&(n+=1,i=!1),t=a,o===this)break}const r="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(r)||(this.removeHelper(),this.helper=new la({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){se(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const r=new sn(e,this.inversePixelTransform_,i,t);n.dispatchEvent(r)}}preRender(e,t){this.dispatchRenderEvent_(dt,e,t)}postRender(e,t){this.dispatchRenderEvent_(ut,e,t)}}const ca=ha,da=new Uint8Array(4),ua="GENERATE_POINT_BUFFERS";function fa(e,t){const i=256,n=255;return(t=t||[])[0]=Math.floor(e/i/i/i)/n,t[1]=Math.floor(e/i/i)%i/n,t[2]=Math.floor(e/i)%i/n,t[3]=e%i/n,t}i(187);const ga=class extends ca{constructor(e,t){const i=t.uniforms||{},n=[1,0,0,1,0,0];i.u_projectionMatrix=n,super(e,{uniforms:i,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new $o(Yo,Ko),this.hitVerticesBuffer_=new $o(Yo,Ko),this.indicesBuffer_=new $o(Zo,Ko),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=!(!t.hitFragmentShader||!t.hitVertexShader),this.hitVertexShader_=t.hitVertexShader,this.hitFragmentShader_=t.hitFragmentShader,this.hitProgram_;const r=t.attributes?t.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:na.FLOAT}})):[];this.attributes=[{name:"a_position",size:2,type:na.FLOAT},{name:"a_index",size:1,type:na.FLOAT}].concat(r),this.hitDetectionAttributes=[{name:"a_position",size:2,type:na.FLOAT},{name:"a_index",size:1,type:na.FLOAT},{name:"a_hitColor",size:4,type:na.FLOAT},{name:"a_featureUid",size:1,type:na.FLOAT}].concat(r),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=[1/0,1/0,-1/0,-1/0],this.currentTransform_=n,this.renderTransform_=[1,0,0,1,0,0],this.invertRenderTransform_=[1,0,0,1,0,0],this.renderInstructions_=new Float32Array(0),this.hitRenderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=function(){const e='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){const t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var f={exports:{}};function x(e,t,n){n=n||2;var r,o,i,a,s,u,f,x=t&&t.length,h=x?t[0]*n:e.length,v=l(e,0,h,n,!0),d=[];if(!v||v.next===v.prev)return d;if(x&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=l(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(A(a));for(s.sort(b),o=0;o<s.length;o++)n=g(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<h;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return c(v,d,n,r,o,f,0),d}function l(e,t,n,r,o){var i,a;if(o===P(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&F(a,a.next)&&(R(a),a=a.next),a}function h(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!F(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(R(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=w(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?d(e,r,o,i):v(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),R(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?c(e=y(h(e),t,n),t,n,r,o,i,2):2===a&&p(e,t,n,r,o,i):c(h(e),t,n,r,o,i,1);break}}}function v(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&E(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=w(c,v,t,n,r),b=w(d,y,t,n,r),g=e.prevZ,m=e.nextZ;g&&g.z>=p&&m&&m.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;m&&m.z<=b;){if(m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function y(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!F(o,i)&&T(o,r,r.next,i)&&z(o,i)&&z(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),R(r),R(r.next),r=e=i),r=r.next}while(r!==e);return h(r)}function p(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&M(a,s)){var u=U(a,s);return a=h(a,a.next),u=h(u,u.next),c(a,t,n,r,o,i,0),void c(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function b(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&E(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),z(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return h(r,r.next),h(n,n.next)}function m(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function w(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function E(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function M(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&T(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||F(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function F(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,n,r){var o=S(Z(e,t,n)),i=S(Z(e,t,r)),a=S(Z(n,r,e)),s=S(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!I(e,n,t))||(!(0!==i||!I(e,r,t))||(!(0!==a||!I(n,e,r))||!(0!==s||!I(n,t,r)))))}function I(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function z(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new B(e.i,e.x,e.y),r=new B(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new B(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}f.exports=x,f.exports.default=x,x.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(P(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};var N=u(f.exports);const _=[],O={vertexPosition:0,indexPosition:0};function q(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function L(e,t,n,r,o,i){const a=3+o,s=e[t+0],u=e[t+1],f=_;f.length=o;for(let n=0;n<f.length;n++)f[n]=e[t+2+n];let x=i?i.vertexPosition:0,l=i?i.indexPosition:0;const h=x/a;return q(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,O.vertexPosition=x,O.indexPosition=l,O}function C(e,t,n,r,o,i,s,u,f,x){const l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}const g=null!==o;let m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function G(e,t,n,r,o){const i=2+o;let a=t;const s=e.slice(a,a+o);a+=o;const u=e[a++];let f=0;const x=new Array(u-1);for(let t=0;t<u;t++)f+=e[a++],t<u-1&&(x[t]=f);const l=e.slice(a,a+2*f),h=N(l,x,2);for(let e=0;e<h.length;e++)r.push(h[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...s);return a+2*f}const j=self;j.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesSize,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);let x;for(let e=0;e<i.length;e+=r)x=L(i,e,f,u,n,x);const l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);j.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesSize,r=2,i=new Float32Array(o.renderInstructions);let a=0;const u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];let x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(let n=0;n<x-1;n++)C(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}const h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);j.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=G(r,i,e,t,n);const a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);j.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}(),this.worker_.addEventListener("message",(e=>{const t=e.data;if(t.type===ua){const i=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,oe(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):(this.renderInstructions_=new Float32Array(e.data.renderInstructions),t.id===this.lastSentId&&(this.ready=!0)),this.getLayer().changed()}})),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[S(s,Wo,this.handleSourceFeatureAdded_,this),S(s,Vo,this.handleSourceFeatureChanged_,this),S(s,jo,this.handleSourceFeatureDelete_,this),S(s,Xo,this.handleSourceFeatureClear_,this)],s.forEachFeature((e=>{this.featureCache_[M(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new class{constructor(e,t){this.helper_=e;const i=e.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){h(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return da[0]=0,da[1]=0,da[2]=0,da[3]=0,da;this.readAll();const i=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return da[0]=this.data_[4*i],da[1]=this.data_[4*i+1],da[2]=this.data_[4*i+2],da[3]=this.data_[4*i+3],da}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(e[0]*e[1]*4)}}(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[M(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[M(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[M(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const i=e.viewState.projection,n=this.getLayer().getSource().getWrapX()&&i.canWrapX(),r=i.getExtent(),s=e.extent,o=n?De(r):null,a=n?Math.ceil((s[2]-r[2])/o)+1:1,l=n?Math.floor((s[0]-r[0])/o):0;let h=l;const c=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(e,this.currentTransform_),re(this.currentTransform_,h*o,0),ee(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.drawElements(0,c)}while(++h<a);this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const d=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(e,l,a,o),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),d}prepareFrameInternal(e){const t=this.getLayer(),i=t.getSource(),n=e.viewState,r=!e.viewHints[0]&&!e.viewHints[1],s=!xe(this.previousExtent_,e.extent),o=this.sourceRevision_<i.getRevision();if(o&&(this.sourceRevision_=i.getRevision()),r&&(s||o)){const r=n.projection,s=n.resolution,o=t instanceof js?t.getRenderBuffer():0,a=de(e.extent,o*s);i.loadFeatures(a,s,r),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=[1,0,0,1,0,0];this.helper.makeProjectionTransform(e,t);const i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){const e=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===e||(this.hitRenderInstructions_=new Float32Array(e))}let n,r;const s=[],o=[];let a,l=0,h=0;for(const e in this.featureCache_){if(n=this.featureCache_[e],r=n.geometry,!r||"Point"!==r.getType())continue;let i;s[0]=r.getFlatCoordinates()[0],s[1]=r.getFlatCoordinates()[1],ie(t,s),a=fa(h+6,o),this.renderInstructions_[l++]=s[0],this.renderInstructions_[l++]=s[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=s[0],this.hitRenderInstructions_[h++]=s[1],this.hitRenderInstructions_[h++]=a[0],this.hitRenderInstructions_[h++]=a[1],this.hitRenderInstructions_[h++]=a[2],this.hitRenderInstructions_[h++]=a[3],this.hitRenderInstructions_[h++]=Number(e));for(let e=0;e<this.customAttributes.length;e++)i=this.customAttributes[e].callback(n.feature,n.properties),this.renderInstructions_[l++]=i,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=i)}const c={id:++this.lastSentId,type:ua,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:this.customAttributes.length};if(c.projectionTransform=t,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){const e={id:0,type:ua,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesSize:5+this.customAttributes.length};e.projectionTransform=t,e.hitDetection=!0,this.worker_.postMessage(e,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}forEachFeatureAtCoordinate(e,t,i,n,r){if(J(this.hitDetectionEnabled_,66),!this.hitRenderInstructions_)return;const s=ie(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=function(e){let t=0;const i=256,n=255;return t+=Math.round(e[0]*i*i*i*n),t+=Math.round(e[1]*i*i*n),t+=Math.round(e[2]*i*n),t+=Math.round(e[3]*n),t}([o[0]/255,o[1]/255,o[2]/255,o[3]/255]),l=this.hitRenderInstructions_[a],h=Math.floor(l).toString(),c=this.getLayer().getSource().getFeatureByUid(h);return c?n(c,this.getLayer(),null):void 0}renderHitDetection(e,t,i,n){if(!this.hitVerticesBuffer_.getSize())return;let r=t;this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_,e),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),re(this.currentTransform_,r*n,0),ee(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e);const t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}while(++r<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){C(e)})),this.sourceListenKeys_=null,super.disposeInternal()}},pa="blur",ma="gradient",_a="radius",ya=["#00f","#0ff","#0f0","#ff0","#f00"],va=class extends js{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(ma,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:ya),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8);const i=e.weight?e.weight:"weight";this.weightFunction_="string"==typeof i?function(e){return e.get(i)}:i,this.setRenderOrder(null)}getBlur(){return this.get(pa)}getGradient(){return this.get(ma)}getRadius(){return this.get(_a)}handleGradientChanged_(){this.gradient_=function(e){const t=fn(1,256),i=t.createLinearGradient(0,0,1,256),n=1/(e.length-1);for(let t=0,r=e.length;t<r;++t)i.addColorStop(t*n,e[t]);return t.fillStyle=i,t.fillRect(0,0,1,256),t.canvas}(this.getGradient())}setBlur(e){this.set(pa,e)}setGradient(e){this.set(ma,e)}setRadius(e){this.set(_a,e)}createRenderer(){return new ga(this,{className:this.getClassName(),attributes:[{name:"weight",callback:e=>{const t=this.weightFunction_(e);return void 0!==t?Be(t,0,1):1}}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:()=>2*(this.get(_a)+this.get(pa)),u_blurSlope:()=>this.get(_a)/Math.max(1,this.get(pa))},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}},xa=class extends A{constructor(e){e=e||{},super();var t,i=this.input=e.input;i||(i=this.input=document.createElement("INPUT"),e.type&&i.setAttribute("type",e.type),void 0!==e.min&&i.setAttribute("min",e.min),void 0!==e.max&&i.setAttribute("max",e.max),void 0!==e.step&&i.setAttribute("step",e.step),e.parent&&e.parent.appendChild(i)),e.disabled&&(i.disabled=!0),void 0!==e.checked&&(i.checked=!!e.checked),void 0!==e.val&&(i.value=e.val),e.hidden&&(i.style.display="none"),i.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),i.addEventListener("focusout",function(){this.element&&(t&&clearTimeout(t),t=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(e,t){var i=function(i){this.moving=!0,this.element.classList.add("ol-moving");var n=function(i){"pointerup"===i.type&&(document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",n),document.removeEventListener("pointercancel",n),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),i.target===e&&t(i),i.stopPropagation(),i.preventDefault()}.bind(this);document.addEventListener("pointermove",n,!1),document.addEventListener("pointerup",n,!1),document.addEventListener("pointercancel",n,!1),i.stopPropagation(),i.preventDefault()}.bind(this);e.addEventListener("mousedown",i,!1),e.addEventListener("touchstart",i,!1)}setValue(e){void 0!==e&&(this.input.value=e),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},ba=class extends xa{constructor(e){super(e=e||{});var t=this.element=document.createElement("LABEL");e.html instanceof Element?t.appendChild(e.html):void 0!==e.html&&(t.innerHTML=e.html),t.className=("ol-ext-check ol-ext-checkbox "+(e.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(document.createElement("SPAN")),e.after&&t.appendChild(document.createTextNode(e.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},wa=class extends ba{constructor(e){super(e=e||{}),this.element.className=("ol-ext-toggle-switch "+(e.className||"")).trim()}},Sa=class extends ba{constructor(e){super(e=e||{}),this.element.className=("ol-ext-check ol-ext-radio "+(e.className||"")).trim()}};var Ea={create:function(e,t){var i;if(t=t||{},"TEXT"===e)i=document.createTextNode(t.html||""),t.parent&&t.parent.appendChild(i);else for(var n in i=document.createElement(e),/button/i.test(e)&&i.setAttribute("type","button"),t)switch(n){case"className":t.className&&t.className.trim&&i.setAttribute("class",t.className.trim());break;case"text":i.innerText=t.text;break;case"html":t.html instanceof Element?i.appendChild(t.html):void 0!==t.html&&(i.innerHTML=t.html);break;case"parent":t.parent&&t.parent.appendChild(i);break;case"options":if(/select/i.test(e))for(var r in t.options)Ea.create("OPTION",{html:r,value:t.options[r],parent:i});break;case"style":Ea.setStyle(i,t.style);break;case"change":case"click":Ea.addListener(i,n,t[n]);break;case"on":for(var s in t.on)Ea.addListener(i,s,t.on[s]);break;case"checked":i.checked=!!t.checked;break;default:i.setAttribute(n,t[n])}return i},createSwitch:function(e){var t=Ea.create("INPUT",{type:"checkbox",on:e.on,click:e.click,change:e.change,parent:e.parent}),i=Object.assign({input:t},e||{});return new wa(i),t},createCheck:function(e){var t=Ea.create("INPUT",{name:e.name,type:"radio"===e.type?"radio":"checkbox",on:e.on,parent:e.parent}),i=Object.assign({input:t},e||{});return"radio"===e.type?new Sa(i):new ba(i),t},setHTML:function(e,t){t instanceof Element?e.appendChild(t):void 0!==t&&(e.innerHTML=t)},appendText:function(e,t){e.appendChild(document.createTextNode(t||""))},addListener:function(e,t,i,n){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.addEventListener(t,i,n)}))},removeListener:function(e,t,i){"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.removeEventListener(t,i)}))},show:function(e){e.style.display=""},hide:function(e){e.style.display="none"},hidden:function(e){return"none"===Ea.getStyle(e,"display")},toggle:function(e){e.style.display="none"===e.style.display?"":"none"},setStyle:function(e,t){for(var i in t)switch(i){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"==typeof t[i]?e.style[i]=t[i]+"px":e.style[i]=t[i];break;default:e.style[i]=t[i]}},getStyle:function(e,t){var i,n=(e.ownerDocument||document).defaultView;if(n&&n.getComputedStyle)t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),i=n.getComputedStyle(e,null).getPropertyValue(t);else if(e.currentStyle&&(t=t.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()})),i=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(i)))return function(t){var i=e.style.left,n=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=i,e.runtimeStyle.left=n,t}(i);return/px$/.test(i)?parseInt(i):i},outerHeight:function(e){return e.offsetHeight+Ea.getStyle(e,"marginBottom")},outerWidth:function(e){return e.offsetWidth+Ea.getStyle(e,"marginLeft")},offsetRect:function(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}},getFixedOffset:function(e){var t={left:0,top:0},i=function(e){if(!e)return t;if("absolute"===Ea.getStyle(e,"position")&&"none"!==Ea.getStyle(e,"transform")){var n=e.getBoundingClientRect();return t.left+=n.left,t.top+=n.top,t}return i(e.offsetParent)};return i(e.offsetParent)},positionRect:function(e,t){var i=0,n=0,r=function(s){if(s)return i+=s.offsetLeft,n+=s.offsetTop,r(s.offsetParent);var o={top:e.offsetTop+n,left:e.offsetLeft+i};return t&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+e.offsetHeight,o.right=o.top+e.offsetWidth,o};return r(e.offsetParent)},scrollDiv:function(e,t){var i,n,r,s,o,a=!1,l=0,h=0,c="function"==typeof(t=t||{}).onmove?t.onmove:function(){},d=t.vertical?"screenY":"screenX",u=t.vertical?"scrollTop":"scrollLeft",f=!1,g=0,p=function(){o&&(g++,setTimeout(m))},m=function(){if(o){if(--g)return;var t=e.clientHeight,i=e.scrollHeight;n=t/i,o.style.height=100*n+"%",o.style.top=e.scrollTop/i*100+"%",s.style.height=t+"px",t>i-.5?s.classList.add("ol-100pc"):s.classList.remove("ol-100pc")}},_=function(t){t.target.classList.contains("ol-noscroll")||(f=!1,a=t[d],h=new Date,e.classList.add("ol-move"),t.preventDefault(),window.addEventListener("pointermove",y),Ea.addListener(window,["pointerup","pointercancel"],b))},y=function(t){if(!1!==a){var s=(r?-1/n:1)*(a-t[d]);f=f||Math.round(s),e[u]+=s,(i=new Date)-h&&(l=(l+s/(i-h))/2),a=t[d],h=i,s&&c(!0)}else f=!0},v=function(t){var i=t>0?Math.min(100,t/2):Math.max(-100,t/2);t-=i,e[u]+=i,-1<t&&t<1?(f?setTimeout((function(){e.classList.remove("ol-move")})):e.classList.remove("ol-move"),f=!1,c(!1)):setTimeout((function(){v(t)}),40)};if(t.vertical&&t.minibar){var x=function(i){e.removeEventListener("pointermove",x),e.parentNode.classList.add("ol-miniscroll"),o=Ea.create("DIV"),s=Ea.create("DIV",{className:"ol-scroll",html:o}),e.parentNode.insertBefore(s,e),o.addEventListener("pointerdown",(function(e){r=!0,_(e)})),t.mousewheel&&(Ea.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){w(e)})),Ea.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],(function(e){w(e)}))),e.parentNode.addEventListener("pointerenter",p),window.addEventListener("resize",p),!1!==i&&p()};e.parentNode?x(!1):e.addEventListener("pointermove",x),e.addEventListener("scroll",(function(){p()}))}e.style["touch-action"]="none",e.style.overflow="hidden",e.classList.add("ol-scrolldiv"),Ea.addListener(e,["pointerdown"],(function(e){r=!1,_(e)})),e.addEventListener("click",(function(t){e.classList.contains("ol-move")&&(t.preventDefault(),t.stopPropagation())}),!0);var b=function(i){(h=new Date-h)>100||r?l=0:h>0&&(l=((l||0)+(a-i[d])/h)/2),v(!1===t.animate?0:200*l),a=!1,l=0,h=0,e.classList.contains("ol-move")?e.classList.remove("ol-hasClick"):(e.classList.add("ol-hasClick"),setTimeout((function(){e.classList.remove("ol-hasClick")}),500)),r=!1,window.removeEventListener("pointermove",y),Ea.removeListener(window,["pointerup","pointercancel"],b)},w=function(t){var i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return e.classList.add("ol-move"),e[u]-=30*i,e.classList.remove("ol-move"),!1};return t.mousewheel&&Ea.addListener(e,["mousewheel","DOMMouseScroll","onmousewheel"],w),{refresh:p}},dispatchEvent:function(e,t){var i;try{i=new CustomEvent(e)}catch(t){(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{})}t.dispatchEvent(i)}};const Ca=Ea;var Ta=class extends sr{constructor(e){e=e||{};var t=Ca.create("DIV",{className:e.switcherClass||"ol-layerswitcher"});super({element:t,target:e.target});var i=this;this.dcount=0,this.show_progress=e.show_progress,this.oninfo="function"==typeof e.oninfo?e.oninfo:null,this.onextent="function"==typeof e.onextent?e.onextent:null,this.hasextent=e.extent||e.onextent,this.hastrash=e.trash,this.reordering=!1!==e.reordering,this._layers=[],this._layerGroup=e.layerGroup&&e.layerGroup.getLayers?e.layerGroup:null,this.onchangeCheck="function"==typeof e.onchangeCheck?e.onchangeCheck:null,"function"==typeof e.displayInLayerSwitcher&&(this.displayInLayerSwitcher=e.displayInLayerSwitcher),e.target||(t.classList.add("ol-unselectable"),t.classList.add("ol-control"),t.classList.add(!1!==e.collapsed?"ol-collapsed":"ol-forceopen"),this.button=Ca.create("BUTTON",{type:"button",parent:t}),this.button.addEventListener("touchstart",(function(e){t.classList.toggle("ol-forceopen"),t.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:t.classList.contains("ol-collapsed")}),e.preventDefault(),i.overflow()})),this.button.addEventListener("click",(function(){t.classList.toggle("ol-forceopen"),t.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!t.classList.contains("ol-forceopen")}),i.overflow()})),e.mouseover&&(t.addEventListener("mouseleave",(function(){t.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})})),t.addEventListener("mouseover",(function(){t.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})}))),e.minibar&&(e.noScroll=!0),e.noScroll||(this.topv=Ca.create("DIV",{className:"ol-switchertopdiv",parent:t,click:function(){i.overflow("+50%")}}),this.botv=Ca.create("DIV",{className:"ol-switcherbottomdiv",parent:t,click:function(){i.overflow("-50%")}})),this._noScroll=e.noScroll),this.panel_=Ca.create("UL",{className:"panel"}),this.panelContainer_=Ca.create("DIV",{className:"panel-container",html:this.panel_,parent:t}),e.target||e.noScroll||Ca.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(e){i.overflow(Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)))&&(e.stopPropagation(),e.preventDefault())})),this.header_=Ca.create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",e.drawDelay||0),this.set("selection",e.selection),e.minibar&&setTimeout(function(){var e=Ca.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){e.refresh()}))}.bind(this))}displayInLayerSwitcher(e){return!1!==e.get("displayInLayerSwitcher")}setMap(e){if(super.setMap(e),this.drawPanel(),this._listener)for(var t in this._listener)R(this._listener[t]);this._listener=null,e&&(this._listener={moveend:e.on("moveend",this.viewChange.bind(this)),size:e.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=e.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(e){Ca.setHTML(this.header_,e)}overflow(e){if(this.button&&!this._noScroll){if(Ca.hidden(this.panel_))return void Ca.setStyle(this.element,{height:"auto"});var t=Ca.outerHeight(this.element),i=Ca.outerHeight(this.panel_),n=this.button.offsetTop+Ca.outerHeight(this.button),r=this.panel_.offsetTop-n;if(i>t-n){Ca.setStyle(this.element,{height:"100%"});var s=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],o=s?2*Ca.getStyle(s,"height"):0;switch(e){case 1:r+=o;break;case-1:r-=o;break;case"+50%":r+=Math.round(t/2);break;case"-50%":r-=Math.round(t/2)}return r+i<=t-3*n/2?(r=t-3*n/2-i,Ca.hide(this.botv)):Ca.show(this.botv),r>=0?(r=0,Ca.hide(this.topv)):Ca.show(this.topv),Ca.setStyle(this.panel_,{top:r+"px"}),!0}return Ca.setStyle(this.element,{height:"auto"}),Ca.setStyle(this.panel_,{top:0}),Ca.hide(this.botv),Ca.hide(this.topv),!1}return!1}_setLayerForLI(e,t){var i=[];t.getLayers&&i.push(t.getLayers().on("change:length",this.drawPanel.bind(this))),e&&(i.push(t.on("change:opacity",function(){this.setLayerOpacity(t,e)}.bind(this))),i.push(t.on("change:visible",function(){this.setLayerVisibility(t,e)}.bind(this)))),i.push(t.on("propertychange",function(e){"displayInLayerSwitcher"!==e.key&&"openInLayerSwitcher"!==e.key&&"title"!==e.key&&"name"!==e.key||this.drawPanel(e)}.bind(this))),this._layers.push({li:e,layer:t,listeners:i})}setLayerOpacity(e,t){var i=t.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*e.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:e})}setLayerVisibility(e,t){var i=t.querySelector(".ol-visibility");i&&(i.checked=e.getVisible()),e.getVisible()?t.classList.add("ol-visible"):t.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:e})}_clearLayerForLI(){this._layers.forEach((function(e){e.listeners.forEach((function(e){R(e)}))})),this._layers=[]}_getLayerForLI(e){for(var t,i=0;t=this._layers[i];i++)if(t.li===e)return t.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach(function(e){var t=this._getLayerForLI(e);t&&(this.testLayerVisibility(t)?e.classList.remove("ol-layer-hidden"):e.classList.add("ol-layer-hidden"))}.bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var e=this;this.dcount++,setTimeout((function(){e.drawPanel_()}),this.get("drawDelay")||0)}}drawPanel_(){if(! --this.dcount&&!this.dragging_){var e=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(e){e.classList.contains("ol-header")||e.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=e}}switchLayerVisibility(e,t){e.get("baseLayer")?(e.getVisible()||e.setVisible(!0),t.forEach((function(t){e!==t&&t.get("baseLayer")&&t.getVisible()&&t.setVisible(!1)}))):e.setVisible(!e.getVisible())}testLayerVisibility(e){if(!this.getMap())return!0;var t=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(e.getMaxResolution()<=t||e.getMinResolution()>=t)return!1;if(e.getMinZoom&&(e.getMinZoom()>=i||e.getMaxZoom()<i))return!1;var n=e.getExtent();return!n||Oe(this.getMap().getView().calculateExtent(this.getMap().getSize()),n)}dragOrdering_(e){e.stopPropagation(),e.preventDefault();var t,i,n,r,s,o=this,a=e.currentTarget.parentNode.parentNode,l=!0,h=this.panel_,c=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY;function d(e){if(t=e.pageY||e.touches&&e.touches.length&&e.touches[0].pageY||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageY,l&&Math.abs(c-t)>2&&(l=!1,a.classList.add("drag"),r=o._getLayerForLI(a),i=!1,s=o._getLayerForLI(a.parentNode.parentNode),n=Ca.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:Ca.outerWidth(a),height:Ca.getStyle(a,"height")},parent:h}),o.element.classList.add("drag"),o.dispatchEvent({type:"reorder-start",layer:r,group:s})),!l){var d;for(e.preventDefault(),e.stopPropagation(),Ca.setStyle(n,{top:t-Ca.offsetRect(h).top+h.scrollTop+5}),(d=e.touches?document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY):e.target).classList.contains("ol-switcherbottomdiv")?o.overflow(-1):d.classList.contains("ol-switchertopdiv")&&o.overflow(1);d&&"LI"!==d.tagName;)d=d.parentNode;d&&d.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(e){e.classList.remove("dropover"),e.classList.remove("dropover-after"),e.classList.remove("dropover-before")})),d&&d.parentNode.classList.contains("drag")&&d!==a?((i=o._getLayerForLI(d))&&!i.get("allwaysOnTop")==!r.get("allwaysOnTop")?(d.classList.add("dropover"),d.classList.add(a.offsetTop<d.offsetTop?"dropover-after":"dropover-before")):i=!1,Ca.show(n)):(i=!1,d===a?Ca.hide(n):Ca.show(n)),i?n.classList.remove("forbidden"):n.classList.add("forbidden")}}a.parentNode.classList.add("drag"),Ca.addListener(document,"mousemove touchmove",d),Ca.addListener(document,"mouseup touchend touchcancel",(function e(){if(i){var t=r,l=o.getSelection()===t;if(t&&i){for(var h,c=(h=s?s.getLayers():o._layerGroup?o._layerGroup.getLayers():o.getMap().getLayers()).getArray(),u=0;u<c.length;u++)if(c[u]==t){h.removeAt(u);break}for(var f=0;f<c.length;f++)if(c[f]===i){u>f?h.insertAt(f,t):h.insertAt(f+1,t);break}}l&&o.selectLayer(t),o.dispatchEvent({type:"reorder-end",layer:t,group:s})}a.parentNode.querySelectorAll("li").forEach((function(e){e.classList.remove("dropover"),e.classList.remove("dropover-after"),e.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),o.element.classList.remove("drag"),n&&n.remove(),Ca.removeListener(document,"mousemove touchmove",d),Ca.removeListener(document,"mouseup touchend touchcancel",e)}))}dragOpacity_(e){e.stopPropagation(),e.preventDefault();var t=this,i=e.target,n=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(n){var r=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,s=Ca.getStyle(i,"left")-r;t.dragging_=!0,Ca.addListener(document,"mouseup touchend touchcancel",(function e(){Ca.removeListener(document,"mouseup touchend touchcancel",e),Ca.removeListener(document,"mousemove touchmove",o),t.dragging_=!1})),Ca.addListener(document,"mousemove touchmove",o)}function o(e){var t=e.pageX||e.touches&&e.touches.length&&e.touches[0].pageX||e.changedTouches&&e.changedTouches.length&&e.changedTouches[0].pageX,r=(s+t)/Ca.getStyle(i.parentNode,"width"),o=Math.max(0,Math.min(1,r));Ca.setStyle(i,{left:100*o+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*o),n.setOpacity(o)}}drawList(e,t){var i=this,n=t.getArray(),r=function(e){e.stopPropagation(),e.preventDefault();var n=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(n,t),i.get("selection")&&n.getVisible()&&i.selectLayer(n),i.onchangeCheck&&i.onchangeCheck(n)};function s(e){e.stopPropagation(),e.preventDefault();var t=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(t),i.dispatchEvent({type:"info",layer:t})}function o(e){e.stopPropagation(),e.preventDefault();var t=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(t):i.getMap().getView().fit(t.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:t})}function a(e){e.stopPropagation(),e.preventDefault();var t,n=this.parentNode.parentNode.parentNode.parentNode,r=i._getLayerForLI(n);r?(t=i._getLayerForLI(this.parentNode.parentNode),r.getLayers().remove(t),0!=r.getLayers().getLength()||r.get("noSwitcherDelete")||a.call(n.querySelectorAll(".layerTrash")[0],e)):(n=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(n)))}function l(t){if(this.displayInLayerSwitcher(t)){var l=Ca.create("LI",{className:(t.getVisible()?"ol-visible ":" ")+(t.get("baseLayer")?"baselayer":""),parent:e});this._setLayerForLI(l,t),this._selectedLayer===t&&l.classList.add("ol-layer-select");var c=Ca.create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),d=Ca.create("DIV",{className:"li-content",parent:l});Ca.create("INPUT",{type:t.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:t.getVisible(),click:r,parent:d});var u=Ca.create("LABEL",{title:t.get("title")||t.get("name"),click:r,style:{userSelect:"none"},parent:d});if(u.addEventListener("selectstart",(function(){return!1})),Ca.create("SPAN",{html:t.get("title")||t.get("name"),click:function(e){this.get("selection")&&(e.stopPropagation(),this.selectLayer(t))}.bind(this),parent:u}),this.reordering&&(h<n.length-1&&(t.get("allwaysOnTop")||!n[h+1].get("allwaysOnTop"))||h>0&&(!t.get("allwaysOnTop")||n[h-1].get("allwaysOnTop")))&&Ca.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(e){i.dragOrdering_(e)}},parent:c}),t.getLayers){var f=0;t.getLayers().forEach((function(e){i.displayInLayerSwitcher(e)&&f++})),f&&Ca.create("DIV",{className:t.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var e=i._getLayerForLI(this.parentNode.parentNode);e.set("openInLayerSwitcher",!e.get("openInLayerSwitcher"))},parent:c})}if(this.oninfo&&Ca.create("DIV",{className:"layerInfo",title:this.tip.info,click:s,parent:c}),this.hastrash&&!t.get("noSwitcherDelete")&&Ca.create("DIV",{className:"layerTrash",title:this.tip.trash,click:a,parent:c}),this.hasextent&&n[h].getExtent()){var g=n[h].getExtent();4==g.length&&g[0]<g[2]&&g[1]<g[3]&&Ca.create("DIV",{className:"layerExtent",title:this.tip.extent,click:o,parent:c})}if(this.show_progress&&t instanceof gs){var p=Ca.create("DIV",{className:"layerswitcher-progress",parent:d});this.setprogress_(t),t.layerswitcher_progress=Ca.create("DIV",{parent:p})}var m=Ca.create("DIV",{className:"layerswitcher-opacity",click:function(e){if(e.target===this){e.stopPropagation(),e.preventDefault();var t=Math.max(0,Math.min(1,e.offsetX/Ca.getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(t),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*t)}},parent:d});if(Ca.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*t.getOpacity()+"%"},on:{"mousedown touchstart":function(e){i.dragOpacity_(e)}},parent:m}),Ca.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*t.getOpacity()),parent:d}),t.getLayers&&(l.classList.add("ol-layer-group"),!0===t.get("openInLayerSwitcher"))){var _=Ca.create("UL",{parent:l});this.drawList(_,t.getLayers())}l.classList.add(this.getLayerClass(t)),this.dispatchEvent({type:"drawlist",layer:t,li:l})}else this._setLayerForLI(null,t)}for(var h=n.length-1;h>=0;h--)l.call(this,n[h]);this.viewChange(),e===this.panel_&&this.overflow()}getLayerClass(e){return e?e.getLayers?"ol-layer-group":e instanceof Fo?"ol-layer-vector":e instanceof zo?"ol-layer-vectortile":e instanceof gs?"ol-layer-tile":e instanceof Uo?"ol-layer-image":e instanceof va?"ol-layer-heatmap":e.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(e,t){if(!e){if(!this.getMap())return;e=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=e,this.drawPanel(),t||this.dispatchEvent({type:"select",layer:e})}getSelection(){return this._selectedLayer}setprogress_(e){if(!e.layerswitcher_progress){var t=0,i=0,n=function(){i===t?(i=t=0,Ca.setStyle(e.layerswitcher_progress,{width:0})):Ca.setStyle(e.layerswitcher_progress,{width:(t/i*100).toFixed(1)+"%"})};e.getSource().on("tileloadstart",(function(){i++,n()})),e.getSource().on("tileloadend",(function(){t++,n()})),e.getSource().on("tileloaderror",(function(){t++,n()}))}}};Ta.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};const Ra=Ta,Ia=class{constructor(e){this.rbush_=new ps(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[M(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,r=t.length;n<r;n++){const r=e[n],s=t[n],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};i[n]=o,this.items_[M(s)]=o}this.rbush_.load(i)}remove(e){const t=M(e),i=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(i)}update(e,t){const i=this.items_[M(t)];xe([i.minX,i.minY,i.maxX,i.maxY],e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map((function(e){return e.value}))}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map((function(e){return e.value}))}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,r=e.length;n<r;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return g(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return ye(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}};function La(e){return e?Array.isArray(e)?function(t){return e}:"function"==typeof e?e:function(t){return[e]}:null}const ka=class extends A{constructor(e){super(),this.projection=jt(e.projection),this.attributions_=La(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:"ready",this.wrapX_=void 0!==e.wrapX&&e.wrapX,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise((function(e,i){t.viewResolver=e,t.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=La(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Ma(e,t){return[[-1/0,-1/0,1/0,1/0]]}function Pa(e,t){return function(i,n,r,s,o){const a=this;!function(e,t,i,n,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof e?e(i,n,r):e,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(e){if(!a.status||a.status>=200&&a.status<300){const e=t.getType();let n;"json"==e||"text"==e?n=a.responseText:"xml"==e?(n=a.responseXML,n||(n=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==e&&(n=a.response),n?s(t.readFeatures(n,{extent:i,featureProjection:r}),t.readProjection(n)):o()}else o()},a.onerror=o,a.send()}(e,t,i,n,r,(function(e,t){a.addFeatures(e),void 0!==s&&s(e)}),o||u)}}class Aa extends t{constructor(e,t,i){super(e),this.feature=t,this.features=i}}const Fa=class extends ka{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX}),this.on,this.once,this.un,this.loader_=u,this.format_=e.format,this.overlaps_=void 0===e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(J(this.format_,7),this.loader_=Pa(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:Ma;const t=void 0===e.useSpatialIndex||e.useSpatialIndex;let i,n;this.featuresRtree_=t?new Ia:null,this.loadedExtentsRtree_=new Ia,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),t||void 0!==i||(i=new U(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=M(e);if(!this.addToIndex_(t,e))return void(this.featuresCollection_&&this.featuresCollection_.remove(e));this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const t=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(t,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Aa(Wo,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[S(t,m,this.handleFeatureChange_,this),S(t,n,this.handleFeatureChange_,this)]}addToIndex_(e,t){let i=!0;const n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=t),i&&(J(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let t=0,n=e.length;t<n;t++){const n=e[t],r=M(n);this.addToIndex_(r,n)&&i.push(n)}for(let e=0,r=i.length;e<r;e++){const r=i[e],s=M(r);this.setupChangeEvents_(s,r);const o=r.getGeometry();if(o){const e=o.getExtent();t.push(e),n.push(r)}else this.nullGeometryFeatures_[s]=r}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(Wo))for(let e=0,t=i.length;e<t;e++)this.dispatchEvent(new Aa(Wo,i[e]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Wo,(function(i){t||(t=!0,e.push(i.feature),t=!1)})),this.addEventListener(jo,(function(i){t||(t=!0,e.remove(i.feature),t=!1)})),e.addEventListener(N,(e=>{t||(t=!0,this.addFeature(e.element),t=!1)})),e.addEventListener(z,(e=>{t||(t=!0,this.removeFeature(e.element),t=!1)})),this.featuresCollection_=e}clear(e){if(e){for(const e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(C);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const e=e=>{this.removeFeatureInternal(e)};this.featuresRtree_.forEach(e);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Aa(Xo);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,(function(i){if(i.getGeometry().intersectsCoordinate(e))return t(i)}))}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,(function(i){if(i.getGeometry().intersectsExtent(e)){const e=t(i);if(e)return e}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),g(this.nullGeometryFeatures_)||l(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,(function(e){t.push(e)})),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=function(e,t){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[i[0],e[1],i[2],e[3]]];ze(e,t);const n=De(i);if(De(e)>n)return[[i[0],e[1],i[2],e[3]]];if(e[0]<i[0])return[[e[0]+n,e[1],i[2],e[3]],[i[0],e[1],e[2],e[3]]];if(e[2]>i[2])return[[e[0],e[1],i[2],e[3]],[i[0],e[1],e[2]-n,e[3]]]}return[e]}(e,t);return[].concat(...i.map((e=>this.featuresRtree_.getInExtent(e))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return t=t||c,this.featuresRtree_.forEachInExtent(a,(function(e){if(t(e)){const t=e.getGeometry(),l=o;if(o=t.closestPointXY(i,n,s,o),o<l){r=e;const t=Math.sqrt(o);a[0]=i-t,a[1]=n-t,a[2]=i+t,a[3]=n+t}}})),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return void 0!==t?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return void 0!==t?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=M(t),n=t.getGeometry();if(n){const e=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(e,t)):this.featuresRtree_&&this.featuresRtree_.update(e,t)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);const r=t.getId();if(void 0!==r){const e=r.toString();this.idIndex_[e]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[e]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Aa(Vo,t))}hasFeature(e){const t=e.getId();return void 0!==t?t in this.idIndex_:M(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&g(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,r=this.strategy_(e,t,i);for(let e=0,s=r.length;e<s;++e){const s=r[e];n.forEachInExtent(s,(function(e){return pe(e.extent,s)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new Aa("featuresloadstart")),this.loader_.call(this,s,t,i,(e=>{--this.loadingExtentsCount_,this.dispatchEvent(new Aa("featuresloadend",void 0,e))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Aa("featuresloaderror"))})),n.insert(s,{extent:s.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,(function(t){if(xe(t.extent,e))return i=t,!0})),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=M(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=M(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(C),delete this.featureChangeKeys_[t];const n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new Aa(jo,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){J(this.format_,7),this.url_=e,this.setLoader(Pa(e,this.format_))}},Da="element",Oa="map",Na="offset",za="position",Ba="positioning",Ga=class extends A{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Da,this.handleElementChanged),this.addChangeListener(Oa,this.handleMapChanged),this.addChangeListener(Na,this.handleOffsetChanged),this.addChangeListener(za,this.handlePositionChanged),this.addChangeListener(Ba,this.handlePositioningChanged),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),void 0!==e.position&&this.setPosition(e.position)}getElement(){return this.get(Da)}getId(){return this.id}getMap(){return this.get(Oa)||null}getOffset(){return this.get(Na)}getPosition(){return this.get(za)}getPositioning(){return this.get(Ba)}handleElementChanged(){xn(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(vn(this.element),C(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=S(e,Hn,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Da,e)}setMap(e){this.set(Oa,e)}setOffset(e){this.set(Na,e)}setPosition(e){this.set(za,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(za))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),r=this.getRect(n,[pn(n),mn(n)]),s=void 0===(e=e||{}).margin?20:e.margin;if(!pe(i,r)){const n=r[0]-i[0],o=i[2]-r[2],a=r[1]-i[1],l=i[3]-r[3],h=[0,0];if(n<0?h[0]=n-s:o<0&&(h[0]=Math.abs(o)+s),a<0?h[1]=a-s:l<0&&(h[1]=Math.abs(l)+s),0!==h[0]||0!==h[1]){const i=t.getView().getCenterInternal(),n=t.getPixelFromCoordinateInternal(i);if(!n)return;const r=[n[0]+h[0],n[1]+h[1]],s=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(r),duration:s.duration,easing:s.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+t[0],r+t[1]]}setPositioning(e){this.set(Ba,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let s="0%",o="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?o="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(o="-50%");const a=`translate(${s}, ${o}) translate(${Math.round(e[0]+n[0])+"px"}, ${Math.round(e[1]+n[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}},Ua=class extends Ga{constructor(e){e=e||{};var t=document.createElement("div");e.element=t,super(e),"number"==typeof e.offsetBox?this.offsetBox=[e.offsetBox,e.offsetBox,e.offsetBox,e.offsetBox]:this.offsetBox=e.offsetBox,this.closeBox=e.closeBox,this.onclose=e.onclose,this.onshow=e.onshow,Ca.create("BUTTON",{className:"closeBox"+(e.closeBox?" hasclosebox":""),type:"button",click:function(){this.hide()}.bind(this),parent:t}),!1!==e.anchor&&Ca.create("DIV",{className:"anchor",parent:t}),this.content=Ca.create("DIV",{html:e.html||"",className:"ol-popup-content",parent:t}),e.minibar&&Ca.scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),e.stopEvent&&(t.addEventListener("mousedown",(function(e){e.stopPropagation()})),t.addEventListener("touchstart",(function(e){e.stopPropagation()}))),this._elt=t,this.setPositioning(e.positioning||"auto"),this.setPopupClass(e.popupClass||e.className||"default"),e.anim&&this.addPopupClass("anim"),e.position&&setTimeout(function(){this.show(e.position)}.bind(this))}getClassPositioning(){var e="",t=this.getPositioning();return/bottom/.test(t)&&(e+="ol-popup-bottom "),/top/.test(t)&&(e+="ol-popup-top "),/left/.test(t)&&(e+="ol-popup-left "),/right/.test(t)&&(e+="ol-popup-right "),/^center/.test(t)&&(e+="ol-popup-middle "),/center$/.test(t)&&(e+="ol-popup-center "),e}setClosebox(e){this.closeBox=e,e?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(e){var t=["ol-popup"];this.getVisible()&&t.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter((function(e){return e.length>0}));e?e.split(" ").filter((function(e){return e.length>0})).forEach((function(e){t.push(e)})):t.push("default"),i.forEach((function(e){t.push(e)})),this.closeBox&&t.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,t)}addPopupClass(e){this.element.classList.add(e)}removePopupClass(e){this.element.classList.remove(e)}setPositioning(e){void 0!==e&&(/auto/.test(e)?(this.autoPositioning=e.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(e=e.replace(/auto/g,"center"))&&(e="bottom-center"),this.setPositioning_(e))}setPositioning_(e){if(this.element){super.setPositioning(e),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var t=this.getClassPositioning().split(" ").filter((function(e){return e.length>0}));this.element.classList.add.apply(this.element.classList,t)}}getVisible(){return this.element.classList.contains("visible")}show(e,t){t||"string"!=typeof e||(t=e,e=null),!0===e&&(e=this.getPosition());var i=this,n=this.getMap();if(n&&(t&&t!==this.prevHTML&&(this.prevHTML=t,this.content.innerHTML="",t instanceof Element?this.content.appendChild(t):Ca.create("DIV",{html:t,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach((function(e){e.addEventListener("load",(function(){try{n.renderSync()}catch(e){}i.content.dispatchEvent(new Event("scroll"))}))}))),e)){if(this.autoPositioning){var r=n.getPixelFromCoordinate(e),s=n.getSize(),o=[];"auto"==this.autoPositioning[0]?o[0]=r[1]<s[1]/3?"top":"bottom":o[0]=this.autoPositioning[0],o[1]=r[0]<2*s[0]/3?"left":"right",this.setPositioning_(o[0]+"-"+o[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==o[1]?2:0],this.offsetBox["top"==o[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(e),this.element.parentElement.style.display="","function"==typeof this.onshow&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout((function(){i.element.classList.add("visible")}),0)}}hide(){null!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}};var Wa=Object.prototype.toString,Va=Array.isArray||function(e){return"[object Array]"===Wa.call(e)};function Xa(e){return"function"==typeof e}function ja(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Ya(e,t){return null!=e&&"object"==typeof e&&t in e}var Za=RegExp.prototype.test,Ka=/\S/;var Ha={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},qa=/\s*/,Ja=/\s+/,$a=/\s*=/,Qa=/\s*\}/,el=/#|\^|\/|>|\{|&|=|!/;function tl(e){this.string=e,this.tail=e,this.pos=0}function il(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function nl(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}tl.prototype.eos=function(){return""===this.tail},tl.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},tl.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},il.prototype.push=function(e){return new il(e,this)},il.prototype.lookup=function(e){var t,i,n,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var s,o,a,l=this,h=!1;l;){if(e.indexOf(".")>0)for(s=l.view,o=e.split("."),a=0;null!=s&&a<o.length;)a===o.length-1&&(h=Ya(s,o[a])||(i=s,n=o[a],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(n))),s=s[o[a++]];else s=l.view[e],h=Ya(l.view,e);if(h){t=s;break}l=l.parent}r[e]=t}return Xa(t)&&(t=t.call(this.view)),t},nl.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},nl.prototype.parse=function(e,t){var i=this.templateCache,n=e+":"+(t||rl.tags).join(":"),r=void 0!==i,s=r?i.get(n):void 0;return null==s&&(s=function(e,t){if(!e)return[];var i,n,r,s,o=!1,a=[],l=[],h=[],c=!1,d=!1,u="",f=0;function g(){if(c&&!d)for(;h.length;)delete l[h.pop()];else h=[];c=!1,d=!1}function p(e){if("string"==typeof e&&(e=e.split(Ja,2)),!Va(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(ja(e[0])+"\\s*"),n=new RegExp("\\s*"+ja(e[1])),r=new RegExp("\\s*"+ja("}"+e[1]))}p(t||rl.tags);for(var m,_,y,v,x,b,w=new tl(e);!w.eos();){if(m=w.pos,y=w.scanUntil(i))for(var S=0,E=y.length;S<E;++S)s=v=y.charAt(S),function(e,t){return Za.call(e,t)}(Ka,s)?(d=!0,o=!0,u+=" "):(h.push(l.length),u+=v),l.push(["text",v,m,m+1]),m+=1,"\n"===v&&(g(),u="",f=0,o=!1);if(!w.scan(i))break;if(c=!0,_=w.scan(el)||"name",w.scan(qa),"="===_?(y=w.scanUntil($a),w.scan($a),w.scanUntil(n)):"{"===_?(y=w.scanUntil(r),w.scan(Qa),w.scanUntil(n),_="&"):y=w.scanUntil(n),!w.scan(n))throw new Error("Unclosed tag at "+w.pos);if(x=">"==_?[_,y,m,w.pos,u,f,o]:[_,y,m,w.pos],f++,l.push(x),"#"===_||"^"===_)a.push(x);else if("/"===_){if(!(b=a.pop()))throw new Error('Unopened section "'+y+'" at '+m);if(b[1]!==y)throw new Error('Unclosed section "'+b[1]+'" at '+m)}else"name"===_||"{"===_||"&"===_?d=!0:"="===_&&p(y)}if(g(),b=a.pop())throw new Error('Unclosed section "'+b[1]+'" at '+w.pos);return function(e){for(var t,i=[],n=i,r=[],s=0,o=e.length;s<o;++s)switch((t=e[s])[0]){case"#":case"^":n.push(t),r.push(t),n=t[4]=[];break;case"/":r.pop()[5]=t[2],n=r.length>0?r[r.length-1][4]:i;break;default:n.push(t)}return i}(function(e){for(var t,i,n=[],r=0,s=e.length;r<s;++r)(t=e[r])&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}(l))}(e,t),r&&i.set(n,s)),s},nl.prototype.render=function(e,t,i,n){var r=this.getConfigTags(n),s=this.parse(e,r),o=t instanceof il?t:new il(t,void 0);return this.renderTokens(s,o,i,e,n)},nl.prototype.renderTokens=function(e,t,i,n,r){for(var s,o,a,l="",h=0,c=e.length;h<c;++h)a=void 0,"#"===(o=(s=e[h])[0])?a=this.renderSection(s,t,i,n,r):"^"===o?a=this.renderInverted(s,t,i,n,r):">"===o?a=this.renderPartial(s,t,i,r):"&"===o?a=this.unescapedValue(s,t):"name"===o?a=this.escapedValue(s,t,r):"text"===o&&(a=this.rawValue(s)),void 0!==a&&(l+=a);return l},nl.prototype.renderSection=function(e,t,i,n,r){var s=this,o="",a=t.lookup(e[1]);if(a){if(Va(a))for(var l=0,h=a.length;l<h;++l)o+=this.renderTokens(e[4],t.push(a[l]),i,n,r);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)o+=this.renderTokens(e[4],t.push(a),i,n,r);else if(Xa(a)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,n.slice(e[3],e[5]),(function(e){return s.render(e,t,i,r)})))&&(o+=a)}else o+=this.renderTokens(e[4],t,i,n,r);return o}},nl.prototype.renderInverted=function(e,t,i,n,r){var s=t.lookup(e[1]);if(!s||Va(s)&&0===s.length)return this.renderTokens(e[4],t,i,n,r)},nl.prototype.indentPartial=function(e,t,i){for(var n=t.replace(/[^ \t]/g,""),r=e.split("\n"),s=0;s<r.length;s++)r[s].length&&(s>0||!i)&&(r[s]=n+r[s]);return r.join("\n")},nl.prototype.renderPartial=function(e,t,i,n){if(i){var r=this.getConfigTags(n),s=Xa(i)?i(e[1]):i[e[1]];if(null!=s){var o=e[6],a=e[5],l=e[4],h=s;0==a&&l&&(h=this.indentPartial(s,l,o));var c=this.parse(h,r);return this.renderTokens(c,t,i,h,n)}}},nl.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);if(null!=i)return i},nl.prototype.escapedValue=function(e,t,i){var n=this.getConfigEscape(i)||rl.escape,r=t.lookup(e[1]);if(null!=r)return"number"==typeof r&&n===rl.escape?String(r):n(r)},nl.prototype.rawValue=function(e){return e[1]},nl.prototype.getConfigTags=function(e){return Va(e)?e:e&&"object"==typeof e?e.tags:void 0},nl.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!Va(e)?e.escape:void 0};var rl={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){sl.templateCache=e},get templateCache(){return sl.templateCache}},sl=new nl;rl.clearCache=function(){return sl.clearCache()},rl.parse=function(e,t){return sl.parse(e,t)},rl.render=function(e,t,i,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(Va(r=e)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return sl.render(e,t,i,n)},rl.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return Ha[e]}))},rl.Scanner=tl,rl.Context=il,rl.Writer=nl;const ol=rl;class al extends A{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new al(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(C(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=S(e,m,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function(e){if("function"==typeof e)return e;let t;return Array.isArray(e)?t=e:(J("function"==typeof e.getZIndex,41),t=[e]),function(){return t}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const ll=al;class hl extends t{constructor(e,t,i,n){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=n}}const cl={};class dl extends dr{constructor(e){let t;if(super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:br,this.addCondition_=e.addCondition?e.addCondition:xr,this.removeCondition_=e.removeCondition?e.removeCondition:xr,this.toggleCondition_=e.toggleCondition?e.toggleCondition:Sr,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:c,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=void 0!==e.style?e.style:function(){const e=function(){const e={},t=[255,255,255,1],i=[0,153,255,1];return e.Polygon=[new Rs({fill:new Es({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new Rs({stroke:new Ts({color:t,width:5})}),new Rs({stroke:new Ts({color:i,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new Rs({image:new ws({radius:6,fill:new Es({color:i}),stroke:new Ts({color:t,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}();return l(e.Polygon,e.LineString),l(e.GeometryCollection,e.LineString),function(t){return t.getGeometry()?e[t.getGeometry().getType()]:null}}(),this.features_=e.features||new U,e.layers)if("function"==typeof e.layers)t=e.layers;else{const i=e.layers;t=function(e){return i.includes(e)}}else t=c;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[M(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[M(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(N,this.boundAddFeature_),this.features_.addEventListener(z,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(N,this.boundAddFeature_),this.features_.removeEventListener(z,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const e=this.getMap().getAllLayers().find((function(e){if(e instanceof Fo&&e.getSource()&&e.getSource().hasFeature(t))return e}));e&&this.addFeatureLayerAssociation_(t,e)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=M(e);t in cl||(cl[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){const n=t[i];if(n!==this&&n instanceof dl&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(n.getStyle())}const i=M(e);e.setStyle(cl[i]),delete cl[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[M(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),n=this.toggleCondition_(e),r=!t&&!i&&!n,s=e.map,o=this.getFeatures(),a=[],l=[];if(r){f(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,((e,t)=>{if(e instanceof ll&&this.filter_(e,t))return this.addFeatureLayerAssociation_(e,t),l.push(e),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=o.getLength()-1;e>=0;--e){const t=o.item(e),i=l.indexOf(t);i>-1?l.splice(i,1):(o.remove(t),a.push(t))}0!==l.length&&o.extend(l)}else{s.forEachFeatureAtPixel(e.pixel,((e,r)=>{if(e instanceof ll&&this.filter_(e,r))return!t&&!n||o.getArray().includes(e)?(i||n)&&o.getArray().includes(e)&&(a.push(e),this.removeFeatureLayerAssociation_(e)):(this.addFeatureLayerAssociation_(e,r),l.push(e)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let e=a.length-1;e>=0;--e)o.remove(a[e]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new hl("select",l,a,e)),!0}}const ul=dl,fl=JSON.parse('{"ri-24-hours-fill":"ea01","ri-24-hours-line":"ea02","ri-4k-fill":"ea03","ri-4k-line":"ea04","ri-a-b":"ea05","ri-account-box-fill":"ea06","ri-account-box-line":"ea07","ri-account-circle-fill":"ea08","ri-account-circle-line":"ea09","ri-account-pin-box-fill":"ea0a","ri-account-pin-box-line":"ea0b","ri-account-pin-circle-fill":"ea0c","ri-account-pin-circle-line":"ea0d","ri-add-box-fill":"ea0e","ri-add-box-line":"ea0f","ri-add-circle-fill":"ea10","ri-add-circle-line":"ea11","ri-add-fill":"ea12","ri-add-line":"ea13","ri-admin-fill":"ea14","ri-admin-line":"ea15","ri-advertisement-fill":"ea16","ri-advertisement-line":"ea17","ri-airplay-fill":"ea18","ri-airplay-line":"ea19","ri-alarm-fill":"ea1a","ri-alarm-line":"ea1b","ri-alarm-warning-fill":"ea1c","ri-alarm-warning-line":"ea1d","ri-album-fill":"ea1e","ri-album-line":"ea1f","ri-alert-fill":"ea20","ri-alert-line":"ea21","ri-aliens-fill":"ea22","ri-aliens-line":"ea23","ri-align-bottom":"ea24","ri-align-center":"ea25","ri-align-justify":"ea26","ri-align-left":"ea27","ri-align-right":"ea28","ri-align-top":"ea29","ri-align-vertically":"ea2a","ri-alipay-fill":"ea2b","ri-alipay-line":"ea2c","ri-amazon-fill":"ea2d","ri-amazon-line":"ea2e","ri-anchor-fill":"ea2f","ri-anchor-line":"ea30","ri-ancient-gate-fill":"ea31","ri-ancient-gate-line":"ea32","ri-ancient-pavilion-fill":"ea33","ri-ancient-pavilion-line":"ea34","ri-android-fill":"ea35","ri-android-line":"ea36","ri-angularjs-fill":"ea37","ri-angularjs-line":"ea38","ri-anticlockwise-2-fill":"ea39","ri-anticlockwise-2-line":"ea3a","ri-anticlockwise-fill":"ea3b","ri-anticlockwise-line":"ea3c","ri-app-store-fill":"ea3d","ri-app-store-line":"ea3e","ri-apple-fill":"ea3f","ri-apple-line":"ea40","ri-apps-2-fill":"ea41","ri-apps-2-line":"ea42","ri-apps-fill":"ea43","ri-apps-line":"ea44","ri-archive-drawer-fill":"ea45","ri-archive-drawer-line":"ea46","ri-archive-fill":"ea47","ri-archive-line":"ea48","ri-arrow-down-circle-fill":"ea49","ri-arrow-down-circle-line":"ea4a","ri-arrow-down-fill":"ea4b","ri-arrow-down-line":"ea4c","ri-arrow-down-s-fill":"ea4d","ri-arrow-down-s-line":"ea4e","ri-arrow-drop-down-fill":"ea4f","ri-arrow-drop-down-line":"ea50","ri-arrow-drop-left-fill":"ea51","ri-arrow-drop-left-line":"ea52","ri-arrow-drop-right-fill":"ea53","ri-arrow-drop-right-line":"ea54","ri-arrow-drop-up-fill":"ea55","ri-arrow-drop-up-line":"ea56","ri-arrow-go-back-fill":"ea57","ri-arrow-go-back-line":"ea58","ri-arrow-go-forward-fill":"ea59","ri-arrow-go-forward-line":"ea5a","ri-arrow-left-circle-fill":"ea5b","ri-arrow-left-circle-line":"ea5c","ri-arrow-left-down-fill":"ea5d","ri-arrow-left-down-line":"ea5e","ri-arrow-left-fill":"ea5f","ri-arrow-left-line":"ea60","ri-arrow-left-right-fill":"ea61","ri-arrow-left-right-line":"ea62","ri-arrow-left-s-fill":"ea63","ri-arrow-left-s-line":"ea64","ri-arrow-left-up-fill":"ea65","ri-arrow-left-up-line":"ea66","ri-arrow-right-circle-fill":"ea67","ri-arrow-right-circle-line":"ea68","ri-arrow-right-down-fill":"ea69","ri-arrow-right-down-line":"ea6a","ri-arrow-right-fill":"ea6b","ri-arrow-right-line":"ea6c","ri-arrow-right-s-fill":"ea6d","ri-arrow-right-s-line":"ea6e","ri-arrow-right-up-fill":"ea6f","ri-arrow-right-up-line":"ea70","ri-arrow-up-circle-fill":"ea71","ri-arrow-up-circle-line":"ea72","ri-arrow-up-down-fill":"ea73","ri-arrow-up-down-line":"ea74","ri-arrow-up-fill":"ea75","ri-arrow-up-line":"ea76","ri-arrow-up-s-fill":"ea77","ri-arrow-up-s-line":"ea78","ri-artboard-2-fill":"ea79","ri-artboard-2-line":"ea7a","ri-artboard-fill":"ea7b","ri-artboard-line":"ea7c","ri-article-fill":"ea7d","ri-article-line":"ea7e","ri-aspect-ratio-fill":"ea7f","ri-aspect-ratio-line":"ea80","ri-asterisk":"ea81","ri-at-fill":"ea82","ri-at-line":"ea83","ri-attachment-2":"ea84","ri-attachment-fill":"ea85","ri-attachment-line":"ea86","ri-auction-fill":"ea87","ri-auction-line":"ea88","ri-award-fill":"ea89","ri-award-line":"ea8a","ri-baidu-fill":"ea8b","ri-baidu-line":"ea8c","ri-ball-pen-fill":"ea8d","ri-ball-pen-line":"ea8e","ri-bank-card-2-fill":"ea8f","ri-bank-card-2-line":"ea90","ri-bank-card-fill":"ea91","ri-bank-card-line":"ea92","ri-bank-fill":"ea93","ri-bank-line":"ea94","ri-bar-chart-2-fill":"ea95","ri-bar-chart-2-line":"ea96","ri-bar-chart-box-fill":"ea97","ri-bar-chart-box-line":"ea98","ri-bar-chart-fill":"ea99","ri-bar-chart-grouped-fill":"ea9a","ri-bar-chart-grouped-line":"ea9b","ri-bar-chart-horizontal-fill":"ea9c","ri-bar-chart-horizontal-line":"ea9d","ri-bar-chart-line":"ea9e","ri-barcode-box-fill":"ea9f","ri-barcode-box-line":"eaa0","ri-barcode-fill":"eaa1","ri-barcode-line":"eaa2","ri-barricade-fill":"eaa3","ri-barricade-line":"eaa4","ri-base-station-fill":"eaa5","ri-base-station-line":"eaa6","ri-basketball-fill":"eaa7","ri-basketball-line":"eaa8","ri-battery-2-charge-fill":"eaa9","ri-battery-2-charge-line":"eaaa","ri-battery-2-fill":"eaab","ri-battery-2-line":"eaac","ri-battery-charge-fill":"eaad","ri-battery-charge-line":"eaae","ri-battery-fill":"eaaf","ri-battery-line":"eab0","ri-battery-low-fill":"eab1","ri-battery-low-line":"eab2","ri-battery-saver-fill":"eab3","ri-battery-saver-line":"eab4","ri-battery-share-fill":"eab5","ri-battery-share-line":"eab6","ri-bear-smile-fill":"eab7","ri-bear-smile-line":"eab8","ri-behance-fill":"eab9","ri-behance-line":"eaba","ri-bell-fill":"eabb","ri-bell-line":"eabc","ri-bike-fill":"eabd","ri-bike-line":"eabe","ri-bilibili-fill":"eabf","ri-bilibili-line":"eac0","ri-bill-fill":"eac1","ri-bill-line":"eac2","ri-billiards-fill":"eac3","ri-billiards-line":"eac4","ri-bit-coin-fill":"eac5","ri-bit-coin-line":"eac6","ri-blaze-fill":"eac7","ri-blaze-line":"eac8","ri-bluetooth-connect-fill":"eac9","ri-bluetooth-connect-line":"eaca","ri-bluetooth-fill":"eacb","ri-bluetooth-line":"eacc","ri-blur-off-fill":"eacd","ri-blur-off-line":"eace","ri-body-scan-fill":"eacf","ri-body-scan-line":"ead0","ri-bold":"ead1","ri-book-2-fill":"ead2","ri-book-2-line":"ead3","ri-book-3-fill":"ead4","ri-book-3-line":"ead5","ri-book-fill":"ead6","ri-book-line":"ead7","ri-book-mark-fill":"ead8","ri-book-mark-line":"ead9","ri-book-open-fill":"eada","ri-book-open-line":"eadb","ri-book-read-fill":"eadc","ri-book-read-line":"eadd","ri-booklet-fill":"eade","ri-booklet-line":"eadf","ri-bookmark-2-fill":"eae0","ri-bookmark-2-line":"eae1","ri-bookmark-3-fill":"eae2","ri-bookmark-3-line":"eae3","ri-bookmark-fill":"eae4","ri-bookmark-line":"eae5","ri-boxing-fill":"eae6","ri-boxing-line":"eae7","ri-braces-fill":"eae8","ri-braces-line":"eae9","ri-brackets-fill":"eaea","ri-brackets-line":"eaeb","ri-briefcase-2-fill":"eaec","ri-briefcase-2-line":"eaed","ri-briefcase-3-fill":"eaee","ri-briefcase-3-line":"eaef","ri-briefcase-4-fill":"eaf0","ri-briefcase-4-line":"eaf1","ri-briefcase-5-fill":"eaf2","ri-briefcase-5-line":"eaf3","ri-briefcase-fill":"eaf4","ri-briefcase-line":"eaf5","ri-bring-forward":"eaf6","ri-bring-to-front":"eaf7","ri-broadcast-fill":"eaf8","ri-broadcast-line":"eaf9","ri-brush-2-fill":"eafa","ri-brush-2-line":"eafb","ri-brush-3-fill":"eafc","ri-brush-3-line":"eafd","ri-brush-4-fill":"eafe","ri-brush-4-line":"eaff","ri-brush-fill":"eb00","ri-brush-line":"eb01","ri-bubble-chart-fill":"eb02","ri-bubble-chart-line":"eb03","ri-bug-2-fill":"eb04","ri-bug-2-line":"eb05","ri-bug-fill":"eb06","ri-bug-line":"eb07","ri-building-2-fill":"eb08","ri-building-2-line":"eb09","ri-building-3-fill":"eb0a","ri-building-3-line":"eb0b","ri-building-4-fill":"eb0c","ri-building-4-line":"eb0d","ri-building-fill":"eb0e","ri-building-line":"eb0f","ri-bus-2-fill":"eb10","ri-bus-2-line":"eb11","ri-bus-fill":"eb12","ri-bus-line":"eb13","ri-bus-wifi-fill":"eb14","ri-bus-wifi-line":"eb15","ri-cactus-fill":"eb16","ri-cactus-line":"eb17","ri-cake-2-fill":"eb18","ri-cake-2-line":"eb19","ri-cake-3-fill":"eb1a","ri-cake-3-line":"eb1b","ri-cake-fill":"eb1c","ri-cake-line":"eb1d","ri-calculator-fill":"eb1e","ri-calculator-line":"eb1f","ri-calendar-2-fill":"eb20","ri-calendar-2-line":"eb21","ri-calendar-check-fill":"eb22","ri-calendar-check-line":"eb23","ri-calendar-event-fill":"eb24","ri-calendar-event-line":"eb25","ri-calendar-fill":"eb26","ri-calendar-line":"eb27","ri-calendar-todo-fill":"eb28","ri-calendar-todo-line":"eb29","ri-camera-2-fill":"eb2a","ri-camera-2-line":"eb2b","ri-camera-3-fill":"eb2c","ri-camera-3-line":"eb2d","ri-camera-fill":"eb2e","ri-camera-lens-fill":"eb2f","ri-camera-lens-line":"eb30","ri-camera-line":"eb31","ri-camera-off-fill":"eb32","ri-camera-off-line":"eb33","ri-camera-switch-fill":"eb34","ri-camera-switch-line":"eb35","ri-capsule-fill":"eb36","ri-capsule-line":"eb37","ri-car-fill":"eb38","ri-car-line":"eb39","ri-car-washing-fill":"eb3a","ri-car-washing-line":"eb3b","ri-caravan-fill":"eb3c","ri-caravan-line":"eb3d","ri-cast-fill":"eb3e","ri-cast-line":"eb3f","ri-cellphone-fill":"eb40","ri-cellphone-line":"eb41","ri-celsius-fill":"eb42","ri-celsius-line":"eb43","ri-centos-fill":"eb44","ri-centos-line":"eb45","ri-character-recognition-fill":"eb46","ri-character-recognition-line":"eb47","ri-charging-pile-2-fill":"eb48","ri-charging-pile-2-line":"eb49","ri-charging-pile-fill":"eb4a","ri-charging-pile-line":"eb4b","ri-chat-1-fill":"eb4c","ri-chat-1-line":"eb4d","ri-chat-2-fill":"eb4e","ri-chat-2-line":"eb4f","ri-chat-3-fill":"eb50","ri-chat-3-line":"eb51","ri-chat-4-fill":"eb52","ri-chat-4-line":"eb53","ri-chat-check-fill":"eb54","ri-chat-check-line":"eb55","ri-chat-delete-fill":"eb56","ri-chat-delete-line":"eb57","ri-chat-download-fill":"eb58","ri-chat-download-line":"eb59","ri-chat-follow-up-fill":"eb5a","ri-chat-follow-up-line":"eb5b","ri-chat-forward-fill":"eb5c","ri-chat-forward-line":"eb5d","ri-chat-heart-fill":"eb5e","ri-chat-heart-line":"eb5f","ri-chat-history-fill":"eb60","ri-chat-history-line":"eb61","ri-chat-new-fill":"eb62","ri-chat-new-line":"eb63","ri-chat-off-fill":"eb64","ri-chat-off-line":"eb65","ri-chat-poll-fill":"eb66","ri-chat-poll-line":"eb67","ri-chat-private-fill":"eb68","ri-chat-private-line":"eb69","ri-chat-quote-fill":"eb6a","ri-chat-quote-line":"eb6b","ri-chat-settings-fill":"eb6c","ri-chat-settings-line":"eb6d","ri-chat-smile-2-fill":"eb6e","ri-chat-smile-2-line":"eb6f","ri-chat-smile-3-fill":"eb70","ri-chat-smile-3-line":"eb71","ri-chat-smile-fill":"eb72","ri-chat-smile-line":"eb73","ri-chat-upload-fill":"eb74","ri-chat-upload-line":"eb75","ri-chat-voice-fill":"eb76","ri-chat-voice-line":"eb77","ri-check-double-fill":"eb78","ri-check-double-line":"eb79","ri-check-fill":"eb7a","ri-check-line":"eb7b","ri-checkbox-blank-circle-fill":"eb7c","ri-checkbox-blank-circle-line":"eb7d","ri-checkbox-blank-fill":"eb7e","ri-checkbox-blank-line":"eb7f","ri-checkbox-circle-fill":"eb80","ri-checkbox-circle-line":"eb81","ri-checkbox-fill":"eb82","ri-checkbox-indeterminate-fill":"eb83","ri-checkbox-indeterminate-line":"eb84","ri-checkbox-line":"eb85","ri-checkbox-multiple-blank-fill":"eb86","ri-checkbox-multiple-blank-line":"eb87","ri-checkbox-multiple-fill":"eb88","ri-checkbox-multiple-line":"eb89","ri-china-railway-fill":"eb8a","ri-china-railway-line":"eb8b","ri-chrome-fill":"eb8c","ri-chrome-line":"eb8d","ri-clapperboard-fill":"eb8e","ri-clapperboard-line":"eb8f","ri-clipboard-fill":"eb90","ri-clipboard-line":"eb91","ri-clockwise-2-fill":"eb92","ri-clockwise-2-line":"eb93","ri-clockwise-fill":"eb94","ri-clockwise-line":"eb95","ri-close-circle-fill":"eb96","ri-close-circle-line":"eb97","ri-close-fill":"eb98","ri-close-line":"eb99","ri-closed-captioning-fill":"eb9a","ri-closed-captioning-line":"eb9b","ri-cloud-fill":"eb9c","ri-cloud-line":"eb9d","ri-cloud-off-fill":"eb9e","ri-cloud-off-line":"eb9f","ri-cloud-windy-fill":"eba0","ri-cloud-windy-line":"eba1","ri-cloudy-2-fill":"eba2","ri-cloudy-2-line":"eba3","ri-cloudy-fill":"eba4","ri-cloudy-line":"eba5","ri-code-box-fill":"eba6","ri-code-box-line":"eba7","ri-code-fill":"eba8","ri-code-line":"eba9","ri-code-s-fill":"ebaa","ri-code-s-line":"ebab","ri-code-s-slash-fill":"ebac","ri-code-s-slash-line":"ebad","ri-code-view":"ebae","ri-codepen-fill":"ebaf","ri-codepen-line":"ebb0","ri-coin-fill":"ebb1","ri-coin-line":"ebb2","ri-coins-fill":"ebb3","ri-coins-line":"ebb4","ri-collage-fill":"ebb5","ri-collage-line":"ebb6","ri-command-fill":"ebb7","ri-command-line":"ebb8","ri-community-fill":"ebb9","ri-community-line":"ebba","ri-compass-2-fill":"ebbb","ri-compass-2-line":"ebbc","ri-compass-3-fill":"ebbd","ri-compass-3-line":"ebbe","ri-compass-4-fill":"ebbf","ri-compass-4-line":"ebc0","ri-compass-discover-fill":"ebc1","ri-compass-discover-line":"ebc2","ri-compass-fill":"ebc3","ri-compass-line":"ebc4","ri-compasses-2-fill":"ebc5","ri-compasses-2-line":"ebc6","ri-compasses-fill":"ebc7","ri-compasses-line":"ebc8","ri-computer-fill":"ebc9","ri-computer-line":"ebca","ri-contacts-book-2-fill":"ebcb","ri-contacts-book-2-line":"ebcc","ri-contacts-book-fill":"ebcd","ri-contacts-book-line":"ebce","ri-contacts-book-upload-fill":"ebcf","ri-contacts-book-upload-line":"ebd0","ri-contacts-fill":"ebd1","ri-contacts-line":"ebd2","ri-contrast-2-fill":"ebd3","ri-contrast-2-line":"ebd4","ri-contrast-drop-2-fill":"ebd5","ri-contrast-drop-2-line":"ebd6","ri-contrast-drop-fill":"ebd7","ri-contrast-drop-line":"ebd8","ri-contrast-fill":"ebd9","ri-contrast-line":"ebda","ri-copper-coin-fill":"ebdb","ri-copper-coin-line":"ebdc","ri-copper-diamond-fill":"ebdd","ri-copper-diamond-line":"ebde","ri-copyleft-fill":"ebdf","ri-copyleft-line":"ebe0","ri-copyright-fill":"ebe1","ri-copyright-line":"ebe2","ri-coreos-fill":"ebe3","ri-coreos-line":"ebe4","ri-coupon-2-fill":"ebe5","ri-coupon-2-line":"ebe6","ri-coupon-3-fill":"ebe7","ri-coupon-3-line":"ebe8","ri-coupon-4-fill":"ebe9","ri-coupon-4-line":"ebea","ri-coupon-5-fill":"ebeb","ri-coupon-5-line":"ebec","ri-coupon-fill":"ebed","ri-coupon-line":"ebee","ri-cpu-fill":"ebef","ri-cpu-line":"ebf0","ri-creative-commons-by-fill":"ebf1","ri-creative-commons-by-line":"ebf2","ri-creative-commons-fill":"ebf3","ri-creative-commons-line":"ebf4","ri-creative-commons-nc-fill":"ebf5","ri-creative-commons-nc-line":"ebf6","ri-creative-commons-nd-fill":"ebf7","ri-creative-commons-nd-line":"ebf8","ri-creative-commons-sa-fill":"ebf9","ri-creative-commons-sa-line":"ebfa","ri-creative-commons-zero-fill":"ebfb","ri-creative-commons-zero-line":"ebfc","ri-criminal-fill":"ebfd","ri-criminal-line":"ebfe","ri-crop-2-fill":"ebff","ri-crop-2-line":"ec00","ri-crop-fill":"ec01","ri-crop-line":"ec02","ri-css3-fill":"ec03","ri-css3-line":"ec04","ri-cup-fill":"ec05","ri-cup-line":"ec06","ri-currency-fill":"ec07","ri-currency-line":"ec08","ri-cursor-fill":"ec09","ri-cursor-line":"ec0a","ri-customer-service-2-fill":"ec0b","ri-customer-service-2-line":"ec0c","ri-customer-service-fill":"ec0d","ri-customer-service-line":"ec0e","ri-dashboard-2-fill":"ec0f","ri-dashboard-2-line":"ec10","ri-dashboard-3-fill":"ec11","ri-dashboard-3-line":"ec12","ri-dashboard-fill":"ec13","ri-dashboard-line":"ec14","ri-database-2-fill":"ec15","ri-database-2-line":"ec16","ri-database-fill":"ec17","ri-database-line":"ec18","ri-delete-back-2-fill":"ec19","ri-delete-back-2-line":"ec1a","ri-delete-back-fill":"ec1b","ri-delete-back-line":"ec1c","ri-delete-bin-2-fill":"ec1d","ri-delete-bin-2-line":"ec1e","ri-delete-bin-3-fill":"ec1f","ri-delete-bin-3-line":"ec20","ri-delete-bin-4-fill":"ec21","ri-delete-bin-4-line":"ec22","ri-delete-bin-5-fill":"ec23","ri-delete-bin-5-line":"ec24","ri-delete-bin-6-fill":"ec25","ri-delete-bin-6-line":"ec26","ri-delete-bin-7-fill":"ec27","ri-delete-bin-7-line":"ec28","ri-delete-bin-fill":"ec29","ri-delete-bin-line":"ec2a","ri-delete-column":"ec2b","ri-delete-row":"ec2c","ri-device-fill":"ec2d","ri-device-line":"ec2e","ri-device-recover-fill":"ec2f","ri-device-recover-line":"ec30","ri-dingding-fill":"ec31","ri-dingding-line":"ec32","ri-direction-fill":"ec33","ri-direction-line":"ec34","ri-disc-fill":"ec35","ri-disc-line":"ec36","ri-discord-fill":"ec37","ri-discord-line":"ec38","ri-discuss-fill":"ec39","ri-discuss-line":"ec3a","ri-dislike-fill":"ec3b","ri-dislike-line":"ec3c","ri-disqus-fill":"ec3d","ri-disqus-line":"ec3e","ri-divide-fill":"ec3f","ri-divide-line":"ec40","ri-donut-chart-fill":"ec41","ri-donut-chart-line":"ec42","ri-door-closed-fill":"ec43","ri-door-closed-line":"ec44","ri-door-fill":"ec45","ri-door-line":"ec46","ri-door-lock-box-fill":"ec47","ri-door-lock-box-line":"ec48","ri-door-lock-fill":"ec49","ri-door-lock-line":"ec4a","ri-door-open-fill":"ec4b","ri-door-open-line":"ec4c","ri-dossier-fill":"ec4d","ri-dossier-line":"ec4e","ri-douban-fill":"ec4f","ri-douban-line":"ec50","ri-double-quotes-l":"ec51","ri-double-quotes-r":"ec52","ri-download-2-fill":"ec53","ri-download-2-line":"ec54","ri-download-cloud-2-fill":"ec55","ri-download-cloud-2-line":"ec56","ri-download-cloud-fill":"ec57","ri-download-cloud-line":"ec58","ri-download-fill":"ec59","ri-download-line":"ec5a","ri-draft-fill":"ec5b","ri-draft-line":"ec5c","ri-drag-drop-fill":"ec5d","ri-drag-drop-line":"ec5e","ri-drag-move-2-fill":"ec5f","ri-drag-move-2-line":"ec60","ri-drag-move-fill":"ec61","ri-drag-move-line":"ec62","ri-dribbble-fill":"ec63","ri-dribbble-line":"ec64","ri-drive-fill":"ec65","ri-drive-line":"ec66","ri-drizzle-fill":"ec67","ri-drizzle-line":"ec68","ri-drop-fill":"ec69","ri-drop-line":"ec6a","ri-dropbox-fill":"ec6b","ri-dropbox-line":"ec6c","ri-dual-sim-1-fill":"ec6d","ri-dual-sim-1-line":"ec6e","ri-dual-sim-2-fill":"ec6f","ri-dual-sim-2-line":"ec70","ri-dv-fill":"ec71","ri-dv-line":"ec72","ri-dvd-fill":"ec73","ri-dvd-line":"ec74","ri-e-bike-2-fill":"ec75","ri-e-bike-2-line":"ec76","ri-e-bike-fill":"ec77","ri-e-bike-line":"ec78","ri-earth-fill":"ec79","ri-earth-line":"ec7a","ri-earthquake-fill":"ec7b","ri-earthquake-line":"ec7c","ri-edge-fill":"ec7d","ri-edge-line":"ec7e","ri-edit-2-fill":"ec7f","ri-edit-2-line":"ec80","ri-edit-box-fill":"ec81","ri-edit-box-line":"ec82","ri-edit-circle-fill":"ec83","ri-edit-circle-line":"ec84","ri-edit-fill":"ec85","ri-edit-line":"ec86","ri-eject-fill":"ec87","ri-eject-line":"ec88","ri-emotion-2-fill":"ec89","ri-emotion-2-line":"ec8a","ri-emotion-fill":"ec8b","ri-emotion-happy-fill":"ec8c","ri-emotion-happy-line":"ec8d","ri-emotion-laugh-fill":"ec8e","ri-emotion-laugh-line":"ec8f","ri-emotion-line":"ec90","ri-emotion-normal-fill":"ec91","ri-emotion-normal-line":"ec92","ri-emotion-sad-fill":"ec93","ri-emotion-sad-line":"ec94","ri-emotion-unhappy-fill":"ec95","ri-emotion-unhappy-line":"ec96","ri-empathize-fill":"ec97","ri-empathize-line":"ec98","ri-emphasis-cn":"ec99","ri-emphasis":"ec9a","ri-english-input":"ec9b","ri-equalizer-fill":"ec9c","ri-equalizer-line":"ec9d","ri-eraser-fill":"ec9e","ri-eraser-line":"ec9f","ri-error-warning-fill":"eca0","ri-error-warning-line":"eca1","ri-evernote-fill":"eca2","ri-evernote-line":"eca3","ri-exchange-box-fill":"eca4","ri-exchange-box-line":"eca5","ri-exchange-cny-fill":"eca6","ri-exchange-cny-line":"eca7","ri-exchange-dollar-fill":"eca8","ri-exchange-dollar-line":"eca9","ri-exchange-fill":"ecaa","ri-exchange-funds-fill":"ecab","ri-exchange-funds-line":"ecac","ri-exchange-line":"ecad","ri-external-link-fill":"ecae","ri-external-link-line":"ecaf","ri-eye-2-fill":"ecb0","ri-eye-2-line":"ecb1","ri-eye-close-fill":"ecb2","ri-eye-close-line":"ecb3","ri-eye-fill":"ecb4","ri-eye-line":"ecb5","ri-eye-off-fill":"ecb6","ri-eye-off-line":"ecb7","ri-facebook-box-fill":"ecb8","ri-facebook-box-line":"ecb9","ri-facebook-circle-fill":"ecba","ri-facebook-circle-line":"ecbb","ri-facebook-fill":"ecbc","ri-facebook-line":"ecbd","ri-fahrenheit-fill":"ecbe","ri-fahrenheit-line":"ecbf","ri-feedback-fill":"ecc0","ri-feedback-line":"ecc1","ri-file-2-fill":"ecc2","ri-file-2-line":"ecc3","ri-file-3-fill":"ecc4","ri-file-3-line":"ecc5","ri-file-4-fill":"ecc6","ri-file-4-line":"ecc7","ri-file-add-fill":"ecc8","ri-file-add-line":"ecc9","ri-file-chart-2-fill":"ecca","ri-file-chart-2-line":"eccb","ri-file-chart-fill":"eccc","ri-file-chart-line":"eccd","ri-file-cloud-fill":"ecce","ri-file-cloud-line":"eccf","ri-file-code-fill":"ecd0","ri-file-code-line":"ecd1","ri-file-copy-2-fill":"ecd2","ri-file-copy-2-line":"ecd3","ri-file-copy-fill":"ecd4","ri-file-copy-line":"ecd5","ri-file-damage-fill":"ecd6","ri-file-damage-line":"ecd7","ri-file-download-fill":"ecd8","ri-file-download-line":"ecd9","ri-file-edit-fill":"ecda","ri-file-edit-line":"ecdb","ri-file-excel-2-fill":"ecdc","ri-file-excel-2-line":"ecdd","ri-file-excel-fill":"ecde","ri-file-excel-line":"ecdf","ri-file-fill":"ece0","ri-file-forbid-fill":"ece1","ri-file-forbid-line":"ece2","ri-file-gif-fill":"ece3","ri-file-gif-line":"ece4","ri-file-history-fill":"ece5","ri-file-history-line":"ece6","ri-file-hwp-fill":"ece7","ri-file-hwp-line":"ece8","ri-file-info-fill":"ece9","ri-file-info-line":"ecea","ri-file-line":"eceb","ri-file-list-2-fill":"ecec","ri-file-list-2-line":"eced","ri-file-list-3-fill":"ecee","ri-file-list-3-line":"ecef","ri-file-list-fill":"ecf0","ri-file-list-line":"ecf1","ri-file-lock-fill":"ecf2","ri-file-lock-line":"ecf3","ri-file-mark-fill":"ecf4","ri-file-mark-line":"ecf5","ri-file-music-fill":"ecf6","ri-file-music-line":"ecf7","ri-file-paper-2-fill":"ecf8","ri-file-paper-2-line":"ecf9","ri-file-paper-fill":"ecfa","ri-file-paper-line":"ecfb","ri-file-pdf-fill":"ecfc","ri-file-pdf-line":"ecfd","ri-file-ppt-2-fill":"ecfe","ri-file-ppt-2-line":"ecff","ri-file-ppt-fill":"ed00","ri-file-ppt-line":"ed01","ri-file-reduce-fill":"ed02","ri-file-reduce-line":"ed03","ri-file-search-fill":"ed04","ri-file-search-line":"ed05","ri-file-settings-fill":"ed06","ri-file-settings-line":"ed07","ri-file-shield-2-fill":"ed08","ri-file-shield-2-line":"ed09","ri-file-shield-fill":"ed0a","ri-file-shield-line":"ed0b","ri-file-shred-fill":"ed0c","ri-file-shred-line":"ed0d","ri-file-text-fill":"ed0e","ri-file-text-line":"ed0f","ri-file-transfer-fill":"ed10","ri-file-transfer-line":"ed11","ri-file-unknow-fill":"ed12","ri-file-unknow-line":"ed13","ri-file-upload-fill":"ed14","ri-file-upload-line":"ed15","ri-file-user-fill":"ed16","ri-file-user-line":"ed17","ri-file-warning-fill":"ed18","ri-file-warning-line":"ed19","ri-file-word-2-fill":"ed1a","ri-file-word-2-line":"ed1b","ri-file-word-fill":"ed1c","ri-file-word-line":"ed1d","ri-file-zip-fill":"ed1e","ri-file-zip-line":"ed1f","ri-film-fill":"ed20","ri-film-line":"ed21","ri-filter-2-fill":"ed22","ri-filter-2-line":"ed23","ri-filter-3-fill":"ed24","ri-filter-3-line":"ed25","ri-filter-fill":"ed26","ri-filter-line":"ed27","ri-filter-off-fill":"ed28","ri-filter-off-line":"ed29","ri-find-replace-fill":"ed2a","ri-find-replace-line":"ed2b","ri-finder-fill":"ed2c","ri-finder-line":"ed2d","ri-fingerprint-2-fill":"ed2e","ri-fingerprint-2-line":"ed2f","ri-fingerprint-fill":"ed30","ri-fingerprint-line":"ed31","ri-fire-fill":"ed32","ri-fire-line":"ed33","ri-firefox-fill":"ed34","ri-firefox-line":"ed35","ri-first-aid-kit-fill":"ed36","ri-first-aid-kit-line":"ed37","ri-flag-2-fill":"ed38","ri-flag-2-line":"ed39","ri-flag-fill":"ed3a","ri-flag-line":"ed3b","ri-flashlight-fill":"ed3c","ri-flashlight-line":"ed3d","ri-flask-fill":"ed3e","ri-flask-line":"ed3f","ri-flight-land-fill":"ed40","ri-flight-land-line":"ed41","ri-flight-takeoff-fill":"ed42","ri-flight-takeoff-line":"ed43","ri-flood-fill":"ed44","ri-flood-line":"ed45","ri-flow-chart":"ed46","ri-flutter-fill":"ed47","ri-flutter-line":"ed48","ri-focus-2-fill":"ed49","ri-focus-2-line":"ed4a","ri-focus-3-fill":"ed4b","ri-focus-3-line":"ed4c","ri-focus-fill":"ed4d","ri-focus-line":"ed4e","ri-foggy-fill":"ed4f","ri-foggy-line":"ed50","ri-folder-2-fill":"ed51","ri-folder-2-line":"ed52","ri-folder-3-fill":"ed53","ri-folder-3-line":"ed54","ri-folder-4-fill":"ed55","ri-folder-4-line":"ed56","ri-folder-5-fill":"ed57","ri-folder-5-line":"ed58","ri-folder-add-fill":"ed59","ri-folder-add-line":"ed5a","ri-folder-chart-2-fill":"ed5b","ri-folder-chart-2-line":"ed5c","ri-folder-chart-fill":"ed5d","ri-folder-chart-line":"ed5e","ri-folder-download-fill":"ed5f","ri-folder-download-line":"ed60","ri-folder-fill":"ed61","ri-folder-forbid-fill":"ed62","ri-folder-forbid-line":"ed63","ri-folder-history-fill":"ed64","ri-folder-history-line":"ed65","ri-folder-info-fill":"ed66","ri-folder-info-line":"ed67","ri-folder-keyhole-fill":"ed68","ri-folder-keyhole-line":"ed69","ri-folder-line":"ed6a","ri-folder-lock-fill":"ed6b","ri-folder-lock-line":"ed6c","ri-folder-music-fill":"ed6d","ri-folder-music-line":"ed6e","ri-folder-open-fill":"ed6f","ri-folder-open-line":"ed70","ri-folder-received-fill":"ed71","ri-folder-received-line":"ed72","ri-folder-reduce-fill":"ed73","ri-folder-reduce-line":"ed74","ri-folder-settings-fill":"ed75","ri-folder-settings-line":"ed76","ri-folder-shared-fill":"ed77","ri-folder-shared-line":"ed78","ri-folder-shield-2-fill":"ed79","ri-folder-shield-2-line":"ed7a","ri-folder-shield-fill":"ed7b","ri-folder-shield-line":"ed7c","ri-folder-transfer-fill":"ed7d","ri-folder-transfer-line":"ed7e","ri-folder-unknow-fill":"ed7f","ri-folder-unknow-line":"ed80","ri-folder-upload-fill":"ed81","ri-folder-upload-line":"ed82","ri-folder-user-fill":"ed83","ri-folder-user-line":"ed84","ri-folder-warning-fill":"ed85","ri-folder-warning-line":"ed86","ri-folder-zip-fill":"ed87","ri-folder-zip-line":"ed88","ri-folders-fill":"ed89","ri-folders-line":"ed8a","ri-font-color":"ed8b","ri-font-size-2":"ed8c","ri-font-size":"ed8d","ri-football-fill":"ed8e","ri-football-line":"ed8f","ri-footprint-fill":"ed90","ri-footprint-line":"ed91","ri-forbid-2-fill":"ed92","ri-forbid-2-line":"ed93","ri-forbid-fill":"ed94","ri-forbid-line":"ed95","ri-format-clear":"ed96","ri-fridge-fill":"ed97","ri-fridge-line":"ed98","ri-fullscreen-exit-fill":"ed99","ri-fullscreen-exit-line":"ed9a","ri-fullscreen-fill":"ed9b","ri-fullscreen-line":"ed9c","ri-function-fill":"ed9d","ri-function-line":"ed9e","ri-functions":"ed9f","ri-funds-box-fill":"eda0","ri-funds-box-line":"eda1","ri-funds-fill":"eda2","ri-funds-line":"eda3","ri-gallery-fill":"eda4","ri-gallery-line":"eda5","ri-gallery-upload-fill":"eda6","ri-gallery-upload-line":"eda7","ri-game-fill":"eda8","ri-game-line":"eda9","ri-gamepad-fill":"edaa","ri-gamepad-line":"edab","ri-gas-station-fill":"edac","ri-gas-station-line":"edad","ri-gatsby-fill":"edae","ri-gatsby-line":"edaf","ri-genderless-fill":"edb0","ri-genderless-line":"edb1","ri-ghost-2-fill":"edb2","ri-ghost-2-line":"edb3","ri-ghost-fill":"edb4","ri-ghost-line":"edb5","ri-ghost-smile-fill":"edb6","ri-ghost-smile-line":"edb7","ri-gift-2-fill":"edb8","ri-gift-2-line":"edb9","ri-gift-fill":"edba","ri-gift-line":"edbb","ri-git-branch-fill":"edbc","ri-git-branch-line":"edbd","ri-git-commit-fill":"edbe","ri-git-commit-line":"edbf","ri-git-merge-fill":"edc0","ri-git-merge-line":"edc1","ri-git-pull-request-fill":"edc2","ri-git-pull-request-line":"edc3","ri-git-repository-commits-fill":"edc4","ri-git-repository-commits-line":"edc5","ri-git-repository-fill":"edc6","ri-git-repository-line":"edc7","ri-git-repository-private-fill":"edc8","ri-git-repository-private-line":"edc9","ri-github-fill":"edca","ri-github-line":"edcb","ri-gitlab-fill":"edcc","ri-gitlab-line":"edcd","ri-global-fill":"edce","ri-global-line":"edcf","ri-globe-fill":"edd0","ri-globe-line":"edd1","ri-goblet-fill":"edd2","ri-goblet-line":"edd3","ri-google-fill":"edd4","ri-google-line":"edd5","ri-google-play-fill":"edd6","ri-google-play-line":"edd7","ri-government-fill":"edd8","ri-government-line":"edd9","ri-gps-fill":"edda","ri-gps-line":"eddb","ri-gradienter-fill":"eddc","ri-gradienter-line":"eddd","ri-grid-fill":"edde","ri-grid-line":"eddf","ri-group-2-fill":"ede0","ri-group-2-line":"ede1","ri-group-fill":"ede2","ri-group-line":"ede3","ri-guide-fill":"ede4","ri-guide-line":"ede5","ri-h-1":"ede6","ri-h-2":"ede7","ri-h-3":"ede8","ri-h-4":"ede9","ri-h-5":"edea","ri-h-6":"edeb","ri-hail-fill":"edec","ri-hail-line":"eded","ri-hammer-fill":"edee","ri-hammer-line":"edef","ri-hand-coin-fill":"edf0","ri-hand-coin-line":"edf1","ri-hand-heart-fill":"edf2","ri-hand-heart-line":"edf3","ri-hand-sanitizer-fill":"edf4","ri-hand-sanitizer-line":"edf5","ri-handbag-fill":"edf6","ri-handbag-line":"edf7","ri-hard-drive-2-fill":"edf8","ri-hard-drive-2-line":"edf9","ri-hard-drive-fill":"edfa","ri-hard-drive-line":"edfb","ri-hashtag":"edfc","ri-haze-2-fill":"edfd","ri-haze-2-line":"edfe","ri-haze-fill":"edff","ri-haze-line":"ee00","ri-hd-fill":"ee01","ri-hd-line":"ee02","ri-heading":"ee03","ri-headphone-fill":"ee04","ri-headphone-line":"ee05","ri-health-book-fill":"ee06","ri-health-book-line":"ee07","ri-heart-2-fill":"ee08","ri-heart-2-line":"ee09","ri-heart-3-fill":"ee0a","ri-heart-3-line":"ee0b","ri-heart-add-fill":"ee0c","ri-heart-add-line":"ee0d","ri-heart-fill":"ee0e","ri-heart-line":"ee0f","ri-heart-pulse-fill":"ee10","ri-heart-pulse-line":"ee11","ri-hearts-fill":"ee12","ri-hearts-line":"ee13","ri-heavy-showers-fill":"ee14","ri-heavy-showers-line":"ee15","ri-history-fill":"ee16","ri-history-line":"ee17","ri-home-2-fill":"ee18","ri-home-2-line":"ee19","ri-home-3-fill":"ee1a","ri-home-3-line":"ee1b","ri-home-4-fill":"ee1c","ri-home-4-line":"ee1d","ri-home-5-fill":"ee1e","ri-home-5-line":"ee1f","ri-home-6-fill":"ee20","ri-home-6-line":"ee21","ri-home-7-fill":"ee22","ri-home-7-line":"ee23","ri-home-8-fill":"ee24","ri-home-8-line":"ee25","ri-home-fill":"ee26","ri-home-gear-fill":"ee27","ri-home-gear-line":"ee28","ri-home-heart-fill":"ee29","ri-home-heart-line":"ee2a","ri-home-line":"ee2b","ri-home-smile-2-fill":"ee2c","ri-home-smile-2-line":"ee2d","ri-home-smile-fill":"ee2e","ri-home-smile-line":"ee2f","ri-home-wifi-fill":"ee30","ri-home-wifi-line":"ee31","ri-honor-of-kings-fill":"ee32","ri-honor-of-kings-line":"ee33","ri-honour-fill":"ee34","ri-honour-line":"ee35","ri-hospital-fill":"ee36","ri-hospital-line":"ee37","ri-hotel-bed-fill":"ee38","ri-hotel-bed-line":"ee39","ri-hotel-fill":"ee3a","ri-hotel-line":"ee3b","ri-hotspot-fill":"ee3c","ri-hotspot-line":"ee3d","ri-hq-fill":"ee3e","ri-hq-line":"ee3f","ri-html5-fill":"ee40","ri-html5-line":"ee41","ri-ie-fill":"ee42","ri-ie-line":"ee43","ri-image-2-fill":"ee44","ri-image-2-line":"ee45","ri-image-add-fill":"ee46","ri-image-add-line":"ee47","ri-image-edit-fill":"ee48","ri-image-edit-line":"ee49","ri-image-fill":"ee4a","ri-image-line":"ee4b","ri-inbox-archive-fill":"ee4c","ri-inbox-archive-line":"ee4d","ri-inbox-fill":"ee4e","ri-inbox-line":"ee4f","ri-inbox-unarchive-fill":"ee50","ri-inbox-unarchive-line":"ee51","ri-increase-decrease-fill":"ee52","ri-increase-decrease-line":"ee53","ri-indent-decrease":"ee54","ri-indent-increase":"ee55","ri-indeterminate-circle-fill":"ee56","ri-indeterminate-circle-line":"ee57","ri-information-fill":"ee58","ri-information-line":"ee59","ri-infrared-thermometer-fill":"ee5a","ri-infrared-thermometer-line":"ee5b","ri-ink-bottle-fill":"ee5c","ri-ink-bottle-line":"ee5d","ri-input-cursor-move":"ee5e","ri-input-method-fill":"ee5f","ri-input-method-line":"ee60","ri-insert-column-left":"ee61","ri-insert-column-right":"ee62","ri-insert-row-bottom":"ee63","ri-insert-row-top":"ee64","ri-instagram-fill":"ee65","ri-instagram-line":"ee66","ri-install-fill":"ee67","ri-install-line":"ee68","ri-invision-fill":"ee69","ri-invision-line":"ee6a","ri-italic":"ee6b","ri-kakao-talk-fill":"ee6c","ri-kakao-talk-line":"ee6d","ri-key-2-fill":"ee6e","ri-key-2-line":"ee6f","ri-key-fill":"ee70","ri-key-line":"ee71","ri-keyboard-box-fill":"ee72","ri-keyboard-box-line":"ee73","ri-keyboard-fill":"ee74","ri-keyboard-line":"ee75","ri-keynote-fill":"ee76","ri-keynote-line":"ee77","ri-knife-blood-fill":"ee78","ri-knife-blood-line":"ee79","ri-knife-fill":"ee7a","ri-knife-line":"ee7b","ri-landscape-fill":"ee7c","ri-landscape-line":"ee7d","ri-layout-2-fill":"ee7e","ri-layout-2-line":"ee7f","ri-layout-3-fill":"ee80","ri-layout-3-line":"ee81","ri-layout-4-fill":"ee82","ri-layout-4-line":"ee83","ri-layout-5-fill":"ee84","ri-layout-5-line":"ee85","ri-layout-6-fill":"ee86","ri-layout-6-line":"ee87","ri-layout-bottom-2-fill":"ee88","ri-layout-bottom-2-line":"ee89","ri-layout-bottom-fill":"ee8a","ri-layout-bottom-line":"ee8b","ri-layout-column-fill":"ee8c","ri-layout-column-line":"ee8d","ri-layout-fill":"ee8e","ri-layout-grid-fill":"ee8f","ri-layout-grid-line":"ee90","ri-layout-left-2-fill":"ee91","ri-layout-left-2-line":"ee92","ri-layout-left-fill":"ee93","ri-layout-left-line":"ee94","ri-layout-line":"ee95","ri-layout-masonry-fill":"ee96","ri-layout-masonry-line":"ee97","ri-layout-right-2-fill":"ee98","ri-layout-right-2-line":"ee99","ri-layout-right-fill":"ee9a","ri-layout-right-line":"ee9b","ri-layout-row-fill":"ee9c","ri-layout-row-line":"ee9d","ri-layout-top-2-fill":"ee9e","ri-layout-top-2-line":"ee9f","ri-layout-top-fill":"eea0","ri-layout-top-line":"eea1","ri-leaf-fill":"eea2","ri-leaf-line":"eea3","ri-lifebuoy-fill":"eea4","ri-lifebuoy-line":"eea5","ri-lightbulb-fill":"eea6","ri-lightbulb-flash-fill":"eea7","ri-lightbulb-flash-line":"eea8","ri-lightbulb-line":"eea9","ri-line-chart-fill":"eeaa","ri-line-chart-line":"eeab","ri-line-fill":"eeac","ri-line-height":"eead","ri-line-line":"eeae","ri-link-m":"eeaf","ri-link-unlink-m":"eeb0","ri-link-unlink":"eeb1","ri-link":"eeb2","ri-linkedin-box-fill":"eeb3","ri-linkedin-box-line":"eeb4","ri-linkedin-fill":"eeb5","ri-linkedin-line":"eeb6","ri-links-fill":"eeb7","ri-links-line":"eeb8","ri-list-check-2":"eeb9","ri-list-check":"eeba","ri-list-ordered":"eebb","ri-list-settings-fill":"eebc","ri-list-settings-line":"eebd","ri-list-unordered":"eebe","ri-live-fill":"eebf","ri-live-line":"eec0","ri-loader-2-fill":"eec1","ri-loader-2-line":"eec2","ri-loader-3-fill":"eec3","ri-loader-3-line":"eec4","ri-loader-4-fill":"eec5","ri-loader-4-line":"eec6","ri-loader-5-fill":"eec7","ri-loader-5-line":"eec8","ri-loader-fill":"eec9","ri-loader-line":"eeca","ri-lock-2-fill":"eecb","ri-lock-2-line":"eecc","ri-lock-fill":"eecd","ri-lock-line":"eece","ri-lock-password-fill":"eecf","ri-lock-password-line":"eed0","ri-lock-unlock-fill":"eed1","ri-lock-unlock-line":"eed2","ri-login-box-fill":"eed3","ri-login-box-line":"eed4","ri-login-circle-fill":"eed5","ri-login-circle-line":"eed6","ri-logout-box-fill":"eed7","ri-logout-box-line":"eed8","ri-logout-box-r-fill":"eed9","ri-logout-box-r-line":"eeda","ri-logout-circle-fill":"eedb","ri-logout-circle-line":"eedc","ri-logout-circle-r-fill":"eedd","ri-logout-circle-r-line":"eede","ri-luggage-cart-fill":"eedf","ri-luggage-cart-line":"eee0","ri-luggage-deposit-fill":"eee1","ri-luggage-deposit-line":"eee2","ri-lungs-fill":"eee3","ri-lungs-line":"eee4","ri-mac-fill":"eee5","ri-mac-line":"eee6","ri-macbook-fill":"eee7","ri-macbook-line":"eee8","ri-magic-fill":"eee9","ri-magic-line":"eeea","ri-mail-add-fill":"eeeb","ri-mail-add-line":"eeec","ri-mail-check-fill":"eeed","ri-mail-check-line":"eeee","ri-mail-close-fill":"eeef","ri-mail-close-line":"eef0","ri-mail-download-fill":"eef1","ri-mail-download-line":"eef2","ri-mail-fill":"eef3","ri-mail-forbid-fill":"eef4","ri-mail-forbid-line":"eef5","ri-mail-line":"eef6","ri-mail-lock-fill":"eef7","ri-mail-lock-line":"eef8","ri-mail-open-fill":"eef9","ri-mail-open-line":"eefa","ri-mail-send-fill":"eefb","ri-mail-send-line":"eefc","ri-mail-settings-fill":"eefd","ri-mail-settings-line":"eefe","ri-mail-star-fill":"eeff","ri-mail-star-line":"ef00","ri-mail-unread-fill":"ef01","ri-mail-unread-line":"ef02","ri-mail-volume-fill":"ef03","ri-mail-volume-line":"ef04","ri-map-2-fill":"ef05","ri-map-2-line":"ef06","ri-map-fill":"ef07","ri-map-line":"ef08","ri-map-pin-2-fill":"ef09","ri-map-pin-2-line":"ef0a","ri-map-pin-3-fill":"ef0b","ri-map-pin-3-line":"ef0c","ri-map-pin-4-fill":"ef0d","ri-map-pin-4-line":"ef0e","ri-map-pin-5-fill":"ef0f","ri-map-pin-5-line":"ef10","ri-map-pin-add-fill":"ef11","ri-map-pin-add-line":"ef12","ri-map-pin-fill":"ef13","ri-map-pin-line":"ef14","ri-map-pin-range-fill":"ef15","ri-map-pin-range-line":"ef16","ri-map-pin-time-fill":"ef17","ri-map-pin-time-line":"ef18","ri-map-pin-user-fill":"ef19","ri-map-pin-user-line":"ef1a","ri-mark-pen-fill":"ef1b","ri-mark-pen-line":"ef1c","ri-markdown-fill":"ef1d","ri-markdown-line":"ef1e","ri-markup-fill":"ef1f","ri-markup-line":"ef20","ri-mastercard-fill":"ef21","ri-mastercard-line":"ef22","ri-mastodon-fill":"ef23","ri-mastodon-line":"ef24","ri-medal-2-fill":"ef25","ri-medal-2-line":"ef26","ri-medal-fill":"ef27","ri-medal-line":"ef28","ri-medicine-bottle-fill":"ef29","ri-medicine-bottle-line":"ef2a","ri-medium-fill":"ef2b","ri-medium-line":"ef2c","ri-men-fill":"ef2d","ri-men-line":"ef2e","ri-mental-health-fill":"ef2f","ri-mental-health-line":"ef30","ri-menu-2-fill":"ef31","ri-menu-2-line":"ef32","ri-menu-3-fill":"ef33","ri-menu-3-line":"ef34","ri-menu-4-fill":"ef35","ri-menu-4-line":"ef36","ri-menu-5-fill":"ef37","ri-menu-5-line":"ef38","ri-menu-add-fill":"ef39","ri-menu-add-line":"ef3a","ri-menu-fill":"ef3b","ri-menu-fold-fill":"ef3c","ri-menu-fold-line":"ef3d","ri-menu-line":"ef3e","ri-menu-unfold-fill":"ef3f","ri-menu-unfold-line":"ef40","ri-merge-cells-horizontal":"ef41","ri-merge-cells-vertical":"ef42","ri-message-2-fill":"ef43","ri-message-2-line":"ef44","ri-message-3-fill":"ef45","ri-message-3-line":"ef46","ri-message-fill":"ef47","ri-message-line":"ef48","ri-messenger-fill":"ef49","ri-messenger-line":"ef4a","ri-meteor-fill":"ef4b","ri-meteor-line":"ef4c","ri-mic-2-fill":"ef4d","ri-mic-2-line":"ef4e","ri-mic-fill":"ef4f","ri-mic-line":"ef50","ri-mic-off-fill":"ef51","ri-mic-off-line":"ef52","ri-mickey-fill":"ef53","ri-mickey-line":"ef54","ri-microscope-fill":"ef55","ri-microscope-line":"ef56","ri-microsoft-fill":"ef57","ri-microsoft-line":"ef58","ri-mind-map":"ef59","ri-mini-program-fill":"ef5a","ri-mini-program-line":"ef5b","ri-mist-fill":"ef5c","ri-mist-line":"ef5d","ri-money-cny-box-fill":"ef5e","ri-money-cny-box-line":"ef5f","ri-money-cny-circle-fill":"ef60","ri-money-cny-circle-line":"ef61","ri-money-dollar-box-fill":"ef62","ri-money-dollar-box-line":"ef63","ri-money-dollar-circle-fill":"ef64","ri-money-dollar-circle-line":"ef65","ri-money-euro-box-fill":"ef66","ri-money-euro-box-line":"ef67","ri-money-euro-circle-fill":"ef68","ri-money-euro-circle-line":"ef69","ri-money-pound-box-fill":"ef6a","ri-money-pound-box-line":"ef6b","ri-money-pound-circle-fill":"ef6c","ri-money-pound-circle-line":"ef6d","ri-moon-clear-fill":"ef6e","ri-moon-clear-line":"ef6f","ri-moon-cloudy-fill":"ef70","ri-moon-cloudy-line":"ef71","ri-moon-fill":"ef72","ri-moon-foggy-fill":"ef73","ri-moon-foggy-line":"ef74","ri-moon-line":"ef75","ri-more-2-fill":"ef76","ri-more-2-line":"ef77","ri-more-fill":"ef78","ri-more-line":"ef79","ri-motorbike-fill":"ef7a","ri-motorbike-line":"ef7b","ri-mouse-fill":"ef7c","ri-mouse-line":"ef7d","ri-movie-2-fill":"ef7e","ri-movie-2-line":"ef7f","ri-movie-fill":"ef80","ri-movie-line":"ef81","ri-music-2-fill":"ef82","ri-music-2-line":"ef83","ri-music-fill":"ef84","ri-music-line":"ef85","ri-mv-fill":"ef86","ri-mv-line":"ef87","ri-navigation-fill":"ef88","ri-navigation-line":"ef89","ri-netease-cloud-music-fill":"ef8a","ri-netease-cloud-music-line":"ef8b","ri-netflix-fill":"ef8c","ri-netflix-line":"ef8d","ri-newspaper-fill":"ef8e","ri-newspaper-line":"ef8f","ri-node-tree":"ef90","ri-notification-2-fill":"ef91","ri-notification-2-line":"ef92","ri-notification-3-fill":"ef93","ri-notification-3-line":"ef94","ri-notification-4-fill":"ef95","ri-notification-4-line":"ef96","ri-notification-badge-fill":"ef97","ri-notification-badge-line":"ef98","ri-notification-fill":"ef99","ri-notification-line":"ef9a","ri-notification-off-fill":"ef9b","ri-notification-off-line":"ef9c","ri-npmjs-fill":"ef9d","ri-npmjs-line":"ef9e","ri-number-0":"ef9f","ri-number-1":"efa0","ri-number-2":"efa1","ri-number-3":"efa2","ri-number-4":"efa3","ri-number-5":"efa4","ri-number-6":"efa5","ri-number-7":"efa6","ri-number-8":"efa7","ri-number-9":"efa8","ri-numbers-fill":"efa9","ri-numbers-line":"efaa","ri-nurse-fill":"efab","ri-nurse-line":"efac","ri-oil-fill":"efad","ri-oil-line":"efae","ri-omega":"efaf","ri-open-arm-fill":"efb0","ri-open-arm-line":"efb1","ri-open-source-fill":"efb2","ri-open-source-line":"efb3","ri-opera-fill":"efb4","ri-opera-line":"efb5","ri-order-play-fill":"efb6","ri-order-play-line":"efb7","ri-organization-chart":"efb8","ri-outlet-2-fill":"efb9","ri-outlet-2-line":"efba","ri-outlet-fill":"efbb","ri-outlet-line":"efbc","ri-page-separator":"efbd","ri-pages-fill":"efbe","ri-pages-line":"efbf","ri-paint-brush-fill":"efc0","ri-paint-brush-line":"efc1","ri-paint-fill":"efc2","ri-paint-line":"efc3","ri-palette-fill":"efc4","ri-palette-line":"efc5","ri-pantone-fill":"efc6","ri-pantone-line":"efc7","ri-paragraph":"efc8","ri-parent-fill":"efc9","ri-parent-line":"efca","ri-parentheses-fill":"efcb","ri-parentheses-line":"efcc","ri-parking-box-fill":"efcd","ri-parking-box-line":"efce","ri-parking-fill":"efcf","ri-parking-line":"efd0","ri-passport-fill":"efd1","ri-passport-line":"efd2","ri-patreon-fill":"efd3","ri-patreon-line":"efd4","ri-pause-circle-fill":"efd5","ri-pause-circle-line":"efd6","ri-pause-fill":"efd7","ri-pause-line":"efd8","ri-pause-mini-fill":"efd9","ri-pause-mini-line":"efda","ri-paypal-fill":"efdb","ri-paypal-line":"efdc","ri-pen-nib-fill":"efdd","ri-pen-nib-line":"efde","ri-pencil-fill":"efdf","ri-pencil-line":"efe0","ri-pencil-ruler-2-fill":"efe1","ri-pencil-ruler-2-line":"efe2","ri-pencil-ruler-fill":"efe3","ri-pencil-ruler-line":"efe4","ri-percent-fill":"efe5","ri-percent-line":"efe6","ri-phone-camera-fill":"efe7","ri-phone-camera-line":"efe8","ri-phone-fill":"efe9","ri-phone-find-fill":"efea","ri-phone-find-line":"efeb","ri-phone-line":"efec","ri-phone-lock-fill":"efed","ri-phone-lock-line":"efee","ri-picture-in-picture-2-fill":"efef","ri-picture-in-picture-2-line":"eff0","ri-picture-in-picture-exit-fill":"eff1","ri-picture-in-picture-exit-line":"eff2","ri-picture-in-picture-fill":"eff3","ri-picture-in-picture-line":"eff4","ri-pie-chart-2-fill":"eff5","ri-pie-chart-2-line":"eff6","ri-pie-chart-box-fill":"eff7","ri-pie-chart-box-line":"eff8","ri-pie-chart-fill":"eff9","ri-pie-chart-line":"effa","ri-pin-distance-fill":"effb","ri-pin-distance-line":"effc","ri-ping-pong-fill":"effd","ri-ping-pong-line":"effe","ri-pinterest-fill":"efff","ri-pinterest-line":"f000","ri-pinyin-input":"f001","ri-pixelfed-fill":"f002","ri-pixelfed-line":"f003","ri-plane-fill":"f004","ri-plane-line":"f005","ri-plant-fill":"f006","ri-plant-line":"f007","ri-play-circle-fill":"f008","ri-play-circle-line":"f009","ri-play-fill":"f00a","ri-play-line":"f00b","ri-play-list-2-fill":"f00c","ri-play-list-2-line":"f00d","ri-play-list-add-fill":"f00e","ri-play-list-add-line":"f00f","ri-play-list-fill":"f010","ri-play-list-line":"f011","ri-play-mini-fill":"f012","ri-play-mini-line":"f013","ri-playstation-fill":"f014","ri-playstation-line":"f015","ri-plug-2-fill":"f016","ri-plug-2-line":"f017","ri-plug-fill":"f018","ri-plug-line":"f019","ri-polaroid-2-fill":"f01a","ri-polaroid-2-line":"f01b","ri-polaroid-fill":"f01c","ri-polaroid-line":"f01d","ri-police-car-fill":"f01e","ri-police-car-line":"f01f","ri-price-tag-2-fill":"f020","ri-price-tag-2-line":"f021","ri-price-tag-3-fill":"f022","ri-price-tag-3-line":"f023","ri-price-tag-fill":"f024","ri-price-tag-line":"f025","ri-printer-cloud-fill":"f026","ri-printer-cloud-line":"f027","ri-printer-fill":"f028","ri-printer-line":"f029","ri-product-hunt-fill":"f02a","ri-product-hunt-line":"f02b","ri-profile-fill":"f02c","ri-profile-line":"f02d","ri-projector-2-fill":"f02e","ri-projector-2-line":"f02f","ri-projector-fill":"f030","ri-projector-line":"f031","ri-psychotherapy-fill":"f032","ri-psychotherapy-line":"f033","ri-pulse-fill":"f034","ri-pulse-line":"f035","ri-pushpin-2-fill":"f036","ri-pushpin-2-line":"f037","ri-pushpin-fill":"f038","ri-pushpin-line":"f039","ri-qq-fill":"f03a","ri-qq-line":"f03b","ri-qr-code-fill":"f03c","ri-qr-code-line":"f03d","ri-qr-scan-2-fill":"f03e","ri-qr-scan-2-line":"f03f","ri-qr-scan-fill":"f040","ri-qr-scan-line":"f041","ri-question-answer-fill":"f042","ri-question-answer-line":"f043","ri-question-fill":"f044","ri-question-line":"f045","ri-question-mark":"f046","ri-questionnaire-fill":"f047","ri-questionnaire-line":"f048","ri-quill-pen-fill":"f049","ri-quill-pen-line":"f04a","ri-radar-fill":"f04b","ri-radar-line":"f04c","ri-radio-2-fill":"f04d","ri-radio-2-line":"f04e","ri-radio-button-fill":"f04f","ri-radio-button-line":"f050","ri-radio-fill":"f051","ri-radio-line":"f052","ri-rainbow-fill":"f053","ri-rainbow-line":"f054","ri-rainy-fill":"f055","ri-rainy-line":"f056","ri-reactjs-fill":"f057","ri-reactjs-line":"f058","ri-record-circle-fill":"f059","ri-record-circle-line":"f05a","ri-record-mail-fill":"f05b","ri-record-mail-line":"f05c","ri-recycle-fill":"f05d","ri-recycle-line":"f05e","ri-red-packet-fill":"f05f","ri-red-packet-line":"f060","ri-reddit-fill":"f061","ri-reddit-line":"f062","ri-refresh-fill":"f063","ri-refresh-line":"f064","ri-refund-2-fill":"f065","ri-refund-2-line":"f066","ri-refund-fill":"f067","ri-refund-line":"f068","ri-registered-fill":"f069","ri-registered-line":"f06a","ri-remixicon-fill":"f06b","ri-remixicon-line":"f06c","ri-remote-control-2-fill":"f06d","ri-remote-control-2-line":"f06e","ri-remote-control-fill":"f06f","ri-remote-control-line":"f070","ri-repeat-2-fill":"f071","ri-repeat-2-line":"f072","ri-repeat-fill":"f073","ri-repeat-line":"f074","ri-repeat-one-fill":"f075","ri-repeat-one-line":"f076","ri-reply-all-fill":"f077","ri-reply-all-line":"f078","ri-reply-fill":"f079","ri-reply-line":"f07a","ri-reserved-fill":"f07b","ri-reserved-line":"f07c","ri-rest-time-fill":"f07d","ri-rest-time-line":"f07e","ri-restart-fill":"f07f","ri-restart-line":"f080","ri-restaurant-2-fill":"f081","ri-restaurant-2-line":"f082","ri-restaurant-fill":"f083","ri-restaurant-line":"f084","ri-rewind-fill":"f085","ri-rewind-line":"f086","ri-rewind-mini-fill":"f087","ri-rewind-mini-line":"f088","ri-rhythm-fill":"f089","ri-rhythm-line":"f08a","ri-riding-fill":"f08b","ri-riding-line":"f08c","ri-road-map-fill":"f08d","ri-road-map-line":"f08e","ri-roadster-fill":"f08f","ri-roadster-line":"f090","ri-robot-fill":"f091","ri-robot-line":"f092","ri-rocket-2-fill":"f093","ri-rocket-2-line":"f094","ri-rocket-fill":"f095","ri-rocket-line":"f096","ri-rotate-lock-fill":"f097","ri-rotate-lock-line":"f098","ri-rounded-corner":"f099","ri-route-fill":"f09a","ri-route-line":"f09b","ri-router-fill":"f09c","ri-router-line":"f09d","ri-rss-fill":"f09e","ri-rss-line":"f09f","ri-ruler-2-fill":"f0a0","ri-ruler-2-line":"f0a1","ri-ruler-fill":"f0a2","ri-ruler-line":"f0a3","ri-run-fill":"f0a4","ri-run-line":"f0a5","ri-safari-fill":"f0a6","ri-safari-line":"f0a7","ri-safe-2-fill":"f0a8","ri-safe-2-line":"f0a9","ri-safe-fill":"f0aa","ri-safe-line":"f0ab","ri-sailboat-fill":"f0ac","ri-sailboat-line":"f0ad","ri-save-2-fill":"f0ae","ri-save-2-line":"f0af","ri-save-3-fill":"f0b0","ri-save-3-line":"f0b1","ri-save-fill":"f0b2","ri-save-line":"f0b3","ri-scales-2-fill":"f0b4","ri-scales-2-line":"f0b5","ri-scales-3-fill":"f0b6","ri-scales-3-line":"f0b7","ri-scales-fill":"f0b8","ri-scales-line":"f0b9","ri-scan-2-fill":"f0ba","ri-scan-2-line":"f0bb","ri-scan-fill":"f0bc","ri-scan-line":"f0bd","ri-scissors-2-fill":"f0be","ri-scissors-2-line":"f0bf","ri-scissors-cut-fill":"f0c0","ri-scissors-cut-line":"f0c1","ri-scissors-fill":"f0c2","ri-scissors-line":"f0c3","ri-screenshot-2-fill":"f0c4","ri-screenshot-2-line":"f0c5","ri-screenshot-fill":"f0c6","ri-screenshot-line":"f0c7","ri-sd-card-fill":"f0c8","ri-sd-card-line":"f0c9","ri-sd-card-mini-fill":"f0ca","ri-sd-card-mini-line":"f0cb","ri-search-2-fill":"f0cc","ri-search-2-line":"f0cd","ri-search-eye-fill":"f0ce","ri-search-eye-line":"f0cf","ri-search-fill":"f0d0","ri-search-line":"f0d1","ri-secure-payment-fill":"f0d2","ri-secure-payment-line":"f0d3","ri-seedling-fill":"f0d4","ri-seedling-line":"f0d5","ri-send-backward":"f0d6","ri-send-plane-2-fill":"f0d7","ri-send-plane-2-line":"f0d8","ri-send-plane-fill":"f0d9","ri-send-plane-line":"f0da","ri-send-to-back":"f0db","ri-sensor-fill":"f0dc","ri-sensor-line":"f0dd","ri-separator":"f0de","ri-server-fill":"f0df","ri-server-line":"f0e0","ri-service-fill":"f0e1","ri-service-line":"f0e2","ri-settings-2-fill":"f0e3","ri-settings-2-line":"f0e4","ri-settings-3-fill":"f0e5","ri-settings-3-line":"f0e6","ri-settings-4-fill":"f0e7","ri-settings-4-line":"f0e8","ri-settings-5-fill":"f0e9","ri-settings-5-line":"f0ea","ri-settings-6-fill":"f0eb","ri-settings-6-line":"f0ec","ri-settings-fill":"f0ed","ri-settings-line":"f0ee","ri-shape-2-fill":"f0ef","ri-shape-2-line":"f0f0","ri-shape-fill":"f0f1","ri-shape-line":"f0f2","ri-share-box-fill":"f0f3","ri-share-box-line":"f0f4","ri-share-circle-fill":"f0f5","ri-share-circle-line":"f0f6","ri-share-fill":"f0f7","ri-share-forward-2-fill":"f0f8","ri-share-forward-2-line":"f0f9","ri-share-forward-box-fill":"f0fa","ri-share-forward-box-line":"f0fb","ri-share-forward-fill":"f0fc","ri-share-forward-line":"f0fd","ri-share-line":"f0fe","ri-shield-check-fill":"f0ff","ri-shield-check-line":"f100","ri-shield-cross-fill":"f101","ri-shield-cross-line":"f102","ri-shield-fill":"f103","ri-shield-flash-fill":"f104","ri-shield-flash-line":"f105","ri-shield-keyhole-fill":"f106","ri-shield-keyhole-line":"f107","ri-shield-line":"f108","ri-shield-star-fill":"f109","ri-shield-star-line":"f10a","ri-shield-user-fill":"f10b","ri-shield-user-line":"f10c","ri-ship-2-fill":"f10d","ri-ship-2-line":"f10e","ri-ship-fill":"f10f","ri-ship-line":"f110","ri-shirt-fill":"f111","ri-shirt-line":"f112","ri-shopping-bag-2-fill":"f113","ri-shopping-bag-2-line":"f114","ri-shopping-bag-3-fill":"f115","ri-shopping-bag-3-line":"f116","ri-shopping-bag-fill":"f117","ri-shopping-bag-line":"f118","ri-shopping-basket-2-fill":"f119","ri-shopping-basket-2-line":"f11a","ri-shopping-basket-fill":"f11b","ri-shopping-basket-line":"f11c","ri-shopping-cart-2-fill":"f11d","ri-shopping-cart-2-line":"f11e","ri-shopping-cart-fill":"f11f","ri-shopping-cart-line":"f120","ri-showers-fill":"f121","ri-showers-line":"f122","ri-shuffle-fill":"f123","ri-shuffle-line":"f124","ri-shut-down-fill":"f125","ri-shut-down-line":"f126","ri-side-bar-fill":"f127","ri-side-bar-line":"f128","ri-signal-tower-fill":"f129","ri-signal-tower-line":"f12a","ri-signal-wifi-1-fill":"f12b","ri-signal-wifi-1-line":"f12c","ri-signal-wifi-2-fill":"f12d","ri-signal-wifi-2-line":"f12e","ri-signal-wifi-3-fill":"f12f","ri-signal-wifi-3-line":"f130","ri-signal-wifi-error-fill":"f131","ri-signal-wifi-error-line":"f132","ri-signal-wifi-fill":"f133","ri-signal-wifi-line":"f134","ri-signal-wifi-off-fill":"f135","ri-signal-wifi-off-line":"f136","ri-sim-card-2-fill":"f137","ri-sim-card-2-line":"f138","ri-sim-card-fill":"f139","ri-sim-card-line":"f13a","ri-single-quotes-l":"f13b","ri-single-quotes-r":"f13c","ri-sip-fill":"f13d","ri-sip-line":"f13e","ri-skip-back-fill":"f13f","ri-skip-back-line":"f140","ri-skip-back-mini-fill":"f141","ri-skip-back-mini-line":"f142","ri-skip-forward-fill":"f143","ri-skip-forward-line":"f144","ri-skip-forward-mini-fill":"f145","ri-skip-forward-mini-line":"f146","ri-skull-2-fill":"f147","ri-skull-2-line":"f148","ri-skull-fill":"f149","ri-skull-line":"f14a","ri-skype-fill":"f14b","ri-skype-line":"f14c","ri-slack-fill":"f14d","ri-slack-line":"f14e","ri-slice-fill":"f14f","ri-slice-line":"f150","ri-slideshow-2-fill":"f151","ri-slideshow-2-line":"f152","ri-slideshow-3-fill":"f153","ri-slideshow-3-line":"f154","ri-slideshow-4-fill":"f155","ri-slideshow-4-line":"f156","ri-slideshow-fill":"f157","ri-slideshow-line":"f158","ri-smartphone-fill":"f159","ri-smartphone-line":"f15a","ri-snapchat-fill":"f15b","ri-snapchat-line":"f15c","ri-snowy-fill":"f15d","ri-snowy-line":"f15e","ri-sort-asc":"f15f","ri-sort-desc":"f160","ri-sound-module-fill":"f161","ri-sound-module-line":"f162","ri-soundcloud-fill":"f163","ri-soundcloud-line":"f164","ri-space-ship-fill":"f165","ri-space-ship-line":"f166","ri-space":"f167","ri-spam-2-fill":"f168","ri-spam-2-line":"f169","ri-spam-3-fill":"f16a","ri-spam-3-line":"f16b","ri-spam-fill":"f16c","ri-spam-line":"f16d","ri-speaker-2-fill":"f16e","ri-speaker-2-line":"f16f","ri-speaker-3-fill":"f170","ri-speaker-3-line":"f171","ri-speaker-fill":"f172","ri-speaker-line":"f173","ri-spectrum-fill":"f174","ri-spectrum-line":"f175","ri-speed-fill":"f176","ri-speed-line":"f177","ri-speed-mini-fill":"f178","ri-speed-mini-line":"f179","ri-split-cells-horizontal":"f17a","ri-split-cells-vertical":"f17b","ri-spotify-fill":"f17c","ri-spotify-line":"f17d","ri-spy-fill":"f17e","ri-spy-line":"f17f","ri-stack-fill":"f180","ri-stack-line":"f181","ri-stack-overflow-fill":"f182","ri-stack-overflow-line":"f183","ri-stackshare-fill":"f184","ri-stackshare-line":"f185","ri-star-fill":"f186","ri-star-half-fill":"f187","ri-star-half-line":"f188","ri-star-half-s-fill":"f189","ri-star-half-s-line":"f18a","ri-star-line":"f18b","ri-star-s-fill":"f18c","ri-star-s-line":"f18d","ri-star-smile-fill":"f18e","ri-star-smile-line":"f18f","ri-steam-fill":"f190","ri-steam-line":"f191","ri-steering-2-fill":"f192","ri-steering-2-line":"f193","ri-steering-fill":"f194","ri-steering-line":"f195","ri-stethoscope-fill":"f196","ri-stethoscope-line":"f197","ri-sticky-note-2-fill":"f198","ri-sticky-note-2-line":"f199","ri-sticky-note-fill":"f19a","ri-sticky-note-line":"f19b","ri-stock-fill":"f19c","ri-stock-line":"f19d","ri-stop-circle-fill":"f19e","ri-stop-circle-line":"f19f","ri-stop-fill":"f1a0","ri-stop-line":"f1a1","ri-stop-mini-fill":"f1a2","ri-stop-mini-line":"f1a3","ri-store-2-fill":"f1a4","ri-store-2-line":"f1a5","ri-store-3-fill":"f1a6","ri-store-3-line":"f1a7","ri-store-fill":"f1a8","ri-store-line":"f1a9","ri-strikethrough-2":"f1aa","ri-strikethrough":"f1ab","ri-subscript-2":"f1ac","ri-subscript":"f1ad","ri-subtract-fill":"f1ae","ri-subtract-line":"f1af","ri-subway-fill":"f1b0","ri-subway-line":"f1b1","ri-subway-wifi-fill":"f1b2","ri-subway-wifi-line":"f1b3","ri-suitcase-2-fill":"f1b4","ri-suitcase-2-line":"f1b5","ri-suitcase-3-fill":"f1b6","ri-suitcase-3-line":"f1b7","ri-suitcase-fill":"f1b8","ri-suitcase-line":"f1b9","ri-sun-cloudy-fill":"f1ba","ri-sun-cloudy-line":"f1bb","ri-sun-fill":"f1bc","ri-sun-foggy-fill":"f1bd","ri-sun-foggy-line":"f1be","ri-sun-line":"f1bf","ri-superscript-2":"f1c0","ri-superscript":"f1c1","ri-surgical-mask-fill":"f1c2","ri-surgical-mask-line":"f1c3","ri-surround-sound-fill":"f1c4","ri-surround-sound-line":"f1c5","ri-survey-fill":"f1c6","ri-survey-line":"f1c7","ri-swap-box-fill":"f1c8","ri-swap-box-line":"f1c9","ri-swap-fill":"f1ca","ri-swap-line":"f1cb","ri-switch-fill":"f1cc","ri-switch-line":"f1cd","ri-sword-fill":"f1ce","ri-sword-line":"f1cf","ri-syringe-fill":"f1d0","ri-syringe-line":"f1d1","ri-t-box-fill":"f1d2","ri-t-box-line":"f1d3","ri-t-shirt-2-fill":"f1d4","ri-t-shirt-2-line":"f1d5","ri-t-shirt-air-fill":"f1d6","ri-t-shirt-air-line":"f1d7","ri-t-shirt-fill":"f1d8","ri-t-shirt-line":"f1d9","ri-table-2":"f1da","ri-table-alt-fill":"f1db","ri-table-alt-line":"f1dc","ri-table-fill":"f1dd","ri-table-line":"f1de","ri-tablet-fill":"f1df","ri-tablet-line":"f1e0","ri-takeaway-fill":"f1e1","ri-takeaway-line":"f1e2","ri-taobao-fill":"f1e3","ri-taobao-line":"f1e4","ri-tape-fill":"f1e5","ri-tape-line":"f1e6","ri-task-fill":"f1e7","ri-task-line":"f1e8","ri-taxi-fill":"f1e9","ri-taxi-line":"f1ea","ri-taxi-wifi-fill":"f1eb","ri-taxi-wifi-line":"f1ec","ri-team-fill":"f1ed","ri-team-line":"f1ee","ri-telegram-fill":"f1ef","ri-telegram-line":"f1f0","ri-temp-cold-fill":"f1f1","ri-temp-cold-line":"f1f2","ri-temp-hot-fill":"f1f3","ri-temp-hot-line":"f1f4","ri-terminal-box-fill":"f1f5","ri-terminal-box-line":"f1f6","ri-terminal-fill":"f1f7","ri-terminal-line":"f1f8","ri-terminal-window-fill":"f1f9","ri-terminal-window-line":"f1fa","ri-test-tube-fill":"f1fb","ri-test-tube-line":"f1fc","ri-text-direction-l":"f1fd","ri-text-direction-r":"f1fe","ri-text-spacing":"f1ff","ri-text-wrap":"f200","ri-text":"f201","ri-thermometer-fill":"f202","ri-thermometer-line":"f203","ri-thumb-down-fill":"f204","ri-thumb-down-line":"f205","ri-thumb-up-fill":"f206","ri-thumb-up-line":"f207","ri-thunderstorms-fill":"f208","ri-thunderstorms-line":"f209","ri-ticket-2-fill":"f20a","ri-ticket-2-line":"f20b","ri-ticket-fill":"f20c","ri-ticket-line":"f20d","ri-time-fill":"f20e","ri-time-line":"f20f","ri-timer-2-fill":"f210","ri-timer-2-line":"f211","ri-timer-fill":"f212","ri-timer-flash-fill":"f213","ri-timer-flash-line":"f214","ri-timer-line":"f215","ri-todo-fill":"f216","ri-todo-line":"f217","ri-toggle-fill":"f218","ri-toggle-line":"f219","ri-tools-fill":"f21a","ri-tools-line":"f21b","ri-tornado-fill":"f21c","ri-tornado-line":"f21d","ri-trademark-fill":"f21e","ri-trademark-line":"f21f","ri-traffic-light-fill":"f220","ri-traffic-light-line":"f221","ri-train-fill":"f222","ri-train-line":"f223","ri-train-wifi-fill":"f224","ri-train-wifi-line":"f225","ri-translate-2":"f226","ri-translate":"f227","ri-travesti-fill":"f228","ri-travesti-line":"f229","ri-treasure-map-fill":"f22a","ri-treasure-map-line":"f22b","ri-trello-fill":"f22c","ri-trello-line":"f22d","ri-trophy-fill":"f22e","ri-trophy-line":"f22f","ri-truck-fill":"f230","ri-truck-line":"f231","ri-tumblr-fill":"f232","ri-tumblr-line":"f233","ri-tv-2-fill":"f234","ri-tv-2-line":"f235","ri-tv-fill":"f236","ri-tv-line":"f237","ri-twitch-fill":"f238","ri-twitch-line":"f239","ri-twitter-fill":"f23a","ri-twitter-line":"f23b","ri-typhoon-fill":"f23c","ri-typhoon-line":"f23d","ri-u-disk-fill":"f23e","ri-u-disk-line":"f23f","ri-ubuntu-fill":"f240","ri-ubuntu-line":"f241","ri-umbrella-fill":"f242","ri-umbrella-line":"f243","ri-underline":"f244","ri-uninstall-fill":"f245","ri-uninstall-line":"f246","ri-unsplash-fill":"f247","ri-unsplash-line":"f248","ri-upload-2-fill":"f249","ri-upload-2-line":"f24a","ri-upload-cloud-2-fill":"f24b","ri-upload-cloud-2-line":"f24c","ri-upload-cloud-fill":"f24d","ri-upload-cloud-line":"f24e","ri-upload-fill":"f24f","ri-upload-line":"f250","ri-usb-fill":"f251","ri-usb-line":"f252","ri-user-2-fill":"f253","ri-user-2-line":"f254","ri-user-3-fill":"f255","ri-user-3-line":"f256","ri-user-4-fill":"f257","ri-user-4-line":"f258","ri-user-5-fill":"f259","ri-user-5-line":"f25a","ri-user-6-fill":"f25b","ri-user-6-line":"f25c","ri-user-add-fill":"f25d","ri-user-add-line":"f25e","ri-user-fill":"f25f","ri-user-follow-fill":"f260","ri-user-follow-line":"f261","ri-user-heart-fill":"f262","ri-user-heart-line":"f263","ri-user-line":"f264","ri-user-location-fill":"f265","ri-user-location-line":"f266","ri-user-received-2-fill":"f267","ri-user-received-2-line":"f268","ri-user-received-fill":"f269","ri-user-received-line":"f26a","ri-user-search-fill":"f26b","ri-user-search-line":"f26c","ri-user-settings-fill":"f26d","ri-user-settings-line":"f26e","ri-user-shared-2-fill":"f26f","ri-user-shared-2-line":"f270","ri-user-shared-fill":"f271","ri-user-shared-line":"f272","ri-user-smile-fill":"f273","ri-user-smile-line":"f274","ri-user-star-fill":"f275","ri-user-star-line":"f276","ri-user-unfollow-fill":"f277","ri-user-unfollow-line":"f278","ri-user-voice-fill":"f279","ri-user-voice-line":"f27a","ri-video-add-fill":"f27b","ri-video-add-line":"f27c","ri-video-chat-fill":"f27d","ri-video-chat-line":"f27e","ri-video-download-fill":"f27f","ri-video-download-line":"f280","ri-video-fill":"f281","ri-video-line":"f282","ri-video-upload-fill":"f283","ri-video-upload-line":"f284","ri-vidicon-2-fill":"f285","ri-vidicon-2-line":"f286","ri-vidicon-fill":"f287","ri-vidicon-line":"f288","ri-vimeo-fill":"f289","ri-vimeo-line":"f28a","ri-vip-crown-2-fill":"f28b","ri-vip-crown-2-line":"f28c","ri-vip-crown-fill":"f28d","ri-vip-crown-line":"f28e","ri-vip-diamond-fill":"f28f","ri-vip-diamond-line":"f290","ri-vip-fill":"f291","ri-vip-line":"f292","ri-virus-fill":"f293","ri-virus-line":"f294","ri-visa-fill":"f295","ri-visa-line":"f296","ri-voice-recognition-fill":"f297","ri-voice-recognition-line":"f298","ri-voiceprint-fill":"f299","ri-voiceprint-line":"f29a","ri-volume-down-fill":"f29b","ri-volume-down-line":"f29c","ri-volume-mute-fill":"f29d","ri-volume-mute-line":"f29e","ri-volume-off-vibrate-fill":"f29f","ri-volume-off-vibrate-line":"f2a0","ri-volume-up-fill":"f2a1","ri-volume-up-line":"f2a2","ri-volume-vibrate-fill":"f2a3","ri-volume-vibrate-line":"f2a4","ri-vuejs-fill":"f2a5","ri-vuejs-line":"f2a6","ri-walk-fill":"f2a7","ri-walk-line":"f2a8","ri-wallet-2-fill":"f2a9","ri-wallet-2-line":"f2aa","ri-wallet-3-fill":"f2ab","ri-wallet-3-line":"f2ac","ri-wallet-fill":"f2ad","ri-wallet-line":"f2ae","ri-water-flash-fill":"f2af","ri-water-flash-line":"f2b0","ri-webcam-fill":"f2b1","ri-webcam-line":"f2b2","ri-wechat-2-fill":"f2b3","ri-wechat-2-line":"f2b4","ri-wechat-fill":"f2b5","ri-wechat-line":"f2b6","ri-wechat-pay-fill":"f2b7","ri-wechat-pay-line":"f2b8","ri-weibo-fill":"f2b9","ri-weibo-line":"f2ba","ri-whatsapp-fill":"f2bb","ri-whatsapp-line":"f2bc","ri-wheelchair-fill":"f2bd","ri-wheelchair-line":"f2be","ri-wifi-fill":"f2bf","ri-wifi-line":"f2c0","ri-wifi-off-fill":"f2c1","ri-wifi-off-line":"f2c2","ri-window-2-fill":"f2c3","ri-window-2-line":"f2c4","ri-window-fill":"f2c5","ri-window-line":"f2c6","ri-windows-fill":"f2c7","ri-windows-line":"f2c8","ri-windy-fill":"f2c9","ri-windy-line":"f2ca","ri-wireless-charging-fill":"f2cb","ri-wireless-charging-line":"f2cc","ri-women-fill":"f2cd","ri-women-line":"f2ce","ri-wubi-input":"f2cf","ri-xbox-fill":"f2d0","ri-xbox-line":"f2d1","ri-xing-fill":"f2d2","ri-xing-line":"f2d3","ri-youtube-fill":"f2d4","ri-youtube-line":"f2d5","ri-zcool-fill":"f2d6","ri-zcool-line":"f2d7","ri-zhihu-fill":"f2d8","ri-zhihu-line":"f2d9","ri-zoom-in-fill":"f2da","ri-zoom-in-line":"f2db","ri-zoom-out-fill":"f2dc","ri-zoom-out-line":"f2dd","ri-zzz-fill":"f2de","ri-zzz-line":"f2df"}'),gl=window.wp.apiFetch;var pl=i.n(gl);async function ml(e,t="GET",i,n={}){const r=new URLSearchParams(n),s=await pl()({path:e+"?"+r.toString(),parse:!1,method:t,data:i});return{body:await s.json(),response:s}}async function _l(e,t){const i=`/wp/v2/${e}/`,{body:n,response:r}=await ml(i,"GET",null,t);return{body:n,total:Number(r.headers.get("X-WP-TotalPages")),totalPages:Number(r.headers.get("X-WP-TotalPages")),response:r}}async function yl(e,t={}){const i=[],n={...t};n.page=1,t.per_page||(n.per_page=100);const r=_l(e,n);i.push(r);const s=(await r).totalPages;for(;n.page<s;)n.page++,i.push(_l(e,n));return(await Promise.all(i)).reduce(((e,t)=>[...e,...t.body]),[])}function vl(e,t,i){return ml(`/wp/v2/${e}/${t}`,"GET",null,i)}const xl=class extends es{constructor(e,t,i,n,r,s,o){let a=e.getExtent();a&&e.canWrapX()&&(a=a.slice(),a[0]=-1/0,a[2]=1/0);let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const h=l?Pe(i,l):i,c=hs(e,t,Ie(h),n),d=new rs(e,t,h,a,.5*c,n),u=d.calculateSourceExtent(),f=Ne(u)?null:s(u,c,r),g=f?0:4,p=f?f.getPixelRatio():1;super(i,n,p,g),this.targetProj_=t,this.maxSourceExtent_=a,this.triangulation_=d,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=f,this.sourcePixelRatio_=p,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){1==this.state&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(2==e){const e=De(this.targetExtent_)/this.targetResolution_,t=Me(this.targetExtent_)/this.targetResolution_;this.canvas_=cs(e,t,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}load(){if(0==this.state){this.state=1,this.changed();const e=this.sourceImage_.getState();2==e||3==e?this.reproject_():(this.sourceListenerKey_=S(this.sourceImage_,m,(function(e){const t=this.sourceImage_.getState();2!=t&&3!=t||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){C(this.sourceListenerKey_),this.sourceListenerKey_=null}};class bl extends t{constructor(e,t){super(e),this.image=t}}function wl(e,t){e.getImage().src=t}const Sl=class extends ka{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();return t&&(e=t[o(t,e,0)]),e}getImage(e,t,i,n){const r=this.getProjection();if(!r||!n||Ht(r,n))return r&&(n=r),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Ht(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&xe(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new xl(r,n,e,t,i,((e,t,i)=>this.getImageInternal(e,t,i,r)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){return L()}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case 1:this.loading=!0,i="imageloadstart";break;case 2:this.loading=!1,i="imageloadend";break;case 3:this.loading=!1,i="imageloaderror";break;default:return}this.hasListener(i)&&this.dispatchEvent(new bl(i,t))}},El=class extends Sl{constructor(e){const t=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:wl;super({attributions:e.attributions,interpolate:e.interpolate,projection:jt(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new is(this.imageExtent_,void 0,1,this.url_,t,i,fn(1,1)),this.imageSize_=e.imageSize?e.imageSize:null,this.image_.addEventListener(m,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,i,n){return Oe(e,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(e){if(2==this.image_.getState()){const e=this.image_.getExtent(),t=this.image_.getImage();let i,n;this.imageSize_?(i=this.imageSize_[0],n=this.imageSize_[1]):(i=t.width,n=t.height);const r=De(e),s=Me(e),o=r/i,a=s/n;let l=i,h=n;if(o>a?l=Math.round(r/a):h=Math.round(s/o),l!==i||h!==n){const e=fn(l,h);this.getInterpolate()||(e.imageSmoothingEnabled=!1);const r=e.canvas;e.drawImage(t,0,0,i,n,0,0,r.width,r.height),this.image_.setImage(r)}}super.handleImageChange(e)}};class Cl{map;wpLayer;visible;extent;projection;source;baseLayer;features;constructor(e,t,i){this.map=e,this.wpLayer=t,this.visible=t.id===e.initialView.layer||0===i&&!e.initialView.layer,this.extent=[0,0,t.image_source?.width,t.image_source?.height],this.projection=new yt({code:"layer-image",units:"pixels",extent:this.extent}),this.source=new El({url:t.image_source?.url,projection:this.projection,imageExtent:this.extent}),this.baseLayer=new Uo({source:this.source,title:t.name,baseLayer:!0,visible:this.visible,blockLayer:this,zIndex:0})}addToMap(){this.source.getUrl()||this.map.setError((0,e.__)("Unable to load layer image.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect")),this.map.olMap.addLayer(this.baseLayer)}fetchMarkerIcons(){try{return yl("imc_icons",{map:this.map.mapId})}catch(t){console.error(t),this.map.setError((0,e.__)("Unable to load marker icons.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}}async fetchMarkers(){try{const e=yl("imc_markers",{imc_layers:this.wpLayer.id,map:this.map.mapId,_fields:"id,type,imc_icons,imc_loc",post_types:"linked",include:this.map.postIds}),t=this.map.showStandalone?yl("imc_markers",{imc_layers:this.wpLayer.id,map:this.map.mapId,_fields:"id,type,imc_icons,imc_loc",post_types:"standalone"}):[];return(await Promise.all([e,t])).flat()}catch(t){console.error(t),this.map.setError((0,e.__)("Unable to load markers.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}}async getFeatures(){if(this.features)return this.features;const[e,t]=await Promise.all([this.fetchMarkers(),this.fetchMarkerIcons()]),i=e.reduce(((e,i)=>{const n=t.find((e=>e.id===i.imc_icons[0]));return n&&e.push(new ll({geometry:new Bi([i.imc_loc?.lng,i.imc_loc?.lat]),icon:{...n.meta},markerId:i.id,postType:i.type})),e}),[]);return this.features=i,i}setMapView(){var e,t;this.visible&&this.map.olMap.setView(new Qi({minZoom:this.wpLayer.meta?.zoom?.min,maxZoom:this.wpLayer.meta?.zoom?.max,projection:this.projection,extent:this.extent,constrainOnlyCenter:!0,center:null!==(e=this.map.initialView.center)&&void 0!==e?e:Ie(this.extent),zoom:null!==(t=this.map.initialView.zoom)&&void 0!==t?t:this.wpLayer.meta?.zoom?.min}))}}class Tl{el;blockAttr;mapId;initialView;showStandalone;postIds;template;olMap;ftLayer;wpLayers;wpMap;popup;selector;postTypes;constructor(t){this.el=t,this.mapId=t.dataset.mapId,this.showStandalone=t.dataset.showStandalone,this.postIds=t.dataset.postIds?t.dataset.postIds.split(","):[];const i=JSON.parse(t.dataset.initialViews);window.innerWidth<600&&i.Mobile.layer?this.initialView=i.Mobile:window.innerWidth<1080&&i.Tablet.layer?this.initialView=i.Tablet:this.initialView=i.Desktop,this.template=t.querySelector("template"),this.olMap=new jr({target:t}),this.ftLayer=new Fo({source:new Fa,style:this.styleIcon,zIndex:10}),this.selector=new ul({style:null,layers:[this.ftLayer],hitTolerance:6}),this.popup=new Ua({popupClass:"flare-marker-popup",closeBox:!0,positioning:"auto",onclose:()=>this.selector.getFeatures().clear(),autoPan:{animation:{duration:500}}}),ml("/wp/v2/types").then((e=>{this.postTypes=Object.values(e.body).reduce(((e,t)=>(e[t.slug]=t.rest_base,e)),{})})).catch((()=>{this.setError((0,e.__)("Unable to load marker types.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}))}styleIcon(e){var t;const i=e.get("icon");if(i)return new Ms({text:new zs({font:(null!==(t=i.size)&&void 0!==t?t:24)+"px remixicon",text:i.img?.ref&&String.fromCharCode(parseInt(fl[i.img.ref],16)),fill:i.colour&&new Es({color:i.colour}),offsetX:i.img?.iconAnchor?.x&&i.size&&(.5-i.img.iconAnchor.x)*i.size,offsetY:i.img?.iconAnchor?.y&&i.size&&(.5-i.img.iconAnchor.y)*i.size})})}addFeatureLayer(){this.ftLayer?(this.olMap.removeLayer(this.ftLayer),this.olMap.addLayer(this.ftLayer)):this.setError((0,e.__)("Unable to load marker layer.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}addPopup(){this.popup?(this.olMap.removeOverlay(this.popup),this.olMap.addOverlay(this.popup)):console.warn("Unable to add popup overlay because no overlay was found.")}addSelectListeners(){if(this.selector){this.olMap.removeInteraction(this.selector),this.olMap.addInteraction(this.selector);const e=this.selector.getFeatures();e.un("add",this.onSelectFeature),e.on("add",this.onSelectFeature),e.un("remove",this.onDeselectFeature),e.on("remove",this.onDeselectFeature),this.olMap.un("pointermove",this.setPointer),this.olMap.on("pointermove",this.setPointer)}else console.warn("Unable to add listener because no selector was found.")}onSelectFeature=async t=>{const i=t.element?.getGeometry()?.getCoordinates();i&&this.popup.show(i,`<p class="flare-popup-desc flare-popup-title"><strong>${(0,e.__)("Loading")}...</string></p>`);const n=this.postTypes[t.element?.get("postType")];try{const e=await vl(n,t.element.get("markerId"),{_fields:"date,modified,slug,type,link,title,excerpt,author,featured_media,imc_icons,imc_img_tag,meta,_embedded",_embed:"author"}),r={...e.body,author:e.body._embedded.author[0],standalone:"imc-marker"===e.body.type},s=ol.render(this.template.innerHTML,r);this.popup.show(i,s),this.popup.performAutoPan()}catch(t){this.setError((0,e.__)("Unable to load marker.","image-map-connect")+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}};onDeselectFeature=()=>this.popup?.hide();setPointer=e=>{const t=this.olMap.getEventPixel(e.originalEvent),i=this.olMap.hasFeatureAtPixel(t,{hitTolerance:6,layerFilter:e=>e===this.ftLayer});this.olMap.getTarget().style.cursor=i?"pointer":""};addMarkerSupport(){this.addFeatureLayer(),this.addPopup(),this.addSelectListeners()}async initBaseLayers(t){const i=[],n=vl("imc_maps",t,{_fields:"id,meta"});i.push(n);const r=yl("imc_layers",{_fields:"id,slug,name,meta,image_source",post:t});i.push(r);try{const e=await Promise.all(i);this.wpMap=e.find((e=>e.body))?.body;const t=this.wpMap?.meta?.layer_order;this.wpLayers=e.find((e=>Array.isArray(e))).sort(((e,i)=>t?.indexOf(i.id)-t?.indexOf(e.id)))}catch(t){const i=await t.json();this.setError(i.message+" "+(0,e.__)("Please refresh this page to try again.","image-map-connect"))}this.wpLayers?.length&&(this.wpLayers.forEach((async(e,t)=>{const i=new Cl(this,e,t);i.addToMap(),i.visible&&(i.setMapView(),this.setFeatures(i))})),this.wpLayers.length>1&&this.addLayerSwitcher())}addLayerSwitcher(){this.olMap.addControl(new Ra({reordering:!1,noScroll:!0,mouseover:!0,displayInLayerSwitcher:e=>e.get("baseLayer"),onchangeCheck:e=>this.setFeatures(e.get("blockLayer"))}))}async setFeatures(e){const t=this.ftLayer.getSource();t.clear();const i=await e.getFeatures();t.addFeatures(i)}setError(e){this.el.innerHTML=`<div class="flare-map-error">${e}</div>`}}addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-flare-hub-image-map-query").forEach((async e=>{const t=new Tl(e);t.addMarkerSupport(),t.initBaseLayers(+e.dataset.mapId)}))}))})()})();